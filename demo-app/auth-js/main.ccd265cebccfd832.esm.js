/*! For license information please see main.ccd265cebccfd832.esm.js.LICENSE.txt */
(self.webpackChunk=self.webpackChunk||[]).push([[179],{6085:(e,t,n)=>{"use strict";n(4836),n(8127),n(4049),n(5979),n(6025),n(9470),n(3661),n(217);function r(e){this.message=e}r.prototype=new Error,r.prototype.name="InvalidCharacterError";var i="undefined"!=typeof window&&window.atob&&window.atob.bind(window)||function(e){var t=String(e).replace(/=+$/,"");if(t.length%4==1)throw new r("'atob' failed: The string to be decoded is not correctly encoded.");for(var n,i,s=0,o=0,a="";i=t.charAt(o++);~i&&(n=s%4?64*n+i:i,s++%4)?a+=String.fromCharCode(255&n>>(-2*s&6)):0)i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(i);return a};function s(e){var t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}try{return function(e){return decodeURIComponent(i(e).replace(/(.)/g,(function(e,t){var n=t.charCodeAt(0).toString(16).toUpperCase();return n.length<2&&(n="0"+n),"%"+n})))}(t)}catch(e){return i(t)}}function o(e){this.message=e}o.prototype=new Error,o.prototype.name="InvalidTokenError";const a=function(e,t){if("string"!=typeof e)throw new o("Invalid token specified");var n=!0===(t=t||{}).header?0:1;try{return JSON.parse(s(e.split(".")[n]))}catch(e){throw new o("Invalid token specified: "+e.message)}};class c{}c.isCordova=()=>!!(window.cordova||window.phonegap||window.PhoneGap),c.isCapacitor=()=>{var e;return!(null==(e=window.Capacitor)||!e.isNativePlatform())},c.isNativeMobile=()=>c.isCapacitor()||c.isCordova(),c.decodeJwt=e=>{try{return e?a(e):e}catch(t){return console.warn("[@badisi/auth-js] Access token was not decoded as it is not a valid JWT."),e}},c.isUrlMatching=(e,t)=>{if(void 0!==t){const n=new URL(e,"http://test"),r=new URL(t,"http://test");if(""!==r.pathname&&"/"!==r.pathname&&!n.pathname.includes(r.pathname))return!1;if("http://test"!==r.origin&&(n.protocol!==r.protocol||n.origin!==r.origin||!`${n.origin}${n.pathname}}`.includes(`${r.origin}${r.pathname}`)))return!1;let i=!0;return r.searchParams.forEach(((e,t)=>{n.searchParams.getAll(t).includes(e)||(i=!1)})),i}return!1},c.getBaseUrl=()=>{var e;const t=document.baseURI||(null==(e=document.querySelector("base"))?void 0:e.href)||location.origin;return t.endsWith("/")?t:`${t}/`},c.stringToURL=e=>{try{return new URL(e)}catch(t){const n=e.startsWith("/")?e.substring(1,e.length):e;return new URL(`${c.getBaseUrl()}${n}`)}};const l=document.createElement("template");l.innerHTML='\n    <demo-app-main>\n        <demo-app-playground tabLabel="Playground"></demo-app-playground>\n        <demo-app-debug tabLabel="Debug"></demo-app-debug>\n        <demo-app-settings tabLabel="Settings"></demo-app-settings>\n    </demo-app-main>\n';class u extends HTMLElement{constructor(){var e;super(),this.demoAppMainEl=void 0,this.demoAppPlaygroundEl=void 0,this.demoAppDebugEl=void 0,this.authManagerSubs=[],this.listeners=[],this.attachShadow({mode:"open"}),null==(e=this.shadowRoot)||e.appendChild(document.importNode(l.content,!0))}connectedCallback(){var e,t,n;this.demoAppMainEl=null==(e=this.shadowRoot)?void 0:e.querySelector("demo-app-main"),this.demoAppPlaygroundEl=null==(t=this.shadowRoot)?void 0:t.querySelector("demo-app-playground"),this.demoAppDebugEl=null==(n=this.shadowRoot)?void 0:n.querySelector("demo-app-debug"),this.listenForHeaderEvents(),this.listenForPlaygroundEvents(),this.listenForAuthChanges()}disconnectedCallback(){this.authManagerSubs.forEach((e=>e.unsubscribe())),this.listeners.forEach((e=>e()))}async callPrivateApi(e,t){if(window.authManager&&e){var n;const r=null!=(n=await window.authManager.getAccessToken())?n:"",i=new XMLHttpRequest;i.onreadystatechange=()=>{if(4===i.readyState){var e;let r;try{var t;r=JSON.parse(null!=(t=i.responseText)?t:"")}catch(n){r=`${i.status} ${i.statusText}`}null==(e=this.demoAppPlaygroundEl)||e.setApiStatus(r,200!==i.status)}},i.open("GET",e,!0),i.setRequestHeader("Authorization",`Bearer ${r}`),null==t||t.split(";").forEach((e=>{if(e){var t,n;const r=e.split(":");i.setRequestHeader(null==(t=r[0])?void 0:t.trim(),(null==(n=r[1])?void 0:n.trim())||"")}})),i.send()}}refreshInfo(e,t){if(window.authManager&&this.demoAppMainEl&&this.demoAppDebugEl)switch(e){case"renewing":this.demoAppMainEl.isRenewing=t;break;case"authenticated":this.demoAppMainEl.isAuthenticated=t,this.demoAppDebugEl.isAuthenticated=t;break;case"userSession":this.demoAppDebugEl.userSession=t;break;case"accessToken":this.demoAppDebugEl.accessToken=t,this.demoAppDebugEl.accessTokenDecoded=c.decodeJwt(t);break;case"idToken":this.demoAppDebugEl.idToken=t,this.demoAppDebugEl.idTokenDecoded=c.decodeJwt(t);break;case"userProfile":this.demoAppDebugEl.userProfile=t}}listenForAuthChanges(){const e=window.authManager;e&&this.authManagerSubs.push(e.onRenewingChanged((e=>this.refreshInfo("renewing",e))),e.onAuthenticatedChanged((e=>this.refreshInfo("authenticated",e))),e.onUserSessionChanged((e=>this.refreshInfo("userSession",e))),e.onAccessTokenChanged((e=>this.refreshInfo("accessToken",e))),e.onIdTokenChanged((e=>this.refreshInfo("idToken",e))),e.onUserProfileChanged((e=>this.refreshInfo("userProfile",e))))}listenForPlaygroundEvents(){if(this.demoAppPlaygroundEl){const e=e=>{var t,n;this.callPrivateApi(null==(t=e.detail)?void 0:t.url,null==(n=e.detail)?void 0:n.headers)};this.demoAppPlaygroundEl.addEventListener("api",e),this.listeners.push((()=>{var t;return null==(t=this.demoAppPlaygroundEl)?void 0:t.removeEventListener("api",e)}))}}listenForHeaderEvents(){const e=window.authManager;if(e&&this.demoAppMainEl){const t=()=>{e.login()};this.demoAppMainEl.addEventListener("login",t);const n=()=>{e.logout("/").then((()=>{var e;const t=document.baseURI||(null==(e=document.querySelector("base"))?void 0:e.href)||location.origin;location.href=t.endsWith("/")?t:`${t}/`}))};this.demoAppMainEl.addEventListener("logout",n);const r=()=>{e.renew()};this.demoAppMainEl.addEventListener("silentRenew",r),this.listeners.push((()=>{var e;return null==(e=this.demoAppMainEl)?void 0:e.removeEventListener("login",t)}),(()=>{var e;return null==(e=this.demoAppMainEl)?void 0:e.removeEventListener("logout",n)}),(()=>{var e;return null==(e=this.demoAppMainEl)?void 0:e.removeEventListener("silentRenew",r)}))}}}customElements.define("app-root",u);n(5754);n(3481),n(5098),n(222),n(6858);const d=function(){this.__data__=[],this.size=0};const h=function(e,t){return e===t||e!=e&&t!=t};const p=function(e,t){for(var n=e.length;n--;)if(h(e[n][0],t))return n;return-1};var g=Array.prototype.splice;const f=function(e){var t=this.__data__,n=p(t,e);return!(n<0)&&(n==t.length-1?t.pop():g.call(t,n,1),--this.size,!0)};const v=function(e){var t=this.__data__,n=p(t,e);return n<0?void 0:t[n][1]};const m=function(e){return p(this.__data__,e)>-1};const _=function(e,t){var n=this.__data__,r=p(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this};function w(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}w.prototype.clear=d,w.prototype.delete=f,w.prototype.get=v,w.prototype.has=m,w.prototype.set=_;const y=w;const b=function(){this.__data__=new y,this.size=0};const S=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n};const x=function(e){return this.__data__.get(e)};const k=function(e){return this.__data__.has(e)};const E="object"==typeof global&&global&&global.Object===Object&&global;var R="object"==typeof self&&self&&self.Object===Object&&self;const T=E||R||Function("return this")();const I=T.Symbol;var U=Object.prototype,A=U.hasOwnProperty,P=U.toString,C=I?I.toStringTag:void 0;const O=function(e){var t=A.call(e,C),n=e[C];try{e[C]=void 0;var i=!0}catch(r){}var s=P.call(e);return i&&(t?e[C]=n:delete e[C]),s};var j=Object.prototype.toString;const L=function(e){return j.call(e)};var M=I?I.toStringTag:void 0;const N=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":M&&M in Object(e)?O(e):L(e)};const q=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)};const $=function(e){if(!q(e))return!1;var t=N(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t};const H=T["__core-js_shared__"];var B,F=(B=/[^.]+$/.exec(H&&H.keys&&H.keys.IE_PROTO||""))?"Symbol(src)_1."+B:"";const D=function(e){return!!F&&F in e};var z=Function.prototype.toString;const W=function(e){if(null!=e){try{return z.call(e)}catch(r){}try{return e+""}catch(r){}}return""};var J=/^\[object .+?Constructor\]$/,V=Function.prototype,K=Object.prototype,G=V.toString,Q=K.hasOwnProperty,X=RegExp("^"+G.call(Q).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const Y=function(e){return!(!q(e)||D(e))&&($(e)?X:J).test(W(e))};const Z=function(e,t){return null==e?void 0:e[t]};const ee=function(e,t){var n=Z(e,t);return Y(n)?n:void 0};const te=ee(T,"Map");const ne=ee(Object,"create");const re=function(){this.__data__=ne?ne(null):{},this.size=0};const ie=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t};var se=Object.prototype.hasOwnProperty;const oe=function(e){var t=this.__data__;if(ne){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return se.call(t,e)?t[e]:void 0};var ae=Object.prototype.hasOwnProperty;const ce=function(e){var t=this.__data__;return ne?void 0!==t[e]:ae.call(t,e)};const le=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=ne&&void 0===t?"__lodash_hash_undefined__":t,this};function ue(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}ue.prototype.clear=re,ue.prototype.delete=ie,ue.prototype.get=oe,ue.prototype.has=ce,ue.prototype.set=le;const de=ue;const he=function(){this.size=0,this.__data__={hash:new de,map:new(te||y),string:new de}};const pe=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e};const ge=function(e,t){var n=e.__data__;return pe(t)?n["string"==typeof t?"string":"hash"]:n.map};const fe=function(e){var t=ge(this,e).delete(e);return this.size-=t?1:0,t};const ve=function(e){return ge(this,e).get(e)};const me=function(e){return ge(this,e).has(e)};const _e=function(e,t){var n=ge(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this};function we(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}we.prototype.clear=he,we.prototype.delete=fe,we.prototype.get=ve,we.prototype.has=me,we.prototype.set=_e;const ye=we;const be=function(e,t){var n=this.__data__;if(n instanceof y){var r=n.__data__;if(!te||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new ye(r)}return n.set(e,t),this.size=n.size,this};function Se(e){var t=this.__data__=new y(e);this.size=t.size}Se.prototype.clear=b,Se.prototype.delete=S,Se.prototype.get=x,Se.prototype.has=k,Se.prototype.set=be;const xe=Se;const ke=function(){try{var e=ee(Object,"defineProperty");return e({},"",{}),e}catch(r){}}();const Ee=function(e,t,n){"__proto__"==t&&ke?ke(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n};const Re=function(e,t,n){(void 0!==n&&!h(e[t],n)||void 0===n&&!(t in e))&&Ee(e,t,n)};const Te=function(e){return function(t,n,r){for(var i=-1,s=Object(t),o=r(t),a=o.length;a--;){var c=o[e?a:++i];if(!1===n(s[c],c,s))break}return t}}();var Ie="object"==typeof exports&&exports&&!exports.nodeType&&exports,Ue=Ie&&"object"==typeof module&&module&&!module.nodeType&&module,Ae=Ue&&Ue.exports===Ie?T.Buffer:void 0,Pe=Ae?Ae.allocUnsafe:void 0;const Ce=function(e,t){if(t)return e.slice();var n=e.length,r=Pe?Pe(n):new e.constructor(n);return e.copy(r),r};const Oe=T.Uint8Array;const je=function(e){var t=new e.constructor(e.byteLength);return new Oe(t).set(new Oe(e)),t};const Le=function(e,t){var n=t?je(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)};const Me=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t};var Ne=Object.create;const qe=function(){function e(){}return function(t){if(!q(t))return{};if(Ne)return Ne(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();const $e=function(e,t){return function(n){return e(t(n))}}(Object.getPrototypeOf,Object);var He=Object.prototype;const Be=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||He)};const Fe=function(e){return"function"!=typeof e.constructor||Be(e)?{}:qe($e(e))};const De=function(e){return null!=e&&"object"==typeof e};const ze=function(e){return De(e)&&"[object Arguments]"==N(e)};var We=Object.prototype,Je=We.hasOwnProperty,Ve=We.propertyIsEnumerable;const Ke=ze(function(){return arguments}())?ze:function(e){return De(e)&&Je.call(e,"callee")&&!Ve.call(e,"callee")};const Ge=Array.isArray;const Qe=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991};const Xe=function(e){return null!=e&&Qe(e.length)&&!$(e)};const Ye=function(e){return De(e)&&Xe(e)};const Ze=function(){return!1};var et="object"==typeof exports&&exports&&!exports.nodeType&&exports,tt=et&&"object"==typeof module&&module&&!module.nodeType&&module,nt=tt&&tt.exports===et?T.Buffer:void 0;const rt=(nt?nt.isBuffer:void 0)||Ze;var it=Function.prototype,st=Object.prototype,ot=it.toString,at=st.hasOwnProperty,ct=ot.call(Object);const lt=function(e){if(!De(e)||"[object Object]"!=N(e))return!1;var t=$e(e);if(null===t)return!0;var n=at.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&ot.call(n)==ct};var ut={};ut["[object Float32Array]"]=ut["[object Float64Array]"]=ut["[object Int8Array]"]=ut["[object Int16Array]"]=ut["[object Int32Array]"]=ut["[object Uint8Array]"]=ut["[object Uint8ClampedArray]"]=ut["[object Uint16Array]"]=ut["[object Uint32Array]"]=!0,ut["[object Arguments]"]=ut["[object Array]"]=ut["[object ArrayBuffer]"]=ut["[object Boolean]"]=ut["[object DataView]"]=ut["[object Date]"]=ut["[object Error]"]=ut["[object Function]"]=ut["[object Map]"]=ut["[object Number]"]=ut["[object Object]"]=ut["[object RegExp]"]=ut["[object Set]"]=ut["[object String]"]=ut["[object WeakMap]"]=!1;const dt=function(e){return De(e)&&Qe(e.length)&&!!ut[N(e)]};const ht=function(e){return function(t){return e(t)}};var pt="object"==typeof exports&&exports&&!exports.nodeType&&exports,gt=pt&&"object"==typeof module&&module&&!module.nodeType&&module,ft=gt&&gt.exports===pt&&E.process,vt=function(){try{var e=gt&&gt.require&&gt.require("util").types;return e||ft&&ft.binding&&ft.binding("util")}catch(r){}}();var mt=vt&&vt.isTypedArray;const _t=mt?ht(mt):dt;const wt=function(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]};var yt=Object.prototype.hasOwnProperty;const bt=function(e,t,n){var r=e[t];yt.call(e,t)&&h(r,n)&&(void 0!==n||t in e)||Ee(e,t,n)};const St=function(e,t,n,r){var i=!n;n||(n={});for(var s=-1,o=t.length;++s<o;){var a=t[s],c=r?r(n[a],e[a],a,n,e):void 0;void 0===c&&(c=e[a]),i?Ee(n,a,c):bt(n,a,c)}return n};const xt=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r};var kt=/^(?:0|[1-9]\d*)$/;const Et=function(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&kt.test(e))&&e>-1&&e%1==0&&e<t};var Rt=Object.prototype.hasOwnProperty;const Tt=function(e,t){var n=Ge(e),r=!n&&Ke(e),i=!n&&!r&&rt(e),s=!n&&!r&&!i&&_t(e),o=n||r||i||s,a=o?xt(e.length,String):[],c=a.length;for(var l in e)!t&&!Rt.call(e,l)||o&&("length"==l||i&&("offset"==l||"parent"==l)||s&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||Et(l,c))||a.push(l);return a};const It=function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t};var Ut=Object.prototype.hasOwnProperty;const At=function(e){if(!q(e))return It(e);var t=Be(e),n=[];for(var r in e)("constructor"!=r||!t&&Ut.call(e,r))&&n.push(r);return n};const Pt=function(e){return Xe(e)?Tt(e,!0):At(e)};const Ct=function(e){return St(e,Pt(e))};const Ot=function(e,t,n,r,i,s,o){var a=wt(e,n),c=wt(t,n),l=o.get(c);if(l)Re(e,n,l);else{var u=s?s(a,c,n+"",e,t,o):void 0,d=void 0===u;if(d){var h=Ge(c),p=!h&&rt(c),g=!h&&!p&&_t(c);u=c,h||p||g?Ge(a)?u=a:Ye(a)?u=Me(a):p?(d=!1,u=Ce(c,!0)):g?(d=!1,u=Le(c,!0)):u=[]:lt(c)||Ke(c)?(u=a,Ke(a)?u=Ct(a):q(a)&&!$(a)||(u=Fe(c))):d=!1}d&&(o.set(c,u),i(u,c,r,s,o),o.delete(c)),Re(e,n,u)}};const jt=function e(t,n,r,i,s){t!==n&&Te(n,(function(o,a){if(s||(s=new xe),q(o))Ot(t,n,a,r,e,i,s);else{var c=i?i(wt(t,a),o,a+"",t,n,s):void 0;void 0===c&&(c=o),Re(t,a,c)}}),Pt)};const Lt=function(e){return e};const Mt=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)};var Nt=Math.max;const qt=function(e,t,n){return t=Nt(void 0===t?e.length-1:t,0),function(){for(var r=arguments,i=-1,s=Nt(r.length-t,0),o=Array(s);++i<s;)o[i]=r[t+i];i=-1;for(var a=Array(t+1);++i<t;)a[i]=r[i];return a[t]=n(o),Mt(e,this,a)}};const $t=function(e){return function(){return e}};const Ht=ke?function(e,t){return ke(e,"toString",{configurable:!0,enumerable:!1,value:$t(t),writable:!0})}:Lt;var Bt=Date.now;const Ft=function(e){var t=0,n=0;return function(){var r=Bt(),i=16-(r-n);if(n=r,i>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(Ht);const Dt=function(e,t){return Ft(qt(e,t,Lt),e+"")};const zt=function(e,t,n){if(!q(n))return!1;var r=typeof t;return!!("number"==r?Xe(n)&&Et(t,n.length):"string"==r&&t in n)&&h(n[t],e)};const Wt=function(e){return Dt((function(t,n){var r=-1,i=n.length,s=i>1?n[i-1]:void 0,o=i>2?n[2]:void 0;for(s=e.length>3&&"function"==typeof s?(i--,s):void 0,o&&zt(n[0],n[1],o)&&(s=i<3?void 0:s,i=1),t=Object(t);++r<i;){var a=n[r];a&&e(t,a,r,s)}return t}))}((function(e,t,n){jt(e,t,n)}));var Jt,Vt,Kt,Gt=n(1175),Qt=n(9393),Xt=n(4924),Yt=n(9602),Zt={debug:()=>{},info:()=>{},warn:()=>{},error:()=>{}},en=(e=>(e[e.NONE=0]="NONE",e[e.ERROR=1]="ERROR",e[e.WARN=2]="WARN",e[e.INFO=3]="INFO",e[e.DEBUG=4]="DEBUG",e))(en||{});(Kt=en||(en={})).reset=function(){Jt=3,Vt=Zt},Kt.setLevel=function(e){if(!(0<=e&&e<=4))throw new Error("Invalid log level");Jt=e},Kt.setLogger=function(e){Vt=e};var tn=class{constructor(e){this._name=e}debug(...e){Jt>=4&&Vt.debug(tn._format(this._name,this._method),...e)}info(...e){Jt>=3&&Vt.info(tn._format(this._name,this._method),...e)}warn(...e){Jt>=2&&Vt.warn(tn._format(this._name,this._method),...e)}error(...e){Jt>=1&&Vt.error(tn._format(this._name,this._method),...e)}throw(e){throw this.error(e),e}create(e){const t=Object.create(this);return t._method=e,t.debug("begin"),t}static createStatic(e,t){const n=new tn(`${e}.${t}`);return n.debug("begin"),n}static _format(e,t){const n=`[${e}]`;return t?`${n} ${t}:`:n}static debug(e,...t){Jt>=4&&Vt.debug(tn._format(e),...t)}static info(e,...t){Jt>=3&&Vt.info(tn._format(e),...t)}static warn(e,...t){Jt>=2&&Vt.warn(tn._format(e),...t)}static error(e,...t){Jt>=1&&Vt.error(tn._format(e),...t)}};en.reset();var nn,rn,sn,on,an,cn,ln=class{static _randomWord(){return Gt.lib.WordArray.random(1).words[0]}static generateUUIDv4(){return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,(e=>(+e^ln._randomWord()&15>>+e/4).toString(16))).replace(/-/g,"")}static generateCodeVerifier(){return ln.generateUUIDv4()+ln.generateUUIDv4()+ln.generateUUIDv4()}static generateCodeChallenge(e){try{const t=Qt(e);return Xt.stringify(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}catch(t){throw tn.error("CryptoUtils.generateCodeChallenge",t),t}}static generateBasicAuth(e,t){const n=Yt.parse([e,t].join(":"));return Xt.stringify(n)}},un=class{constructor(e){this._name=e,this._logger=new tn(`Event('${this._name}')`),this._callbacks=[]}addHandler(e){return this._callbacks.push(e),()=>this.removeHandler(e)}removeHandler(e){const t=this._callbacks.lastIndexOf(e);t>=0&&this._callbacks.splice(t,1)}raise(...e){this._logger.debug("raise:",...e);for(const t of this._callbacks)t(...e)}},dn=class{static decode(e){try{return a(e)}catch(t){throw tn.error("JwtUtils.decode",t),t}}},hn=class{static center({...e}){var t;return null==e.width&&(e.width=null!=(t=[800,720,600,480].find((e=>e<=window.outerWidth/1.618)))?t:360),null!=e.left||(e.left=Math.max(0,Math.round(window.screenX+(window.outerWidth-e.width)/2))),null!=e.height&&(null!=e.top||(e.top=Math.max(0,Math.round(window.screenY+(window.outerHeight-e.height)/2)))),e}static serialize(e){return Object.entries(e).filter((([,e])=>null!=e)).map((([e,t])=>`${e}=${"boolean"!=typeof t?t:t?"yes":"no"}`)).join(",")}},pn=class extends un{constructor(){super(...arguments),this._logger=new tn(`Timer('${this._name}')`),this._timerHandle=null,this._expiration=0,this._callback=()=>{const e=this._expiration-pn.getEpochTime();this._logger.debug("timer completes in",e),this._expiration<=pn.getEpochTime()&&(this.cancel(),super.raise())}}static getEpochTime(){return Math.floor(Date.now()/1e3)}init(e){const t=this._logger.create("init");e=Math.max(Math.floor(e),1);const n=pn.getEpochTime()+e;if(this.expiration===n&&this._timerHandle)return void t.debug("skipping since already initialized for expiration at",this.expiration);this.cancel(),t.debug("using duration",e),this._expiration=n;const r=Math.min(e,5);this._timerHandle=setInterval(this._callback,1e3*r)}get expiration(){return this._expiration}cancel(){this._logger.create("cancel"),this._timerHandle&&(clearInterval(this._timerHandle),this._timerHandle=null)}},gn=class{static readParams(e,t="query"){if(!e)throw new TypeError("Invalid URL");const n=new URL(e,window.location.origin)["fragment"===t?"hash":"search"];return new URLSearchParams(n.slice(1))}},fn=class extends Error{constructor(e,t){var n,r,i;if(super(e.error_description||e.error||""),this.form=t,this.name="ErrorResponse",!e.error)throw tn.error("ErrorResponse","No error passed"),new Error("No error passed");this.error=e.error,this.error_description=null!=(n=e.error_description)?n:null,this.error_uri=null!=(r=e.error_uri)?r:null,this.state=e.userState,this.session_state=null!=(i=e.session_state)?i:null}},vn=class extends Error{constructor(e){super(e),this.name="ErrorTimeout"}},mn=class{constructor(){this._logger=new tn("InMemoryWebStorage"),this._data={}}clear(){this._logger.create("clear"),this._data={}}getItem(e){return this._logger.create(`getItem('${e}')`),this._data[e]}setItem(e,t){this._logger.create(`setItem('${e}')`),this._data[e]=t}removeItem(e){this._logger.create(`removeItem('${e}')`),delete this._data[e]}get length(){return Object.getOwnPropertyNames(this._data).length}key(e){return Object.getOwnPropertyNames(this._data)[e]}},_n=class{constructor(e=[],t=null){this._jwtHandler=t,this._logger=new tn("JsonService"),this._contentTypes=[],this._contentTypes.push(...e,"application/json"),t&&this._contentTypes.push("application/jwt")}async fetchWithTimeout(e,t={}){const{timeoutInSeconds:n,...r}=t;if(!n)return await fetch(e,r);const i=new AbortController,s=setTimeout((()=>i.abort()),1e3*n);try{return await fetch(e,{...t,signal:i.signal})}catch(o){if(o instanceof DOMException&&"AbortError"===o.name)throw new vn("Network timed out");throw o}finally{clearTimeout(s)}}async getJson(e,{token:t}={}){const n=this._logger.create("getJson"),r={Accept:this._contentTypes.join(", ")};let i;t&&(n.debug("token passed, setting Authorization header"),r.Authorization="Bearer "+t);try{n.debug("url:",e),i=await this.fetchWithTimeout(e,{method:"GET",headers:r})}catch(a){throw n.error("Network Error"),a}n.debug("HTTP response received, status",i.status);const s=i.headers.get("Content-Type");if(s&&!this._contentTypes.find((e=>s.startsWith(e)))&&n.throw(new Error(`Invalid response Content-Type: ${null!=s?s:"undefined"}, from URL: ${e}`)),i.ok&&this._jwtHandler&&(null==s?void 0:s.startsWith("application/jwt")))return await this._jwtHandler(await i.text());let o;try{o=await i.json()}catch(a){if(n.error("Error parsing JSON response",a),i.ok)throw a;throw new Error(`${i.statusText} (${i.status})`)}if(!i.ok){if(n.error("Error from server:",o),o.error)throw new fn(o);throw new Error(`${i.statusText} (${i.status}): ${JSON.stringify(o)}`)}return o}async postForm(e,{body:t,basicAuth:n,timeoutInSeconds:r,initCredentials:i}){const s=this._logger.create("postForm"),o={Accept:this._contentTypes.join(", "),"Content-Type":"application/x-www-form-urlencoded"};let a;void 0!==n&&(o.Authorization="Basic "+n);try{s.debug("url:",e),a=await this.fetchWithTimeout(e,{method:"POST",headers:o,body:t,timeoutInSeconds:r,credentials:i})}catch(d){throw s.error("Network error"),d}s.debug("HTTP response received, status",a.status);const c=a.headers.get("Content-Type");if(c&&!this._contentTypes.find((e=>c.startsWith(e))))throw new Error(`Invalid response Content-Type: ${null!=c?c:"undefined"}, from URL: ${e}`);const l=await a.text();let u={};if(l)try{u=JSON.parse(l)}catch(d){if(s.error("Error parsing JSON response",d),a.ok)throw d;throw new Error(`${a.statusText} (${a.status})`)}if(!a.ok){if(s.error("Error from server:",u),u.error)throw new fn(u,t);throw new Error(`${a.statusText} (${a.status}): ${JSON.stringify(u)}`)}return u}},wn=class{constructor({prefix:e="oidc.",store:t=localStorage}={}){this._logger=new tn("WebStorageStateStore"),this._store=t,this._prefix=e}set(e,t){return this._logger.create(`set('${e}')`),e=this._prefix+e,this._store.setItem(e,t),Promise.resolve()}get(e){this._logger.create(`get('${e}')`),e=this._prefix+e;const t=this._store.getItem(e);return Promise.resolve(t)}remove(e){this._logger.create(`remove('${e}')`),e=this._prefix+e;const t=this._store.getItem(e);return this._store.removeItem(e),Promise.resolve(t)}getAllKeys(){this._logger.create("getAllKeys");const e=[];for(let t=0;t<this._store.length;t++){const n=this._store.key(t);n&&0===n.indexOf(this._prefix)&&e.push(n.substr(this._prefix.length))}return Promise.resolve(e)}},yn=class{constructor({authority:e,metadataUrl:t,metadata:n,signingKeys:r,metadataSeed:i,client_id:s,client_secret:o,response_type:a="code",scope:c="openid",redirect_uri:l,post_logout_redirect_uri:u,client_authentication:d="client_secret_post",prompt:h,display:p,max_age:g,ui_locales:f,acr_values:v,resource:m,response_mode:_="query",filterProtocolClaims:w=!0,loadUserInfo:y=!1,staleStateAgeInSeconds:b=900,clockSkewInSeconds:S=300,userInfoJwtIssuer:x="OP",mergeClaims:k=!1,stateStore:E,refreshTokenCredentials:R="same-origin",extraQueryParams:T={},extraTokenParams:I={}}){if(this.authority=e,t?this.metadataUrl=t:(this.metadataUrl=e,e&&(this.metadataUrl.endsWith("/")||(this.metadataUrl+="/"),this.metadataUrl+=".well-known/openid-configuration")),this.metadata=n,this.metadataSeed=i,this.signingKeys=r,this.client_id=s,this.client_secret=o,this.response_type=a,this.scope=c,this.redirect_uri=l,this.post_logout_redirect_uri=u,this.client_authentication=d,this.prompt=h,this.display=p,this.max_age=g,this.ui_locales=f,this.acr_values=v,this.resource=m,this.response_mode=_,this.filterProtocolClaims=!!w,this.loadUserInfo=!!y,this.staleStateAgeInSeconds=b,this.clockSkewInSeconds=S,this.userInfoJwtIssuer=x,this.mergeClaims=!!k,this.refreshTokenCredentials=R,E)this.stateStore=E;else{const e="undefined"!=typeof window?window.localStorage:new mn;this.stateStore=new wn({store:e})}this.extraQueryParams=T,this.extraTokenParams=I}},bn=class{constructor(e,t){this._settings=e,this._metadataService=t,this._logger=new tn("TokenClient"),this._jsonService=new _n}async exchangeCode({grant_type:e="authorization_code",redirect_uri:t=this._settings.redirect_uri,client_id:n=this._settings.client_id,client_secret:r=this._settings.client_secret,...i}){const s=this._logger.create("exchangeCode");n||s.throw(new Error("A client_id is required")),t||s.throw(new Error("A redirect_uri is required")),i.code||s.throw(new Error("A code is required")),i.code_verifier||s.throw(new Error("A code_verifier is required"));const o=new URLSearchParams({grant_type:e,redirect_uri:t});for(const[u,d]of Object.entries(i))null!=d&&o.set(u,d);let a;switch(this._settings.client_authentication){case"client_secret_basic":if(!r)throw s.throw(new Error("A client_secret is required")),null;a=ln.generateBasicAuth(n,r);break;case"client_secret_post":o.append("client_id",n),r&&o.append("client_secret",r)}const c=await this._metadataService.getTokenEndpoint(!1);s.debug("got token endpoint");const l=await this._jsonService.postForm(c,{body:o,basicAuth:a});return s.debug("got response"),l}async exchangeRefreshToken({grant_type:e="refresh_token",client_id:t=this._settings.client_id,client_secret:n=this._settings.client_secret,timeoutInSeconds:r,refreshTokenCredentials:i,...s}){const o=this._logger.create("exchangeRefreshToken");t||o.throw(new Error("A client_id is required")),s.refresh_token||o.throw(new Error("A refresh_token is required"));const a=new URLSearchParams({grant_type:e});for(const[d,h]of Object.entries(s))null!=h&&a.set(d,h);let c;switch(this._settings.client_authentication){case"client_secret_basic":if(!n)throw o.throw(new Error("A client_secret is required")),null;c=ln.generateBasicAuth(t,n);break;case"client_secret_post":a.append("client_id",t),n&&a.append("client_secret",n)}const l=await this._metadataService.getTokenEndpoint(!1);o.debug("got token endpoint");const u=await this._jsonService.postForm(l,{body:a,basicAuth:c,timeoutInSeconds:r,initCredentials:i});return o.debug("got response"),u}async revoke(e){var t;const n=this._logger.create("revoke");e.token||n.throw(new Error("A token is required"));const r=await this._metadataService.getRevocationEndpoint(!1);n.debug(`got revocation endpoint, revoking ${null!=(t=e.token_type_hint)?t:"default token type"}`);const i=new URLSearchParams;for(const[s,o]of Object.entries(e))null!=o&&i.set(s,o);i.set("client_id",this._settings.client_id),this._settings.client_secret&&i.set("client_secret",this._settings.client_secret),await this._jsonService.postForm(r,{body:i}),n.debug("got response")}},Sn=["iss","aud","exp","nbf","iat","jti","auth_time","nonce","acr","amr","azp","at_hash"],xn=class{constructor(e){this.id=e.id||ln.generateUUIDv4(),this.data=e.data,e.created&&e.created>0?this.created=e.created:this.created=pn.getEpochTime(),this.request_type=e.request_type}toStorageString(){return new tn("State").create("toStorageString"),JSON.stringify({id:this.id,data:this.data,created:this.created,request_type:this.request_type})}static fromStorageString(e){return tn.createStatic("State","fromStorageString"),new xn(JSON.parse(e))}static async clearStaleState(e,t){const n=tn.createStatic("State","clearStaleState"),r=pn.getEpochTime()-t,i=await e.getAllKeys();n.debug("got keys",i);for(let o=0;o<i.length;o++){const t=i[o],a=await e.get(t);let c=!1;if(a)try{const e=xn.fromStorageString(a);n.debug("got item from key:",t,e.created),e.created<=r&&(c=!0)}catch(s){n.error("Error parsing state for key:",t,s),c=!0}else n.debug("no item in storage for key:",t),c=!0;c&&(n.debug("removed item for key:",t),e.remove(t))}}},kn=class extends xn{constructor(e){super(e),!0===e.code_verifier?this.code_verifier=ln.generateCodeVerifier():e.code_verifier&&(this.code_verifier=e.code_verifier),this.code_verifier&&(this.code_challenge=ln.generateCodeChallenge(this.code_verifier)),this.authority=e.authority,this.client_id=e.client_id,this.redirect_uri=e.redirect_uri,this.scope=e.scope,this.client_secret=e.client_secret,this.extraTokenParams=e.extraTokenParams,this.response_mode=e.response_mode,this.skipUserInfo=e.skipUserInfo}toStorageString(){return new tn("SigninState").create("toStorageString"),JSON.stringify({id:this.id,data:this.data,created:this.created,request_type:this.request_type,code_verifier:this.code_verifier,authority:this.authority,client_id:this.client_id,redirect_uri:this.redirect_uri,scope:this.scope,client_secret:this.client_secret,extraTokenParams:this.extraTokenParams,response_mode:this.response_mode,skipUserInfo:this.skipUserInfo})}static fromStorageString(e){tn.createStatic("SigninState","fromStorageString");const t=JSON.parse(e);return new kn(t)}},En=class{constructor(e){this.access_token="",this.token_type="",this.profile={},this.state=e.get("state"),this.session_state=e.get("session_state"),this.error=e.get("error"),this.error_description=e.get("error_description"),this.error_uri=e.get("error_uri"),this.code=e.get("code")}get expires_in(){if(void 0!==this.expires_at)return this.expires_at-pn.getEpochTime()}set expires_in(e){"string"==typeof e&&(e=Number(e)),void 0!==e&&e>=0&&(this.expires_at=Math.floor(e)+pn.getEpochTime())}get isOpenId(){var e;return(null==(e=this.scope)?void 0:e.split(" ").includes("openid"))||!!this.id_token}},Rn=class{constructor(e){var t;this.id_token=e.id_token,this.session_state=null!=(t=e.session_state)?t:null,this.access_token=e.access_token,this.refresh_token=e.refresh_token,this.token_type=e.token_type,this.scope=e.scope,this.profile=e.profile,this.expires_at=e.expires_at,this.state=e.userState}get expires_in(){if(void 0!==this.expires_at)return this.expires_at-pn.getEpochTime()}set expires_in(e){void 0!==e&&(this.expires_at=Math.floor(e)+pn.getEpochTime())}get expired(){const e=this.expires_in;if(void 0!==e)return e<=0}get scopes(){var e,t;return null!=(t=null==(e=this.scope)?void 0:e.split(" "))?t:[]}toStorageString(){return new tn("User").create("toStorageString"),JSON.stringify({id_token:this.id_token,session_state:this.session_state,access_token:this.access_token,refresh_token:this.refresh_token,token_type:this.token_type,scope:this.scope,profile:this.profile,expires_at:this.expires_at})}static fromStorageString(e){return tn.createStatic("User","fromStorageString"),new Rn(JSON.parse(e))}},Tn="oidc-client",In=class{constructor(){this._abort=new un("Window navigation aborted"),this._disposeHandlers=new Set,this._window=null}async navigate(e){const t=this._logger.create("navigate");if(!this._window)throw new Error("Attempted to navigate on a disposed window");t.debug("setting URL in window"),this._window.location.replace(e.url);const{url:n,keepOpen:r}=await new Promise(((n,r)=>{const i=i=>{var s;const o=i.data,a=null!=(s=e.scriptOrigin)?s:window.location.origin;if(i.origin===a&&(null==o?void 0:o.source)===Tn){try{const n=gn.readParams(o.url,e.response_mode).get("state");if(n||t.warn("no state found in response url"),i.source!==this._window&&n!==e.state)return}catch(c){this._dispose(),r(new Error("Invalid response from window"))}n(o)}};window.addEventListener("message",i,!1),this._disposeHandlers.add((()=>window.removeEventListener("message",i,!1))),this._disposeHandlers.add(this._abort.addHandler((e=>{this._dispose(),r(e)})))}));return t.debug("got response from window"),this._dispose(),r||this.close(),{url:n}}_dispose(){this._logger.create("_dispose");for(const e of this._disposeHandlers)e();this._disposeHandlers.clear()}static _notifyParent(e,t,n=!1,r=window.location.origin){e.postMessage({source:Tn,url:t,keepOpen:n},r)}},Un={location:!1,toolbar:!1,height:640},An="_blank",Pn=60,Cn=2,On=10,jn=class extends yn{constructor(e){const{popup_redirect_uri:t=e.redirect_uri,popup_post_logout_redirect_uri:n=e.post_logout_redirect_uri,popupWindowFeatures:r=Un,popupWindowTarget:i=An,redirectMethod:s="assign",redirectTarget:o="self",iframeNotifyParentOrigin:a=e.iframeNotifyParentOrigin,iframeScriptOrigin:c=e.iframeScriptOrigin,silent_redirect_uri:l=e.redirect_uri,silentRequestTimeoutInSeconds:u=On,automaticSilentRenew:d=!0,validateSubOnSilentRenew:h=!0,includeIdTokenInSilentRenew:p=!1,monitorSession:g=!1,monitorAnonymousSession:f=!1,checkSessionIntervalInSeconds:v=Cn,query_status_response_type:m="code",stopCheckSessionOnError:_=!0,revokeTokenTypes:w=["access_token","refresh_token"],revokeTokensOnSignout:y=!1,accessTokenExpiringNotificationTimeInSeconds:b=Pn,userStore:S}=e;if(super(e),this.popup_redirect_uri=t,this.popup_post_logout_redirect_uri=n,this.popupWindowFeatures=r,this.popupWindowTarget=i,this.redirectMethod=s,this.redirectTarget=o,this.iframeNotifyParentOrigin=a,this.iframeScriptOrigin=c,this.silent_redirect_uri=l,this.silentRequestTimeoutInSeconds=u,this.automaticSilentRenew=d,this.validateSubOnSilentRenew=h,this.includeIdTokenInSilentRenew=p,this.monitorSession=g,this.monitorAnonymousSession=f,this.checkSessionIntervalInSeconds=v,this.stopCheckSessionOnError=_,this.query_status_response_type=m,this.revokeTokenTypes=w,this.revokeTokensOnSignout=y,this.accessTokenExpiringNotificationTimeInSeconds=b,S)this.userStore=S;else{const e="undefined"!=typeof window?window.sessionStorage:new mn;this.userStore=new wn({store:e})}}},Ln=class extends In{constructor({silentRequestTimeoutInSeconds:e=On}){super(),this._logger=new tn("IFrameWindow"),this._timeoutInSeconds=e,this._frame=Ln.createHiddenIframe(),this._window=this._frame.contentWindow}static createHiddenIframe(){const e=window.document.createElement("iframe");return e.style.visibility="hidden",e.style.position="fixed",e.style.left="-1000px",e.style.top="0",e.width="0",e.height="0",e.setAttribute("sandbox","allow-scripts allow-same-origin allow-forms"),window.document.body.appendChild(e),e}async navigate(e){this._logger.debug("navigate: Using timeout of:",this._timeoutInSeconds);const t=setTimeout((()=>this._abort.raise(new vn("IFrame timed out without a response"))),1e3*this._timeoutInSeconds);return this._disposeHandlers.add((()=>clearTimeout(t))),await super.navigate(e)}close(){var e;this._frame&&(this._frame.parentNode&&(this._frame.addEventListener("load",(e=>{var t;const n=e.target;null==(t=n.parentNode)||t.removeChild(n),this._abort.raise(new Error("IFrame removed from DOM"))}),!0),null==(e=this._frame.contentWindow)||e.location.replace("about:blank")),this._frame=null),this._window=null}static notifyParent(e,t){return super._notifyParent(window.parent,e,!1,t)}},Mn=class extends In{constructor({popupWindowTarget:e=An,popupWindowFeatures:t={}}){super(),this._logger=new tn("PopupWindow");const n=hn.center({...Un,...t});this._window=window.open(void 0,e,hn.serialize(n))}async navigate(e){var t;null==(t=this._window)||t.focus();const n=setInterval((()=>{this._window&&!this._window.closed||this._abort.raise(new Error("Popup closed by user"))}),500);return this._disposeHandlers.add((()=>clearInterval(n))),await super.navigate(e)}close(){this._window&&(this._window.closed||(this._window.close(),this._abort.raise(new Error("Popup closed")))),this._window=null}static notifyOpener(e,t){if(!window.opener)throw new Error("No window.opener. Can't complete notification.");return super._notifyParent(window.opener,e,t)}};class Nn{constructor(){this.subscribers=[],this.lastNotifiedValue=void 0}add(e){return this.subscribers.push(e),this.lastNotifiedValue&&e(...this.lastNotifiedValue),{unsubscribe:()=>this.unsubscribe(e)}}notify(...e){this.lastNotifiedValue=e,this.subscribers.forEach((t=>{t(...e)}))}unsubscribe(e){if(e){const t=this.subscribers.indexOf(e);-1!==t&&this.subscribers.splice(t,1)}else this.subscribers=[]}}const qn=window.localStorage,$n=null==(nn=window.Capacitor)||null==(rn=nn.Plugins)?void 0:rn.Storage,Hn=null==(sn=window.Capacitor)||null==(on=sn.Plugins)?void 0:on.Preferences,Bn=null==(an=window.Capacitor)||null==(cn=an.Plugins)?void 0:cn.SecureStoragePlugin;class Fn{constructor(){if(this._logger=new tn("MobileStorage"),!Bn){let e="[@badisi/auth-js] This application is currently using an unsafe storage.\n\n";e+="\u24d8 Please follow the recommended guide and use `capacitor-secure-storage-plugin` instead.",console.warn(e)}Bn?this._logger.debug("Using `capacitor-secure-storage-plugin` implementation"):Hn?this._logger.debug("Using `@capacitor/preferences` implementation"):$n?this._logger.debug("Using `@capacitor/storage` implementation"):this._logger.debug("Using `localStorage` implementation")}async length(){return Bn?(await Bn.keys()).value.length:Hn?(await Hn.keys()).keys.length:$n?(await $n.keys()).keys.length:qn.length}async key(e){return Bn?(await Bn.keys()).value[e]:Hn?(await Hn.keys()).keys[e]:$n?(await $n.keys()).keys[e]:qn.key(e)}async clear(){this._logger.create("clear"),Bn?await Bn.clear():Hn?await Hn.clear():$n?await $n.clear():qn.clear()}async getItem(e){if(this._logger.create(`getItem('${e}')`),!Bn)return Hn?(await Hn.get({key:e})).value:$n?(await $n.get({key:e})).value:qn.getItem(e);try{return(await Bn.get({key:e})).value}catch(t){return null}}async setItem(e,t){this._logger.create(`setItem('${e}')`),Bn?await Bn.set({key:e,value:t}):Hn?await Hn.set({key:e,value:t}):$n?await $n.set({key:e,value:t}):qn.setItem(e,t)}async removeItem(e){this._logger.create(`removeItem('${e}')`),Bn?await Bn.remove({key:e}):Hn?await Hn.remove({key:e}):$n?await $n.remove({key:e}):qn.removeItem(e)}}let Dn;!function(e){e.REDIRECT="REDIRECT",e.POPUP="POPUP"}(Dn||(Dn={}));class zn{constructor(){this.expired=void 0,this.expires_in=void 0,this.expires_at=void 0}static deserialize(e){const t=new zn,n=Object.keys(t);for(const r of n)t[r]=e[r];return t}}function Wn(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}var Jn,Vn,Kn,Gn;n(110);const Qn=null==(Jn=window.Capacitor)||null==(Vn=Jn.Plugins)?void 0:Vn.App,Xn=null==(Kn=window.Capacitor)||null==(Gn=Kn.Plugins)?void 0:Gn.Browser;class Yn{constructor(e,t){if(this.options=e,this.redirectUrl=t,this._logger=new tn("MobileWindow"),this.capacitorAppUrlOpenHandle=void 0,this.capacitorBrowserFinishedHandle=void 0,this.originalHandleOpenURL=window.handleOpenURL,this.timer=void 0,this.navigateLogger=void 0,this._resolve=void 0,this._reject=void 0,!c.isCapacitor()&&!c.isCordova()){let e="[@badisi/auth-js] Required core dependency not found.\n\n";e+="\u24d8 Please follow the recommended guide and install either `Capacitor` or `Cordova` dependency.",console.error(e)}if(!Xn){let e="[@badisi/auth-js] Required plugin not found.\n\n";e+="\u24d8 Please follow the recommended guide and install either `@badisi/capacitor-browsertab` or `@capacitor/browser` plugin.",console.error(e)}if(Xn){let e="[@badisi/auth-js] This application is currently using a non recommended browser plugin.\n\n";e+="\u24d8 Please follow the recommended guide and use `@badisi/capacitor-browsertab` instead.",console.warn(e)}Xn&&this._logger.debug("Using `@capacitor/browser` implementation")}async navigate(e){return this.navigateLogger=this._logger.create("navigate"),this.navigateLogger.debug("url",e.url),new Promise(((t,n)=>{this._resolve=t,this._reject=n,this.installCustomUrlSchemeHandler().then((()=>{Xn&&this.useCapacitorBrowser(e)}))}))}async close(){const e=this._logger.create("close");await(null==Xn?void 0:Xn.close().catch((t=>e.error(t)))),e.debug("success")}async cleanup(){var e,t;const n=this._logger.create("cleanup");window.handleOpenURL=this.originalHandleOpenURL,await(null==(e=this.capacitorBrowserFinishedHandle)?void 0:e.remove()),await(null==(t=this.capacitorAppUrlOpenHandle)?void 0:t.remove()),clearTimeout(this.timer),n.debug("success")}async onError(e){var t,n;null==(t=this.navigateLogger)||t.error("error response:",e),await this.cleanup(),await this.close(),null==(n=this._reject)||n.call(this,new Error(e))}async onSuccess(e){var t,n;null==(t=this.navigateLogger)||t.debug("successful response:",e),await this.cleanup(),await this.close(),null==(n=this._resolve)||n.call(this,{url:e})}async useCapacitorBrowser(e){this.capacitorBrowserFinishedHandle=await(null==Xn?void 0:Xn.addListener("browserFinished",(()=>{this.onError("Capacitor browser closed by user")}))),await(null==Xn?void 0:Xn.open({url:e.url,presentationStyle:"popover"}))}async useBrowserTab(e){}async installCustomUrlSchemeHandler(){const e=this._logger.create("installCustomUrlSchemeHandler");this.timer=setTimeout((()=>{this.onError("Installing custom url scheme handler, timed out without a response")}),1e4),await this.cleanup(),c.isCapacitor()?(e.debug("listening to Capacitor `appUrlOpen` event"),this.capacitorAppUrlOpenHandle=await(null==Qn||null==Qn.addListener?void 0:Qn.addListener("appUrlOpen",(({url:e})=>{c.isUrlMatching(e,this.redirectUrl)&&this.onSuccess(e)})))):c.isCordova()&&(e.debug("waiting for Cordova `handleOpenURL` callback"),window.handleOpenURL=e=>{var t;null==(t=this.originalHandleOpenURL)||t.call(this,e),c.isUrlMatching(e,this.redirectUrl)&&this.onSuccess(e)}),e.debug("success")}}class Zn{constructor(e){this.settings=e,this._logger=new tn("MobileNavigator")}prepare(e,t){return this._logger.create("prepare"),new Yn(e,t)}}const er=["name"],tr=["name"];class nr extends class{constructor(e){this._logger=new tn("UserManager"),this.settings=new jn(e),this._client=new class{constructor(e){this._logger=new tn("OidcClient"),this.settings=new yn(e),this.metadataService=new class{constructor(e){this._settings=e,this._logger=new tn("MetadataService"),this._jsonService=new _n(["application/jwk-set+json"]),this._signingKeys=null,this._metadata=null,this._metadataUrl=this._settings.metadataUrl,this._settings.signingKeys&&(this._logger.debug("using signingKeys from settings"),this._signingKeys=this._settings.signingKeys),this._settings.metadata&&(this._logger.debug("using metadata from settings"),this._metadata=this._settings.metadata)}resetSigningKeys(){this._signingKeys=null}async getMetadata(){const e=this._logger.create("getMetadata");if(this._metadata)return e.debug("using cached values"),this._metadata;if(!this._metadataUrl)throw e.throw(new Error("No authority or metadataUrl configured on settings")),null;e.debug("getting metadata from",this._metadataUrl);const t=await this._jsonService.getJson(this._metadataUrl);return e.debug("merging remote JSON with seed metadata"),this._metadata=Object.assign({},this._settings.metadataSeed,t),this._metadata}getIssuer(){return this._getMetadataProperty("issuer")}getAuthorizationEndpoint(){return this._getMetadataProperty("authorization_endpoint")}getUserInfoEndpoint(){return this._getMetadataProperty("userinfo_endpoint")}getTokenEndpoint(e=!0){return this._getMetadataProperty("token_endpoint",e)}getCheckSessionIframe(){return this._getMetadataProperty("check_session_iframe",!0)}getEndSessionEndpoint(){return this._getMetadataProperty("end_session_endpoint",!0)}getRevocationEndpoint(e=!0){return this._getMetadataProperty("revocation_endpoint",e)}getKeysEndpoint(e=!0){return this._getMetadataProperty("jwks_uri",e)}async _getMetadataProperty(e,t=!1){const n=this._logger.create(`_getMetadataProperty('${e}')`),r=await this.getMetadata();if(n.debug("resolved"),void 0===r[e]){if(!0===t)return void n.warn("Metadata does not contain optional property");n.throw(new Error("Metadata does not contain property "+e))}return r[e]}async getSigningKeys(){const e=this._logger.create("getSigningKeys");if(this._signingKeys)return e.debug("returning signingKeys from cache"),this._signingKeys;const t=await this.getKeysEndpoint(!1);e.debug("got jwks_uri",t);const n=await this._jsonService.getJson(t);if(e.debug("got key set",n),!Array.isArray(n.keys))throw e.throw(new Error("Missing keys on keyset")),null;return this._signingKeys=n.keys,this._signingKeys}}(this.settings),this._validator=new class{constructor(e,t){this._settings=e,this._metadataService=t,this._logger=new tn("ResponseValidator"),this._userInfoService=new class{constructor(e){this._metadataService=e,this._logger=new tn("UserInfoService"),this._getClaimsFromJwt=async e=>{const t=this._logger.create("_getClaimsFromJwt");try{const n=dn.decode(e);return t.debug("JWT decoding successful"),n}catch(n){throw t.error("Error parsing JWT response"),n}},this._jsonService=new _n(void 0,this._getClaimsFromJwt)}async getClaims(e){const t=this._logger.create("getClaims");e||this._logger.throw(new Error("No token passed"));const n=await this._metadataService.getUserInfoEndpoint();t.debug("got userinfo url",n);const r=await this._jsonService.getJson(n,{token:e});return t.debug("got claims",r),r}}(this._metadataService),this._tokenClient=new bn(this._settings,this._metadataService)}async validateSigninResponse(e,t){const n=this._logger.create("validateSigninResponse");this._processSigninState(e,t),n.debug("state processed"),await this._processCode(e,t),n.debug("code processed"),e.isOpenId&&this._validateIdTokenAttributes(e),n.debug("tokens validated"),await this._processClaims(e,null==t?void 0:t.skipUserInfo,e.isOpenId),n.debug("claims processed")}async validateRefreshResponse(e,t){const n=this._logger.create("validateRefreshResponse");e.userState=t.data,null!=e.session_state||(e.session_state=t.session_state),null!=e.scope||(e.scope=t.scope);const r=e.isOpenId&&!!e.id_token;r&&(this._validateIdTokenAttributes(e,t.id_token),n.debug("ID Token validated")),await this._processClaims(e,!1,r),n.debug("claims processed")}validateSignoutResponse(e,t){const n=this._logger.create("validateSignoutResponse");if(t.id!==e.state&&n.throw(new Error("State does not match")),n.debug("state validated"),e.userState=t.data,e.error)throw n.warn("Response was error",e.error),new fn(e)}_processSigninState(e,t){const n=this._logger.create("_processSigninState");if(t.id!==e.state&&n.throw(new Error("State does not match")),t.client_id||n.throw(new Error("No client_id on state")),t.authority||n.throw(new Error("No authority on state")),this._settings.authority!==t.authority&&n.throw(new Error("authority mismatch on settings vs. signin state")),this._settings.client_id&&this._settings.client_id!==t.client_id&&n.throw(new Error("client_id mismatch on settings vs. signin state")),n.debug("state validated"),e.userState=t.data,null!=e.scope||(e.scope=t.scope),e.error)throw n.warn("Response was error",e.error),new fn(e);t.code_verifier&&!e.code&&n.throw(new Error("Expected code in response")),!t.code_verifier&&e.code&&n.throw(new Error("Unexpected code in response"))}async _processClaims(e,t=!1,n=!0){const r=this._logger.create("_processClaims");if(e.profile=this._filterProtocolClaims(e.profile),t||!this._settings.loadUserInfo||!e.access_token)return void r.debug("not loading user info");r.debug("loading user info");const i=await this._userInfoService.getClaims(e.access_token);r.debug("user info claims received from user info endpoint"),n&&i.sub!==e.profile.sub&&r.throw(new Error("subject from UserInfo response does not match subject in ID Token")),e.profile=this._mergeClaims(e.profile,this._filterProtocolClaims(i)),r.debug("user info claims received, updated profile:",e.profile)}_mergeClaims(e,t){const n={...e};for(const[r,i]of Object.entries(t))for(const e of Array.isArray(i)?i:[i]){const t=n[r];t?Array.isArray(t)?t.includes(e)||t.push(e):n[r]!==e&&("object"==typeof e&&this._settings.mergeClaims?n[r]=this._mergeClaims(t,e):n[r]=[t,e]):n[r]=e}return n}_filterProtocolClaims(e){const t={...e};if(this._settings.filterProtocolClaims)for(const n of Sn)delete t[n];return t}async _processCode(e,t){const n=this._logger.create("_processCode");if(e.code){n.debug("Validating code");const r=await this._tokenClient.exchangeCode({client_id:t.client_id,client_secret:t.client_secret,code:e.code,redirect_uri:t.redirect_uri,code_verifier:t.code_verifier,...t.extraTokenParams});Object.assign(e,r)}else n.debug("No code to process")}_validateIdTokenAttributes(e,t){var n;const r=this._logger.create("_validateIdTokenAttributes");r.debug("decoding ID Token JWT");const i=dn.decode(null!=(n=e.id_token)?n:"");if(i.sub||r.throw(new Error("ID Token is missing a subject claim")),t){const e=dn.decode(t);e.sub!==i.sub&&r.throw(new Error("sub in id_token does not match current sub")),e.auth_time&&e.auth_time!==i.auth_time&&r.throw(new Error("auth_time in id_token does not match original auth_time")),e.azp&&e.azp!==i.azp&&r.throw(new Error("azp in id_token does not match original azp")),!e.azp&&i.azp&&r.throw(new Error("azp not in id_token, but present in original id_token"))}e.profile=i}}(this.settings,this.metadataService),this._tokenClient=new bn(this.settings,this.metadataService)}async createSigninRequest({state:e,request:t,request_uri:n,request_type:r,id_token_hint:i,login_hint:s,skipUserInfo:o,nonce:a,response_type:c=this.settings.response_type,scope:l=this.settings.scope,redirect_uri:u=this.settings.redirect_uri,prompt:d=this.settings.prompt,display:h=this.settings.display,max_age:p=this.settings.max_age,ui_locales:g=this.settings.ui_locales,acr_values:f=this.settings.acr_values,resource:v=this.settings.resource,response_mode:m=this.settings.response_mode,extraQueryParams:_=this.settings.extraQueryParams,extraTokenParams:w=this.settings.extraTokenParams}){const y=this._logger.create("createSigninRequest");if("code"!==c)throw new Error("Only the Authorization Code flow (with PKCE) is supported");const b=await this.metadataService.getAuthorizationEndpoint();y.debug("Received authorization endpoint",b);const S=new class{constructor({url:e,authority:t,client_id:n,redirect_uri:r,response_type:i,scope:s,state_data:o,response_mode:a,request_type:c,client_secret:l,nonce:u,skipUserInfo:d,extraQueryParams:h,extraTokenParams:p,...g}){if(this._logger=new tn("SigninRequest"),!e)throw this._logger.error("ctor: No url passed"),new Error("url");if(!n)throw this._logger.error("ctor: No client_id passed"),new Error("client_id");if(!r)throw this._logger.error("ctor: No redirect_uri passed"),new Error("redirect_uri");if(!i)throw this._logger.error("ctor: No response_type passed"),new Error("response_type");if(!s)throw this._logger.error("ctor: No scope passed"),new Error("scope");if(!t)throw this._logger.error("ctor: No authority passed"),new Error("authority");this.state=new kn({data:o,request_type:c,code_verifier:!0,client_id:n,authority:t,redirect_uri:r,response_mode:a,client_secret:l,scope:s,extraTokenParams:p,skipUserInfo:d});const f=new URL(e);f.searchParams.append("client_id",n),f.searchParams.append("redirect_uri",r),f.searchParams.append("response_type",i),f.searchParams.append("scope",s),u&&f.searchParams.append("nonce",u),f.searchParams.append("state",this.state.id),this.state.code_challenge&&(f.searchParams.append("code_challenge",this.state.code_challenge),f.searchParams.append("code_challenge_method","S256"));for(const[v,m]of Object.entries({response_mode:a,...g,...h}))null!=m&&f.searchParams.append(v,m.toString());this.url=f.href}}({url:b,authority:this.settings.authority,client_id:this.settings.client_id,redirect_uri:u,response_type:c,scope:l,state_data:e,prompt:d,display:h,max_age:p,ui_locales:g,id_token_hint:i,login_hint:s,acr_values:f,resource:v,request:t,request_uri:n,extraQueryParams:_,extraTokenParams:w,request_type:r,response_mode:m,client_secret:this.settings.client_secret,skipUserInfo:o,nonce:a});await this.clearStaleState();const x=S.state;return await this.settings.stateStore.set(x.id,x.toStorageString()),S}async readSigninResponseState(e,t=!1){const n=this._logger.create("readSigninResponseState"),r=new En(gn.readParams(e,this.settings.response_mode));if(!r.state)throw n.throw(new Error("No state in response")),null;const i=await this.settings.stateStore[t?"remove":"get"](r.state);if(!i)throw n.throw(new Error("No matching state found in storage")),null;return{state:kn.fromStorageString(i),response:r}}async processSigninResponse(e){const t=this._logger.create("processSigninResponse"),{state:n,response:r}=await this.readSigninResponseState(e,!0);return t.debug("received state from storage; validating response"),await this._validator.validateSigninResponse(r,n),r}async useRefreshToken({state:e,timeoutInSeconds:t}){const n=this._logger.create("useRefreshToken"),r=await this._tokenClient.exchangeRefreshToken({refresh_token:e.refresh_token,scope:e.scope,timeoutInSeconds:t,refreshTokenCredentials:this.settings.refreshTokenCredentials}),i=new En(new URLSearchParams);return Object.assign(i,r),n.debug("validating response",i),await this._validator.validateRefreshResponse(i,e),i}async createSignoutRequest({state:e,id_token_hint:t,request_type:n,post_logout_redirect_uri:r=this.settings.post_logout_redirect_uri,extraQueryParams:i=this.settings.extraQueryParams}={}){const s=this._logger.create("createSignoutRequest"),o=await this.metadataService.getEndSessionEndpoint();if(!o)throw s.throw(new Error("No end session endpoint")),null;s.debug("Received end session endpoint",o);const a=new class{constructor({url:e,state_data:t,id_token_hint:n,post_logout_redirect_uri:r,extraQueryParams:i,request_type:s}){if(this._logger=new tn("SignoutRequest"),!e)throw this._logger.error("ctor: No url passed"),new Error("url");const o=new URL(e);n&&o.searchParams.append("id_token_hint",n),r&&(o.searchParams.append("post_logout_redirect_uri",r),t&&(this.state=new xn({data:t,request_type:s}),o.searchParams.append("state",this.state.id)));for(const[a,c]of Object.entries({...i}))null!=c&&o.searchParams.append(a,c.toString());this.url=o.href}}({url:o,id_token_hint:t,post_logout_redirect_uri:r,state_data:e,extraQueryParams:i,request_type:n});await this.clearStaleState();const c=a.state;return c&&(s.debug("Signout request has state to persist"),await this.settings.stateStore.set(c.id,c.toStorageString())),a}async readSignoutResponseState(e,t=!1){const n=this._logger.create("readSignoutResponseState"),r=new class{constructor(e){this.state=e.get("state"),this.error=e.get("error"),this.error_description=e.get("error_description"),this.error_uri=e.get("error_uri")}}(gn.readParams(e,this.settings.response_mode));if(!r.state){if(n.debug("No state in response"),r.error)throw n.warn("Response was error:",r.error),new fn(r);return{state:void 0,response:r}}const i=await this.settings.stateStore[t?"remove":"get"](r.state);if(!i)throw n.throw(new Error("No matching state found in storage")),null;return{state:xn.fromStorageString(i),response:r}}async processSignoutResponse(e){const t=this._logger.create("processSignoutResponse"),{state:n,response:r}=await this.readSignoutResponseState(e,!0);return n?(t.debug("Received state from storage; validating response"),this._validator.validateSignoutResponse(r,n)):t.debug("No state from storage; skipping response validation"),r}clearStaleState(){return this._logger.create("clearStaleState"),xn.clearStaleState(this.settings.stateStore,this.settings.staleStateAgeInSeconds)}async revokeToken(e,t){return this._logger.create("revokeToken"),await this._tokenClient.revoke({token:e,token_type_hint:t})}}(e),this._redirectNavigator=new class{constructor(e){this._settings=e,this._logger=new tn("RedirectNavigator")}async prepare({redirectMethod:e=this._settings.redirectMethod,redirectTarget:t=this._settings.redirectTarget}){var n;this._logger.create("prepare");let r=window.self;"top"===t&&(r=null!=(n=window.top)?n:window.self);const i=r.location[e].bind(r.location);let s;return{navigate:async e=>{this._logger.create("navigate");const t=new Promise(((e,t)=>{s=t}));return i(e.url),await t},close:()=>{this._logger.create("close"),null==s||s(new Error("Redirect aborted")),r.stop()}}}}(this.settings),this._popupNavigator=new class{constructor(e){this._settings=e,this._logger=new tn("PopupNavigator")}async prepare({popupWindowFeatures:e=this._settings.popupWindowFeatures,popupWindowTarget:t=this._settings.popupWindowTarget}){return new Mn({popupWindowFeatures:e,popupWindowTarget:t})}async callback(e,t=!1){this._logger.create("callback"),Mn.notifyOpener(e,t)}}(this.settings),this._iframeNavigator=new class{constructor(e){this._settings=e,this._logger=new tn("IFrameNavigator")}async prepare({silentRequestTimeoutInSeconds:e=this._settings.silentRequestTimeoutInSeconds}){return new Ln({silentRequestTimeoutInSeconds:e})}async callback(e){this._logger.create("callback"),Ln.notifyParent(e,this._settings.iframeNotifyParentOrigin)}}(this.settings),this._events=new class extends class{constructor(e){this._logger=new tn("AccessTokenEvents"),this._expiringTimer=new pn("Access token expiring"),this._expiredTimer=new pn("Access token expired"),this._expiringNotificationTimeInSeconds=e.expiringNotificationTimeInSeconds}load(e){const t=this._logger.create("load");if(e.access_token&&void 0!==e.expires_in){const n=e.expires_in;if(t.debug("access token present, remaining duration:",n),n>0){let e=n-this._expiringNotificationTimeInSeconds;e<=0&&(e=1),t.debug("registering expiring timer, raising in",e,"seconds"),this._expiringTimer.init(e)}else t.debug("canceling existing expiring timer because we're past expiration."),this._expiringTimer.cancel();const r=n+1;t.debug("registering expired timer, raising in",r,"seconds"),this._expiredTimer.init(r)}else this._expiringTimer.cancel(),this._expiredTimer.cancel()}unload(){this._logger.debug("unload: canceling existing access token timers"),this._expiringTimer.cancel(),this._expiredTimer.cancel()}addAccessTokenExpiring(e){return this._expiringTimer.addHandler(e)}removeAccessTokenExpiring(e){this._expiringTimer.removeHandler(e)}addAccessTokenExpired(e){return this._expiredTimer.addHandler(e)}removeAccessTokenExpired(e){this._expiredTimer.removeHandler(e)}}{constructor(e){super({expiringNotificationTimeInSeconds:e.accessTokenExpiringNotificationTimeInSeconds}),this._logger=new tn("UserManagerEvents"),this._userLoaded=new un("User loaded"),this._userUnloaded=new un("User unloaded"),this._silentRenewError=new un("Silent renew error"),this._userSignedIn=new un("User signed in"),this._userSignedOut=new un("User signed out"),this._userSessionChanged=new un("User session changed")}load(e,t=!0){super.load(e),t&&this._userLoaded.raise(e)}unload(){super.unload(),this._userUnloaded.raise()}addUserLoaded(e){return this._userLoaded.addHandler(e)}removeUserLoaded(e){return this._userLoaded.removeHandler(e)}addUserUnloaded(e){return this._userUnloaded.addHandler(e)}removeUserUnloaded(e){return this._userUnloaded.removeHandler(e)}addSilentRenewError(e){return this._silentRenewError.addHandler(e)}removeSilentRenewError(e){return this._silentRenewError.removeHandler(e)}_raiseSilentRenewError(e){this._silentRenewError.raise(e)}addUserSignedIn(e){return this._userSignedIn.addHandler(e)}removeUserSignedIn(e){this._userSignedIn.removeHandler(e)}_raiseUserSignedIn(){this._userSignedIn.raise()}addUserSignedOut(e){return this._userSignedOut.addHandler(e)}removeUserSignedOut(e){this._userSignedOut.removeHandler(e)}_raiseUserSignedOut(){this._userSignedOut.raise()}addUserSessionChanged(e){return this._userSessionChanged.addHandler(e)}removeUserSessionChanged(e){this._userSessionChanged.removeHandler(e)}_raiseUserSessionChanged(){this._userSessionChanged.raise()}}(this.settings),this._silentRenewService=new class{constructor(e){this._userManager=e,this._logger=new tn("SilentRenewService"),this._isStarted=!1,this._retryTimer=new pn("Retry Silent Renew"),this._tokenExpiring=async()=>{const e=this._logger.create("_tokenExpiring");try{await this._userManager.signinSilent(),e.debug("silent token renewal successful")}catch(t){if(t instanceof vn)return e.warn("ErrorTimeout from signinSilent:",t,"retry in 5s"),void this._retryTimer.init(5);e.error("Error from signinSilent:",t),this._userManager.events._raiseSilentRenewError(t)}}}async start(){const e=this._logger.create("start");if(!this._isStarted){this._isStarted=!0,this._userManager.events.addAccessTokenExpiring(this._tokenExpiring),this._retryTimer.addHandler(this._tokenExpiring);try{await this._userManager.getUser()}catch(t){e.error("getUser error",t)}}}stop(){this._isStarted&&(this._retryTimer.cancel(),this._retryTimer.removeHandler(this._tokenExpiring),this._userManager.events.removeAccessTokenExpiring(this._tokenExpiring),this._isStarted=!1)}}(this),this.settings.automaticSilentRenew&&this.startSilentRenew(),this._sessionMonitor=null,this.settings.monitorSession&&(this._sessionMonitor=new class{constructor(e){this._userManager=e,this._logger=new tn("SessionMonitor"),this._start=async e=>{const t=e.session_state;if(!t)return;const n=this._logger.create("_start");if(e.profile?(this._sub=e.profile.sub,this._sid=e.profile.sid,n.debug("session_state",t,", sub",this._sub)):(this._sub=void 0,this._sid=void 0,n.debug("session_state",t,", anonymous user")),this._checkSessionIFrame)this._checkSessionIFrame.start(t);else try{const e=await this._userManager.metadataService.getCheckSessionIframe();if(e){n.debug("initializing check session iframe");const r=this._userManager.settings.client_id,i=this._userManager.settings.checkSessionIntervalInSeconds,s=this._userManager.settings.stopCheckSessionOnError,o=new class{constructor(e,t,n,r,i){this._callback=e,this._client_id=t,this._intervalInSeconds=r,this._stopOnError=i,this._logger=new tn("CheckSessionIFrame"),this._timer=null,this._session_state=null,this._message=e=>{e.origin===this._frame_origin&&e.source===this._frame.contentWindow&&("error"===e.data?(this._logger.error("error message from check session op iframe"),this._stopOnError&&this.stop()):"changed"===e.data?(this._logger.debug("changed message from check session op iframe"),this.stop(),this._callback()):this._logger.debug(e.data+" message from check session op iframe"))};const s=new URL(n);this._frame_origin=s.origin,this._frame=window.document.createElement("iframe"),this._frame.style.visibility="hidden",this._frame.style.position="fixed",this._frame.style.left="-1000px",this._frame.style.top="0",this._frame.width="0",this._frame.height="0",this._frame.src=s.href}load(){return new Promise((e=>{this._frame.onload=()=>{e()},window.document.body.appendChild(this._frame),window.addEventListener("message",this._message,!1)}))}start(e){if(this._session_state===e)return;this._logger.create("start"),this.stop(),this._session_state=e;const t=()=>{this._frame.contentWindow&&this._session_state&&this._frame.contentWindow.postMessage(this._client_id+" "+this._session_state,this._frame_origin)};t(),this._timer=setInterval(t,1e3*this._intervalInSeconds)}stop(){this._logger.create("stop"),this._session_state=null,this._timer&&(clearInterval(this._timer),this._timer=null)}}(this._callback,r,e,i,s);await o.load(),this._checkSessionIFrame=o,o.start(t)}else n.warn("no check session iframe found in the metadata")}catch(r){n.error("Error from getCheckSessionIframe:",r instanceof Error?r.message:r)}},this._stop=()=>{const e=this._logger.create("_stop");if(this._sub=void 0,this._sid=void 0,this._checkSessionIFrame&&this._checkSessionIFrame.stop(),this._userManager.settings.monitorAnonymousSession){const t=setInterval((async()=>{clearInterval(t);try{const e=await this._userManager.querySessionStatus();if(e){const t={session_state:e.session_state,profile:e.sub&&e.sid?{sub:e.sub,sid:e.sid}:null};this._start(t)}}catch(n){e.error("error from querySessionStatus",n instanceof Error?n.message:n)}}),1e3)}},this._callback=async()=>{const e=this._logger.create("_callback");try{const t=await this._userManager.querySessionStatus();let n=!0;t&&this._checkSessionIFrame?t.sub===this._sub?(n=!1,this._checkSessionIFrame.start(t.session_state),t.sid===this._sid?e.debug("same sub still logged in at OP, restarting check session iframe; session_state",t.session_state):(e.debug("same sub still logged in at OP, session state has changed, restarting check session iframe; session_state",t.session_state),this._userManager.events._raiseUserSessionChanged())):e.debug("different subject signed into OP",t.sub):e.debug("subject no longer signed into OP"),n?this._sub?this._userManager.events._raiseUserSignedOut():this._userManager.events._raiseUserSignedIn():e.debug("no change in session detected, no event to raise")}catch(t){this._sub&&(e.debug("Error calling queryCurrentSigninSession; raising signed out event",t),this._userManager.events._raiseUserSignedOut())}},e||this._logger.throw(new Error("No user manager passed")),this._userManager.events.addUserLoaded(this._start),this._userManager.events.addUserUnloaded(this._stop),this._init().catch((e=>{this._logger.error(e)}))}async _init(){this._logger.create("_init");const e=await this._userManager.getUser();if(e)this._start(e);else if(this._userManager.settings.monitorAnonymousSession){const e=await this._userManager.querySessionStatus();if(e){const t={session_state:e.session_state,profile:e.sub&&e.sid?{sub:e.sub,sid:e.sid}:null};this._start(t)}}}}(this))}get events(){return this._events}get metadataService(){return this._client.metadataService}async getUser(){const e=this._logger.create("getUser"),t=await this._loadUser();return t?(e.info("user loaded"),this._events.load(t,!1),t):(e.info("user not found in storage"),null)}async removeUser(){const e=this._logger.create("removeUser");await this.storeUser(null),e.info("user removed from storage"),this._events.unload()}async signinRedirect(e={}){this._logger.create("signinRedirect");const{redirectMethod:t,...n}=e,r=await this._redirectNavigator.prepare({redirectMethod:t});await this._signinStart({request_type:"si:r",...n},r)}async signinRedirectCallback(e=window.location.href){const t=this._logger.create("signinRedirectCallback"),n=await this._signinEnd(e);return n.profile&&n.profile.sub?t.info("success, signed in subject",n.profile.sub):t.info("no subject"),n}async signinPopup(e={}){const t=this._logger.create("signinPopup"),{popupWindowFeatures:n,popupWindowTarget:r,...i}=e,s=this.settings.popup_redirect_uri;s||t.throw(new Error("No popup_redirect_uri configured"));const o=await this._popupNavigator.prepare({popupWindowFeatures:n,popupWindowTarget:r}),a=await this._signin({request_type:"si:p",redirect_uri:s,display:"popup",...i},o);return a&&(a.profile&&a.profile.sub?t.info("success, signed in subject",a.profile.sub):t.info("no subject")),a}async signinPopupCallback(e=window.location.href,t=!1){const n=this._logger.create("signinPopupCallback");await this._popupNavigator.callback(e,t),n.info("success")}async signinSilent(e={}){var t;const n=this._logger.create("signinSilent"),{silentRequestTimeoutInSeconds:r,...i}=e;let s=await this._loadUser();if(null==s?void 0:s.refresh_token){n.debug("using refresh token");const e=new class{constructor(e){this.refresh_token=e.refresh_token,this.id_token=e.id_token,this.session_state=e.session_state,this.scope=e.scope,this.data=e.state}}(s);return await this._useRefreshToken(e)}const o=this.settings.silent_redirect_uri;let a;o||n.throw(new Error("No silent_redirect_uri configured")),s&&this.settings.validateSubOnSilentRenew&&(n.debug("subject prior to silent renew:",s.profile.sub),a=s.profile.sub);const c=await this._iframeNavigator.prepare({silentRequestTimeoutInSeconds:r});return s=await this._signin({request_type:"si:s",redirect_uri:o,prompt:"none",id_token_hint:this.settings.includeIdTokenInSilentRenew?null==s?void 0:s.id_token:void 0,...i},c,a),s&&((null==(t=s.profile)?void 0:t.sub)?n.info("success, signed in subject",s.profile.sub):n.info("no subject")),s}async _useRefreshToken(e){const t=await this._client.useRefreshToken({state:e,timeoutInSeconds:this.settings.silentRequestTimeoutInSeconds}),n=new Rn({...e,...t});return await this.storeUser(n),this._events.load(n),n}async signinSilentCallback(e=window.location.href){const t=this._logger.create("signinSilentCallback");await this._iframeNavigator.callback(e),t.info("success")}async signinCallback(e=window.location.href){const{state:t}=await this._client.readSigninResponseState(e);switch(t.request_type){case"si:r":return await this.signinRedirectCallback(e);case"si:p":return await this.signinPopupCallback(e);case"si:s":return await this.signinSilentCallback(e);default:throw new Error("invalid response_type in state")}}async signoutCallback(e=window.location.href,t=!1){const{state:n}=await this._client.readSignoutResponseState(e);if(n)switch(n.request_type){case"so:r":await this.signoutRedirectCallback(e);break;case"so:p":await this.signoutPopupCallback(e,t);break;default:throw new Error("invalid response_type in state")}}async querySessionStatus(e={}){const t=this._logger.create("querySessionStatus"),{silentRequestTimeoutInSeconds:n,...r}=e,i=this.settings.silent_redirect_uri;i||t.throw(new Error("No silent_redirect_uri configured"));const s=await this._loadUser(),o=await this._iframeNavigator.prepare({silentRequestTimeoutInSeconds:n}),a=await this._signinStart({request_type:"si:s",redirect_uri:i,prompt:"none",id_token_hint:this.settings.includeIdTokenInSilentRenew?null==s?void 0:s.id_token:void 0,response_type:this.settings.query_status_response_type,scope:"openid",skipUserInfo:!0,...r},o);try{const e=await this._client.processSigninResponse(a.url);return t.debug("got signin response"),e.session_state&&e.profile.sub?(t.info("success for subject",e.profile.sub),{session_state:e.session_state,sub:e.profile.sub,sid:e.profile.sid}):(t.info("success, user not authenticated"),null)}catch(c){if(this.settings.monitorAnonymousSession&&c instanceof fn)switch(c.error){case"login_required":case"consent_required":case"interaction_required":case"account_selection_required":return t.info("success for anonymous user"),{session_state:c.session_state}}throw c}}async _signin(e,t,n){const r=await this._signinStart(e,t);return await this._signinEnd(r.url,n)}async _signinStart(e,t){const n=this._logger.create("_signinStart");try{const r=await this._client.createSigninRequest(e);return n.debug("got signin request"),await t.navigate({url:r.url,state:r.state.id,response_mode:r.state.response_mode,scriptOrigin:this.settings.iframeScriptOrigin})}catch(r){throw n.debug("error after preparing navigator, closing navigator window"),t.close(),r}}async _signinEnd(e,t){const n=this._logger.create("_signinEnd"),r=await this._client.processSigninResponse(e);n.debug("got signin response");const i=new Rn(r);if(t){if(t!==i.profile.sub)throw n.debug("current user does not match user returned from signin. sub from signin:",i.profile.sub),new fn({...r,error:"login_required"});n.debug("current user matches user returned from signin")}return await this.storeUser(i),n.debug("user stored"),this._events.load(i),i}async signoutRedirect(e={}){const t=this._logger.create("signoutRedirect"),{redirectMethod:n,...r}=e,i=await this._redirectNavigator.prepare({redirectMethod:n});await this._signoutStart({request_type:"so:r",post_logout_redirect_uri:this.settings.post_logout_redirect_uri,...r},i),t.info("success")}async signoutRedirectCallback(e=window.location.href){const t=this._logger.create("signoutRedirectCallback"),n=await this._signoutEnd(e);return t.info("success"),n}async signoutPopup(e={}){const t=this._logger.create("signoutPopup"),{popupWindowFeatures:n,popupWindowTarget:r,...i}=e,s=this.settings.popup_post_logout_redirect_uri,o=await this._popupNavigator.prepare({popupWindowFeatures:n,popupWindowTarget:r});await this._signout({request_type:"so:p",post_logout_redirect_uri:s,state:null==s?void 0:{},...i},o),t.info("success")}async signoutPopupCallback(e=window.location.href,t=!1){const n=this._logger.create("signoutPopupCallback");await this._popupNavigator.callback(e,t),n.info("success")}async _signout(e,t){const n=await this._signoutStart(e,t);return await this._signoutEnd(n.url)}async _signoutStart(e={},t){var n;const r=this._logger.create("_signoutStart");try{const i=await this._loadUser();r.debug("loaded current user from storage"),this.settings.revokeTokensOnSignout&&await this._revokeInternal(i);const s=e.id_token_hint||i&&i.id_token;s&&(r.debug("setting id_token_hint in signout request"),e.id_token_hint=s),await this.removeUser(),r.debug("user removed, creating signout request");const o=await this._client.createSignoutRequest(e);return r.debug("got signout request"),await t.navigate({url:o.url,state:null==(n=o.state)?void 0:n.id})}catch(i){throw r.debug("error after preparing navigator, closing navigator window"),t.close(),i}}async _signoutEnd(e){const t=this._logger.create("_signoutEnd"),n=await this._client.processSignoutResponse(e);return t.debug("got signout response"),n}async revokeTokens(e){const t=await this._loadUser();await this._revokeInternal(t,e)}async _revokeInternal(e,t=this.settings.revokeTokenTypes){const n=this._logger.create("_revokeInternal");if(!e)return;const r=t.filter((t=>"string"==typeof e[t]));if(r.length){for(const t of r)await this._client.revokeToken(e[t],t),n.info(`${t} revoked successfully`),"access_token"!==t&&(e[t]=null);await this.storeUser(e),n.debug("user stored"),this._events.load(e)}else n.debug("no need to revoke due to no token(s)")}startSilentRenew(){this._logger.create("startSilentRenew"),this._silentRenewService.start()}stopSilentRenew(){this._silentRenewService.stop()}get _userStoreKey(){return`user:${this.settings.authority}:${this.settings.client_id}`}async _loadUser(){const e=this._logger.create("_loadUser"),t=await this.settings.userStore.get(this._userStoreKey);return t?(e.debug("user storageString loaded"),Rn.fromStorageString(t)):(e.debug("no user storageString"),null)}async storeUser(e){const t=this._logger.create("storeUser");if(e){t.debug("storing user");const n=e.toStorageString();await this.settings.userStore.set(this._userStoreKey,n)}else this._logger.debug("removing user"),await this.settings.userStore.remove(this._userStoreKey)}async clearStaleState(){await this._client.clearStaleState()}}{constructor(e){super(Object.assign({authority:e.authorityUrl,client_id:e.clientId,scope:e.scope,loadUserInfo:e.loadUserInfo,automaticSilentRenew:e.automaticSilentRenew},e.internal)),this.libSettings=e,this._mobileNavigator=void 0,this._mobileNavigator=new Zn(this.settings)}async signoutMobile(e={}){const t=this._logger.create("signout"),{name:n}=e,r=Wn(e,er),i=this._mobileNavigator.prepare({name:n},this.settings.post_logout_redirect_uri);await this._signout(Object.assign({request_type:"so:m",post_logout_redirect_uri:this.settings.post_logout_redirect_uri},r),i),t.info("success")}async signinMobile(e={}){var t;const n=this._logger.create("signin"),{name:r}=e,i=Wn(e,tr),s=this._mobileNavigator.prepare({name:r},this.settings.redirect_uri),o=await this._signin(Object.assign({request_type:"si:m",redirect_uri:this.settings.redirect_uri},i),s);null!=o&&null!=(t=o.profile)&&t.sub?n.info("success, signed in subject",o.profile.sub):n.info("no subject")}}const rr="auth-js:oidc_manager:redirect_url",ir={loginRequired:!1,retrieveUserSession:!0,loadUserInfo:!1,automaticSilentRenew:!0,navigationType:Dn.REDIRECT,scope:"openid profile email phone",logLevel:en.NONE,internal:{response_type:"code",redirect_uri:"?oidc-callback=login",post_logout_redirect_uri:"?oidc-callback=logout",popup_redirect_uri:"oidc/callback/popup_redirect.html",popup_post_logout_redirect_uri:"oidc/callback/popup_redirect.html",silent_redirect_uri:"oidc/callback/silent_redirect.html"}};class sr extends class{}{constructor(...e){super(...e),this.idTokenSubs=new Nn,this.accessTokenSubs=new Nn,this.userProfileSubs=new Nn,this.userSessionSubs=new Nn,this.authenticatedSubs=new Nn,this.renewingSubs=new Nn,this.redirectSubs=new Nn,this.userManagerSubs=[],this._idToken=void 0,this._accessToken=void 0,this._userProfile=void 0,this._userSession=void 0,this._isAuthenticated=void 0,this._isRenewing=!1,this.userManager=void 0,this.settings=ir,this._user=void 0}set user(e){this._user!==e&&(this._user=e,this._idToken=e?e.id_token:void 0,this._accessToken=e?e.access_token:void 0,this._userProfile=null!=e&&e.profile?e.profile:void 0,this._userSession=e?zn.deserialize(e):void 0,this._isAuthenticated=!(!e||e.expired),this.idTokenSubs.notify(this._idToken),this.accessTokenSubs.notify(this._accessToken),this.userProfileSubs.notify(this._userProfile),this.userSessionSubs.notify(this._userSession),this.authenticatedSubs.notify(this._isAuthenticated))}async init(e){var t,n,r,i,s,o,a,l=this;en.setLevel(e.logLevel||ir.logLevel||en.NONE),en.setLogger(console);const u=c.isNativeMobile(),d=u?`${e.mobileScheme}://localhost/`:c.getBaseUrl();if(this.settings=Wt({},ir,{internal:{userStore:new wn({store:u?new Fn:new mn}),redirect_uri:`${d}${null==(t=ir.internal)?void 0:t.redirect_uri}`,post_logout_redirect_uri:`${d}${null==(n=ir.internal)?void 0:n.post_logout_redirect_uri}`,popup_redirect_uri:`${d}${null==(r=ir.internal)?void 0:r.popup_redirect_uri}`,popup_post_logout_redirect_uri:`${d}${null==(i=ir.internal)?void 0:i.popup_post_logout_redirect_uri}`,silent_redirect_uri:`${d}${null==(s=ir.internal)?void 0:s.silent_redirect_uri}`}},e),this.patchAuth0Logout(),this.userManager=new nr(this.settings),this.userManagerSubs.push(this.userManager.events.addUserLoaded((e=>{this.user=e})),this.userManager.events.addUserUnloaded((()=>{this.user=null})),this.userManager.events.addSilentRenewError((async function(){await l.removeUser()}))),this.assertNotInInceptionLoop(),c.isUrlMatching(location.href,null==(o=this.settings.internal)?void 0:o.redirect_uri))await this.runSyncOrAsync((()=>this.backFromSigninRedirect()));else if(c.isUrlMatching(location.href,null==(a=this.settings.internal)?void 0:a.post_logout_redirect_uri))await this.runSyncOrAsync((()=>this.backFromSignoutRedirect()));else if(this.settings.retrieveUserSession||this.settings.loginRequired){var h;const e=async function(){await l.runSyncOrAsync((()=>l.signinSilent().catch((async function(e){if(l.settings.loginRequired){const{error:t,message:n}=e;if(![t,n].includes("_required"))throw e;await l.login()}else l.authenticatedSubs.notify(!1)}))))},t=await(null==(h=this.userManager)?void 0:h.getUser());!t||t.expired?!u&&this.settings.retrieveUserSession?await e():this.settings.loginRequired?await this.login():this.authenticatedSubs.notify(!1):this.user=t}else this.authenticatedSubs.notify(!1)}async logout(e=location.href,t){var n,r,i;if(c.isNativeMobile())await(null==(i=this.userManager)?void 0:i.signoutMobile()),await this.redirect(e),this.postLogoutVerification(e);else switch(t||this.settings.navigationType){case Dn.POPUP:await(null==(n=this.userManager)?void 0:n.signoutPopup()),await this.redirect(e);break;case Dn.REDIRECT:default:sessionStorage.setItem(rr,e),await(null==(r=this.userManager)?void 0:r.signoutRedirect())}}async login(e=location.href,t){var n,r,i;if(c.isNativeMobile())this.notifyRenew(!0),await(null==(i=this.userManager)?void 0:i.signinMobile().finally((()=>this.notifyRenew(!1)))),await this.redirect(e);else switch(t||this.settings.navigationType){case Dn.POPUP:this.notifyRenew(!0),await(null==(n=this.userManager)?void 0:n.signinPopup().catch((e=>{var t;throw"Attempted to navigate on a disposed window"===(null==(t=e)?void 0:t.message)&&((e=new Error("[OIDCAuthManager] Attempted to navigate on a disposed window.")).stack=void 0,e.message+="\n\n\u24d8 This may be due to an ad blocker."),e})).finally((()=>this.notifyRenew(!1)))),await this.redirect(e);break;case Dn.REDIRECT:default:sessionStorage.setItem(rr,e),await(null==(r=this.userManager)?void 0:r.signinRedirect())}return!0===this._isAuthenticated}async renew(){return this.signinSilent().catch((e=>console.error(e)))}getSettings(){return this.settings}isRenewing(){return this._isRenewing}async isAuthenticated(){return await this.waitForRenew("isAuthenticated()"),this._isAuthenticated}async getUserProfile(){return await this.waitForRenew("getUserProfile()"),this._userProfile}async getUserSession(){return await this.waitForRenew("getUserSession()"),this._userSession}async getIdToken(){return await this.waitForRenew("getIdToken()"),this._idToken}async getIdTokenDecoded(){return await this.waitForRenew("getIdTokenDecoded()"),c.decodeJwt(this._idToken)}async getAccessToken(){return await this.waitForRenew("getAccessToken()"),this._accessToken}async getAccessTokenDecoded(){return await this.waitForRenew("getAccessTokenDecoded()"),c.decodeJwt(this._accessToken)}destroy(){this.idTokenSubs.unsubscribe(),this.accessTokenSubs.unsubscribe(),this.userProfileSubs.unsubscribe(),this.userSessionSubs.unsubscribe(),this.authenticatedSubs.unsubscribe(),this.renewingSubs.unsubscribe(),this.redirectSubs.unsubscribe(),this.userManagerSubs.forEach((e=>e()))}onIdTokenChanged(e){return this.idTokenSubs.add(e)}onAccessTokenChanged(e){return this.accessTokenSubs.add(e)}onUserProfileChanged(e){return this.userProfileSubs.add(e)}onUserSessionChanged(e){return this.userSessionSubs.add(e)}onAuthenticatedChanged(e){return this.authenticatedSubs.add(e)}onRenewingChanged(e){return this.renewingSubs.add(e)}onRedirect(e){return this.redirectSubs.add(e)}assertNotInInceptionLoop(){var e,t;[null==(e=this.settings.internal)?void 0:e.silent_redirect_uri,null==(t=this.settings.internal)?void 0:t.popup_redirect_uri].forEach((e=>{var t;const n=null==(t=new RegExp(/^.*\/(.*).html$/gm).exec(e||""))?void 0:t[1],r=new Error(`[OIDCAuthManager] ${e||"redirect uri"} was not found.`);if(r.stack=void 0,c.isUrlMatching(location.href,e))throw r.message+="\n\n\u24d8 This usually means you forgot to include the redirect html files in your application assets.",r;if(location.href.includes(`/${n}.html`))throw r.message+="\n\n\u24d8 This usually means your redirect urls are misconfigured.",r}))}async waitForRenew(e){const t=Date.now();for(;this._isRenewing;){if(Date.now()>t+5e3){console.warn("[@badisi/auth-js]",`\`${e}\``,"timed out waiting for renew to finish.");break}await new Promise((e=>setTimeout(e,100)))}}postLogoutVerification(e){const t=c.stringToURL(e||"/");this.settings.loginRequired&&location.origin===t.origin&&location.reload()}notifyRenew(e){this._isRenewing=e,this.renewingSubs.notify(e)}async runSyncOrAsync(e){this.settings.loginRequired?await e():e()}async redirect(e,t){t&&(console.error(t),await this.removeUser());const n=c.stringToURL(e||"/");location.origin===n.origin?(history.replaceState(history.state,"",n.href),this.redirectSubs.notify(n)):location.href=n.href}async removeUser(){var e,t;this.user=null,await Promise.all([null==(e=this.userManager)?void 0:e.clearStaleState(),null==(t=this.userManager)?void 0:t.removeUser()])}async signinSilent(){this.notifyRenew(!0);try{var e;await(null==(e=this.userManager)?void 0:e.signinSilent())}catch(t){throw await this.removeUser(),t}finally{this.notifyRenew(!1)}}async backFromSigninRedirect(){try{var e;await(null==(e=this.userManager)?void 0:e.signinRedirectCallback(location.href)),await this.redirect(sessionStorage.getItem(rr))}catch(t){await this.redirect("/",t)}finally{sessionStorage.removeItem(rr)}}async backFromSignoutRedirect(){let e=sessionStorage.getItem(rr);try{var t;await(null==(t=this.userManager)?void 0:t.signoutRedirectCallback(location.href)),await this.redirect(e),await this.removeUser()}catch(n){e="/",await this.redirect(e,n)}finally{sessionStorage.removeItem(rr),this.postLogoutVerification(e)}}patchAuth0Logout(){if(this.settings.authorityUrl.endsWith("auth0.com")){var e,t;const{authorityUrl:n,clientId:r,navigationType:i}=this.settings,s=i===Dn.POPUP?null==(e=this.settings.internal)?void 0:e.popup_post_logout_redirect_uri:null==(t=this.settings.internal)?void 0:t.post_logout_redirect_uri;this.settings.internal=Wt({},{metadataSeed:{end_session_endpoint:`${n}/v2/logout?client_id=${r}&returnTo=${s}`}},this.settings.internal)}}}n(9544);const or=(e=>e.CapacitorPlatforms=(e=>{const t=new Map;t.set("web",{name:"web"});const n=e.CapacitorPlatforms||{currentPlatform:{name:"web"},platforms:t};return n.addPlatform=(e,t)=>{n.platforms.set(e,t)},n.setPlatform=e=>{n.platforms.has(e)&&(n.currentPlatform=n.platforms.get(e))},n})(e))("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{});or.addPlatform,or.setPlatform;var ar;!function(e){e.Unimplemented="UNIMPLEMENTED",e.Unavailable="UNAVAILABLE"}(ar||(ar={}));class cr extends Error{constructor(e,t,n){super(e),this.message=e,this.code=t,this.data=n}}const lr=e=>{var t,n,r,i,s;const o=e.CapacitorCustomPlatform||null,a=e.Capacitor||{},c=a.Plugins=a.Plugins||{},l=e.CapacitorPlatforms,u=(null===(t=null==l?void 0:l.currentPlatform)||void 0===t?void 0:t.getPlatform)||(()=>null!==o?o.name:(e=>{var t,n;return(null==e?void 0:e.androidBridge)?"android":(null===(n=null===(t=null==e?void 0:e.webkit)||void 0===t?void 0:t.messageHandlers)||void 0===n?void 0:n.bridge)?"ios":"web"})(e)),d=(null===(n=null==l?void 0:l.currentPlatform)||void 0===n?void 0:n.isNativePlatform)||(()=>"web"!==u()),h=(null===(r=null==l?void 0:l.currentPlatform)||void 0===r?void 0:r.isPluginAvailable)||(e=>{const t=g.get(e);return!!(null==t?void 0:t.platforms.has(u()))||!!p(e)}),p=(null===(i=null==l?void 0:l.currentPlatform)||void 0===i?void 0:i.getPluginHeader)||(e=>{var t;return null===(t=a.PluginHeaders)||void 0===t?void 0:t.find((t=>t.name===e))}),g=new Map,f=(null===(s=null==l?void 0:l.currentPlatform)||void 0===s?void 0:s.registerPlugin)||((e,t={})=>{const n=g.get(e);if(n)return console.warn(`Capacitor plugin "${e}" already registered. Cannot register plugins twice.`),n.proxy;const r=u(),i=p(e);let s;const l=n=>{let c;const l=(...l)=>{const u=(async()=>(!s&&r in t?s=s="function"==typeof t[r]?await t[r]():t[r]:null!==o&&!s&&"web"in t&&(s=s="function"==typeof t.web?await t.web():t.web),s))().then((t=>{const s=((t,n)=>{var s,o;if(!i){if(t)return null===(o=t[n])||void 0===o?void 0:o.bind(t);throw new cr(`"${e}" plugin is not implemented on ${r}`,ar.Unimplemented)}{const r=null==i?void 0:i.methods.find((e=>n===e.name));if(r)return"promise"===r.rtype?t=>a.nativePromise(e,n.toString(),t):(t,r)=>a.nativeCallback(e,n.toString(),t,r);if(t)return null===(s=t[n])||void 0===s?void 0:s.bind(t)}})(t,n);if(s){const e=s(...l);return c=null==e?void 0:e.remove,e}throw new cr(`"${e}.${n}()" is not implemented on ${r}`,ar.Unimplemented)}));return"addListener"===n&&(u.remove=async()=>c()),u};return l.toString=()=>`${n.toString()}() { [capacitor code] }`,Object.defineProperty(l,"name",{value:n,writable:!1,configurable:!1}),l},d=l("addListener"),h=l("removeListener"),f=(e,t)=>{const n=d({eventName:e},t),r=async()=>{const r=await n;h({eventName:e,callbackId:r},t)},i=new Promise((e=>n.then((()=>e({remove:r})))));return i.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await r()},i},v=new Proxy({},{get(e,t){switch(t){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return i?f:d;case"removeListener":return h;default:return l(t)}}});return c[e]=v,g.set(e,{name:e,proxy:v,platforms:new Set([...Object.keys(t),...i?[r]:[]])}),v});return a.convertFileSrc||(a.convertFileSrc=e=>e),a.getPlatform=u,a.handleError=t=>e.console.error(t),a.isNativePlatform=d,a.isPluginAvailable=h,a.pluginMethodNoop=(e,t,n)=>Promise.reject(`${n} does not have an implementation of "${t}".`),a.registerPlugin=f,a.Exception=cr,a.DEBUG=!!a.DEBUG,a.isLoggingEnabled=!!a.isLoggingEnabled,a.platform=a.getPlatform(),a.isNative=a.isNativePlatform(),a},ur=(e=>e.Capacitor=lr(e))("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{});ur.registerPlugin,ur.Plugins;const dr='\n    .flex {\n        flex: 1;\n    }\n\n    .hidden {\n        display: none !important;\n    }\n\n    .row {\n        display: flex;\n        flex-direction: row;\n    }\n\n    .column {\n        display: flex;\n        flex-direction: column;\n    }\n\n    .card {\n        border: 1px solid rgba(0, 0, 0, 0.12);\n        border-radius: 4px;\n        background-color: white;\n        margin: 12px 6px;\n    }\n\n    .card .card-status {\n        display: block;\n        width: 10px;\n        height: 10px;\n        border-radius: 50%;\n        margin-left: 8px;\n        background-color: #f2f2f2;\n    }\n    .card .card-status.error {\n        background-color: #ef5350;\n    }\n    .card .card-status.success {\n        background-color: #66bb6a;\n    }\n\n    .card .card-title {\n        padding: 16px;\n        font-size: 20px;\n        font-weight: 500;\n        color: rgba(0, 0, 0, 0.87);\n        align-items: center;\n    }\n\n    .card .box {\n        height: 200px;\n        border-top: 1px solid lightgray;\n        word-break: break-all;\n        overflow: auto;\n        background-color: #f2f2f2;\n        padding: 12px;\n    }\n    .card .box pre {\n        margin: 0;\n    }\n\n    .card .card-actions {\n        padding: 0 14px 8px 14px;\n        min-height: 50px;\n    }\n    .card .card-actions .input {\n        display: flex;\n        align-items: center;\n    }\n    .card .card-actions .input:not(:last-child) {\n        margin-bottom: 8px;\n    }\n    .card .card-actions .input label {\n        width: 125px;\n        text-align: right;\n        margin-right: 14px;\n    }\n    .card .card-actions .input input {\n        padding: 4px;\n    }\n\n    .json-key {\n        color: rgb(124, 77, 255);\n    }\n\n    .json-value {\n        color: rgb(67, 122, 237);\n    }\n\n    .json-string {\n        color: rgb(83, 160, 83);\n    }\n\n    .json-date {\n        color: rgb(200, 56, 198);\n    }\n\n    input {\n        color: #5e35b1;\n        padding: 10px;\n        border: 1px solid #0000001f;\n        border-radius: 4px;\n        font-size: 14px;\n    }\n\n    input:invalid {\n        border-color: #f44336;\n    }\n\n    input[type="checkbox"] {\n        margin-right: 10px;\n    }\n\n    select {\n        color: #5e35b1;\n        padding: 8px 6px;\n        border: 1px solid #0000001f;\n        border-radius: 4px;\n    }\n\n    @media only screen and (max-width: 600px) {\n        :host {\n            padding: 0 !important;\n            padding-bottom: 24px !important;\n        }\n\n        :host .card {\n            border: 0;\n            margin: 0;\n            margin-bottom: 6px;\n        }\n    }\n',hr=(e,t=[])=>e?JSON.stringify(e,null,2).replace(/&/g,"&amp;").replace(/\\"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/^( *)("[\w-]+": )?("[^"]*"|[\w.+-]*)?([,[{])?$/gm,((e,n,r,i,s)=>{let o=n||"";const a=r?r.replace(/[": ]/g,""):void 0;if(a&&(o+=`<span class="json-key">${a}</span>: `),i&&(o+=`<span class="${i.startsWith('"')?"json-string":"json-value"}">${i}</span>`,a&&t.includes(a))){const e=new Date(1e3*Number(i)),t=`${e.toDateString()}, ${e.toLocaleTimeString()}`;t&&(o+=` <span class="json-date">(${t})</span>`)}return o+(s||"")})):"",pr=document.createElement("template");pr.innerHTML=`\n    <style>\n        ${dr}\n\n        :host header {\n            z-index: 1;\n            position: fixed;\n            top: 0;\n            left: 0;\n            right: 0;\n            padding-top: calc(0px + var(--safe-area-inset-top));\n            align-items: center;\n            height: 130px;\n            color: white;\n            background: rgb(103, 58, 183);\n            background: linear-gradient(180deg, rgba(103, 58, 183, 1) 0%, rgba(94, 53, 177, 1) 100%);\n        }\n\n        :host header .github-icon {\n            position: absolute;\n            top: calc(20px + var(--safe-area-inset-top));\n            right: 34px;\n            width: 26px;\n            height: 26px;\n            color: white;\n        }\n\n        @keyframes statusLoadingAnimation {\n            0% { transform: rotate(0deg); }\n            100% { transform: rotate(360deg); }\n        }\n\n        :host header .status.loading {\n            background: none;\n        }\n\n        :host header .status.loading:after {\n            display: block;\n            content: " ";\n            width: 11px;\n            height: 11px;\n            border-radius: 50%;\n            border: 2px solid #fff;\n            border-color: #fff transparent #fff transparent;\n            animation: statusLoadingAnimation 1.2s linear infinite;\n        }\n\n        :host header .status.not-authenticated {\n            background-color: #EC407A;\n        }\n\n        :host header .status.authenticated {\n            background-color: #7CB342;\n        }\n\n        :host header .status {\n            position: absolute;\n            top: calc(25px + var(--safe-area-inset-top));\n            right: 70px;\n            width: 15px;\n            height: 15px;\n            z-index: 1;\n            border-radius: 50%;\n            margin-top: 1px;\n            margin-right: 8px;\n        }\n\n        :host header .version {\n            position: absolute;\n            bottom: 13px;\n        }\n\n        :host header .version a {\n            font-size: 13px;\n            font-weight: 300;\n            font-style: italic;\n            text-decoration: none;\n            color: #bda9e1;\n        }\n\n        :host header .version a:hover {\n            text-decoration: underline;\n        }\n\n        :host header .title {\n            position: relative;\n            align-items: center;\n            margin: 8px 0;\n            font-size: 1.4em;\n            font-weight: 400;\n            color: #ede7f6;\n        }\n\n        :host header .title .icon {\n            margin-top: 3px;\n            margin-right: 4px;\n        }\n\n        :host header .title select {\n            cursor: pointer;\n            text-align: center;\n            font-size: 1.1em;\n            font-weight: bold;\n            color: #ede7f6;\n            background: none;\n            border: none;\n            outline: none;\n        }\n\n        :host header .title .tip {\n            position: absolute;\n            right: -204px;\n            font-size: 15px;\n            font-weight: 300;\n            font-style: italic;\n            color: #ffd341;\n        }\n\n        :host header .title .tip .hand {\n            font-size: 18px;\n        }\n\n        :host header button {\n            margin-top: 2px;\n        }\n\n        :host header button:not(:last-child) {\n            margin-right: 10px;\n        }\n\n        @media only screen and (max-width: 600px) {\n            :host header .title {\n                align-self: flex-start;\n                margin-left: 18px;\n            }\n\n            :host header .status {\n                right: 54px;\n            }\n\n            :host header .github-icon {\n                right: 24px;\n            }\n        }\n        @media only screen and (max-width: 1000px) {\n            :host header .title .tip {\n                display: none;\n            }\n        }\n    </style>\n\n    <header class="column">\n        <div class="status loading"></div>\n\n        <a class="github-icon"\n            href="https://github.com/Badisi/auth-js"\n            target="_blank"\n            title="View it on GitHub"\n            aria-label="GitHub repository">\n            <span>\n                <svg viewBox="0 0 24 24"\n                    xmlns="http://www.w3.org/2000/svg">\n                    <path fill="currentColor"\n                        d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12">\n                    </path>\n                </svg>\n            </span>\n        </a>\n\n        <div class="title row">\n            <span class="icon">\ud83d\udee1\ufe0f</span>Demo app &#123; <select id="implementation-select"></select> &#125;\n            <div class="tip"><span class="hand">\ud83d\udc48</span> choose an implementation</div>\n        </div>\n\n        <div class="version"></div>\n\n        <div class="row">\n            <button id="login-button">LOGIN</button>\n            <button id="logout-button">LOGOUT</button>\n            <button id="silent-renew-button">SILENT RENEW</button>\n        </div>\n    </header>\n`;class gr extends HTMLElement{constructor(){var e,t,n,r,i,s,o;super(),this.listeners=[],this.implSelectEl=void 0,this.statusEl=void 0,this.versionEl=void 0,this.loginButtonEl=void 0,this.logoutButtonEl=void 0,this.silentRenewButtonEl=void 0,this.attachShadow({mode:"open"}),null==(e=this.shadowRoot)||e.appendChild(document.importNode(pr.content,!0)),this.implSelectEl=null==(t=this.shadowRoot)?void 0:t.querySelector("#implementation-select"),this.statusEl=null==(n=this.shadowRoot)?void 0:n.querySelector(".status"),this.versionEl=null==(r=this.shadowRoot)?void 0:r.querySelector(".version"),this.loginButtonEl=null==(i=this.shadowRoot)?void 0:i.querySelector("#login-button"),this.logoutButtonEl=null==(s=this.shadowRoot)?void 0:s.querySelector("#logout-button"),this.silentRenewButtonEl=null==(o=this.shadowRoot)?void 0:o.querySelector("#silent-renew-button")}set isRenewing(e){this.statusEl&&this.statusEl.classList[e?"add":"remove"]("loading")}set isAuthenticated(e){this.statusEl&&null!==e&&(this.statusEl.classList.remove("loading"),this.statusEl.title=e?"Authenticated":"Not authenticated",this.statusEl.classList[e?"add":"remove"]("authenticated"),this.statusEl.classList[e?"remove":"add"]("not-authenticated"))}connectedCallback(){if(window.location.href.includes("localhost")){const e=document.createElement("option");e.textContent="localhost",this.implSelectEl.appendChild(e)}else{window.appSettings.getImplementations().forEach((e=>{const t=document.createElement("option");t.value=String(e.label),t.textContent=e.label,this.implSelectEl.appendChild(t)}));const e=()=>{window.location.href=window.appSettings.getImplementations()[this.implSelectEl.selectedIndex].demoUrl};this.implSelectEl.addEventListener("change",e),this.listeners.push((()=>this.implSelectEl.removeEventListener("change",e)))}const e=()=>{var e,t;null==(e=this.shadowRoot)||null==(t=e.querySelector("header .title .tip"))||t.remove(),window.appSettings.setShowTip(!1)};window.appSettings.get().showTip?(this.implSelectEl.addEventListener("click",e,{once:!0}),this.listeners.push((()=>this.implSelectEl.removeEventListener("click",e)))):e(),this.refreshImplementation(),this.addEventListeners()}disconnectedCallback(){this.listeners.forEach((e=>e()))}addEventListeners(){var e,t,n;const r=()=>this.dispatchEvent(new Event("login",{bubbles:!0,composed:!0}));null==(e=this.loginButtonEl)||e.addEventListener("click",r);const i=()=>this.dispatchEvent(new Event("logout",{bubbles:!0,composed:!0}));null==(t=this.logoutButtonEl)||t.addEventListener("click",i);const s=()=>this.dispatchEvent(new Event("silentRenew",{bubbles:!0,composed:!0}));null==(n=this.silentRenewButtonEl)||n.addEventListener("click",s),this.listeners.push((()=>{var e;return null==(e=this.loginButtonEl)?void 0:e.removeEventListener("click",r)}),(()=>{var e;return null==(e=this.logoutButtonEl)?void 0:e.removeEventListener("click",i)}),(()=>{var e;return null==(e=this.silentRenewButtonEl)?void 0:e.removeEventListener("click",s)}))}refreshImplementation(){const e=window.appSettings.getImplementations();if(window.location.href.includes("localhost"))this.implSelectEl.selectedIndex=0,this.versionEl.innerHTML="<a>@localhost</a>";else{const t=e.findIndex((e=>window.location.href.includes(e.demoUrl))),n=-1!==t?e[t]:e[0];this.implSelectEl.selectedIndex=-1!==t?t:0,this.versionEl.innerHTML=n.version}}}window.customElements.define("demo-app-header",gr);const fr=document.createElement("template");fr.innerHTML=`\n    <style>\n        ${dr}\n\n        :host .tabs {\n            position: fixed;\n            top: calc(130px + var(--safe-area-inset-top));\n            left: 0;\n            right: 0;\n            z-index: 1;\n            align-self: normal;\n            padding: 10px 0;\n            padding-left: 36px;\n            background-color: #7043bf;\n            box-shadow: 0 3px 5px -1px #0003, 0 6px 10px #00000024, 0 1px 18px #0000001f;\n        }\n\n        :host .tabs a {\n            cursor: pointer;\n            color: white;\n            padding: 8px 16px;\n            border-radius: 4px;\n            transition: background-color 150ms cubic-bezier(0.35, 0, 0.25, 1);\n        }\n\n        :host .tabs a.selected {\n            background-color: #512da8;\n        }\n\n        :host .tabs a:hover {\n            background-color: #4527a0;\n        }\n\n        :host .tabs a:not(:last-child) {\n            margin-right: 10px;\n        }\n\n        :host .tabs-content {\n            position: fixed;\n            top: calc(130px + 55px + var(--safe-area-inset-top));\n            left: 0;\n            right: 0;\n            bottom: calc(0px + var(--safe-area-inset-bottom));\n            overflow: auto;\n        }\n\n        @media only screen and (max-width: 600px) {\n            :host .tabs {\n                padding-left: 0;\n                justify-content: center;\n            }\n        }\n    </style>\n\n    <demo-app-header></demo-app-header>\n    <nav id="tabs" class="tabs row"></nav>\n    <div class="tabs-content">\n        <slot id="views"></slot>\n    </div>\n`;class vr extends HTMLElement{constructor(){var e,t,n;super(),this.listeners=[],this.tabsContentEl=void 0,this.demoAppHeaderEl=void 0,this.tabs=[],this.views=[],this.currentTabIndex=-1,this.attachShadow({mode:"open"}),null==(e=this.shadowRoot)||e.appendChild(document.importNode(fr.content,!0)),this.tabsContentEl=null==(t=this.shadowRoot)?void 0:t.querySelector(".tabs-content"),this.demoAppHeaderEl=null==(n=this.shadowRoot)?void 0:n.querySelector("demo-app-header")}set isRenewing(e){this.demoAppHeaderEl.isRenewing=e}set isAuthenticated(e){this.demoAppHeaderEl.isAuthenticated=e}connectedCallback(){this.drawTabs(),this.showView(window.appSettings?window.appSettings.get().currentTabIndex:0)}disconnectedCallback(){this.listeners.forEach((e=>e()))}drawTabs(){var e,t;const n=null==(e=this.shadowRoot)?void 0:e.querySelector("#views"),r=null==(t=this.shadowRoot)?void 0:t.querySelector("#tabs");n&&r&&(this.views=n.assignedElements(),this.views.forEach(((e,t)=>{e.style.display="none";const n=document.createElement("a");n.textContent=e.getAttribute("tabLabel")||"?";const i=()=>this.showView(t);n.addEventListener("click",i),this.listeners.push((()=>n.removeEventListener("click",i))),r.appendChild(n),this.tabs.push(n)})))}showView(e){var t;this.currentTabIndex!==e&&(this.currentTabIndex=e,this.tabs.forEach(((t,n)=>{t.classList[n!==e?"remove":"add"]("selected")})),this.views.forEach(((t,n)=>{t.style.display=n!==e?"none":"flex"})),null==(t=this.tabsContentEl)||t.scrollTo(0,0),window.appSettings.setCurrentTabIndex(e))}}window.customElements.define("demo-app-main",vr);const mr=document.createElement("template");mr.innerHTML=`\n    <style>\n        ${dr}\n\n        :host {\n            display: flex;\n            flex: 1;\n            flex-direction: column;\n            padding: 20px 28px;\n        }\n\n        :host .card.apis input {\n            width: 100%; /* fix for android-chrome */\n        }\n\n        :host .card.apis .card-actions {\n            padding-bottom: 16px;\n        }\n\n        :host .card.apis .card-actions button {\n            margin-left: 14px;\n        }\n    </style>\n\n    <div class="card apis">\n        <div class="card-title row">\n            APIs access\n            <div id="api-status" class="card-status"></div>\n        </div>\n        <div class="card-actions row">\n            <div class="column flex">\n                <div class="input row">\n                    <label for="api-url-input">Url</label>\n                    <input id="api-url-input" class="flex" />\n                </div>\n                <div class="input row">\n                    <label for="api-headers-input">Custom headers</label>\n                    <input id="api-headers-input" class="flex" placeholder='"name": "value";' />\n                </div>\n            </div>\n            <button id="api-get-button">GET</button>\n        </div>\n        <div class="box">\n            <code>\n                <pre id="api-response"></pre>\n            </code>\n        </div>\n    </div>\n\n    <slot id="cards"></slot>\n`;class _r extends HTMLElement{constructor(){var e,t,n,r,i;super(),this.listeners=[],this.apiStatusEl=void 0,this.apiResponseEl=void 0,this.apiUrlEl=void 0,this.apiHeadersEl=void 0,this.attachShadow({mode:"open"}),null==(e=this.shadowRoot)||e.appendChild(document.importNode(mr.content,!0)),this.apiStatusEl=null==(t=this.shadowRoot)?void 0:t.querySelector("#api-status"),this.apiResponseEl=null==(n=this.shadowRoot)?void 0:n.querySelector("#api-response"),this.apiUrlEl=null==(r=this.shadowRoot)?void 0:r.querySelector("#api-url-input"),this.apiHeadersEl=null==(i=this.shadowRoot)?void 0:i.querySelector("#api-headers-input")}connectedCallback(){var e,t,n;const r=null==(e=this.shadowRoot)?void 0:e.querySelector("#api-get-button"),i=()=>{const e=new CustomEvent("api",{bubbles:!0,composed:!0,detail:{url:this.apiUrlEl.value,headers:this.apiHeadersEl.value}});return this.dispatchEvent(e)};null==r||r.addEventListener("click",i);const s=()=>this.saveSettings({privateApiUrl:this.apiUrlEl.value});null==(t=this.apiUrlEl)||t.addEventListener("input",s);const o=()=>this.saveSettings({privateApiHeaders:this.apiHeadersEl.value});null==(n=this.apiHeadersEl)||n.addEventListener("input",o),this.listeners.push((()=>null==r?void 0:r.removeEventListener("click",i)),(()=>{var e;return null==(e=this.apiUrlEl)?void 0:e.removeEventListener("input",s)}),(()=>{var e;return null==(e=this.apiHeadersEl)?void 0:e.removeEventListener("input",o)}));const{otherSettings:a}=window.appSettings.getCurrentUserSettings();this.apiUrlEl.value=null==a?void 0:a.privateApiUrl,this.apiHeadersEl.value=null==a?void 0:a.privateApiHeaders}disconnectedCallback(){this.listeners.forEach((e=>e()))}setApiStatus(e,t){this.apiStatusEl.classList.remove(t?"success":"error"),this.apiStatusEl.classList.add(t?"error":"success"),this.apiResponseEl.innerHTML=hr(e)}saveSettings(e){const t=window.appSettings.getCurrentUserSettings();t.otherSettings=Object.assign({},t.otherSettings,e),window.appSettings.addOrUpdateUserSettings(t)}}window.customElements.define("demo-app-playground",_r);const wr=document.createElement("template");wr.innerHTML=`\n    <style>\n        ${dr}\n\n        :host {\n            display: flex;\n            flex: 1;\n            flex-direction: column;\n            padding: 20px 28px;\n        }\n\n        :host .info {\n            margin: 16px;\n        }\n\n        :host .info .title {\n            min-width: 130px;\n        }\n\n        :host .info .value {\n            overflow-x: auto;\n            white-space: pre-wrap;\n            word-wrap: break-word;\n        }\n\n        :host .info code {\n            width: 100%;\n        }\n    </style>\n\n    <div class="card">\n        <div class="info column">\n            <div class="title">Authenticated</div>\n            <code>\n                <pre id="isAuthenticated" class="value json-value"></pre>\n            </code>\n        </div>\n\n        <div class="info column">\n            <div class="title">User session</div>\n            <code>\n                <pre id="userSession" class="value"></pre>\n            </code>\n        </div>\n\n        <div class="info column">\n            <div class="title">Access token</div>\n            <code>\n                <pre id="accessToken" class="value json-value"></pre>\n                <pre id="accessTokenDecoded" class="value"></pre>\n            </code>\n        </div>\n\n        <div class="info column">\n            <div class="title">Id token</div>\n            <code>\n                <pre id="idToken" class="value json-value"></pre>\n                <pre id="idTokenDecoded" class="value"></pre>\n            </code>\n        </div>\n\n        <div class="info column">\n            <div class="title">User profile</div>\n            <code>\n                <pre id="userProfile" class="value"></pre>\n            </code>\n        </div>\n    </div>\n`;class yr extends HTMLElement{constructor(){var e;super(),this.attachShadow({mode:"open"}),null==(e=this.shadowRoot)||e.appendChild(document.importNode(wr.content,!0)),this.isAuthenticated=!1,this.userSession=void 0,this.accessToken=void 0,this.accessTokenDecoded=void 0,this.idToken=void 0,this.idTokenDecoded=void 0,this.userProfile=void 0}set isAuthenticated(e){null!==e&&this.update("#isAuthenticated",e)}set userSession(e){this.update("#userSession",hr(e,["expires_at"]))}set accessToken(e){this.update("#accessToken",e)}set accessTokenDecoded(e){const t="string"!=typeof e?hr(e,["exp","iat","auth_time"]):"(no decoded info as it is not a JWT token)";this.update("#accessTokenDecoded",t)}set idToken(e){this.update("#idToken",e)}set idTokenDecoded(e){this.update("#idTokenDecoded",hr(e,["exp","iat","auth_time"]))}set userProfile(e){this.update("#userProfile",hr(e))}update(e,t){var n;const r=null==(n=this.shadowRoot)?void 0:n.querySelector(e);var i,s;r&&(null==t||""===t?null==(i=r.closest(".info"))||i.classList.add("hidden"):(null==(s=r.closest(".info"))||s.classList.remove("hidden"),r.innerHTML=String(t)))}}window.customElements.define("demo-app-debug",yr);n(7807),n(5035),n(8512),n(200);const br=document.createElement("template");br.innerHTML=`\n    <style>\n        ${dr}\n\n        :host {\n            display: flex;\n            flex: 1;\n            flex-direction: column;\n            padding: 20px 28px;\n        }\n\n        :host .card {\n            padding: 40px 16px 16px 16px;\n        }\n\n        :host form {\n            position: relative;\n        }\n\n        :host form .input, :host .form-content > * {\n            margin-bottom: 24px;\n        }\n\n        :host form label {\n            margin-bottom: 8px;\n        }\n\n        :host .form-actions {\n            z-index: 10;\n            position: fixed;\n            bottom: calc(12px + var(--safe-area-inset-bottom));\n            left: calc(50% - 120px);\n            padding: 14px 0;\n            border-radius: 4px;\n            background-color: #E0E0E0;\n            width: 240px;\n            justify-content: center;\n        }\n\n        :host .form-actions button {\n            padding: 2px 12px;\n        }\n\n        :host .form-actions button:not(:last-of-type) {\n            margin-right: 12px;\n        }\n\n        :host button {\n            cursor: pointer;\n        }\n\n        :host #settings-select {\n            margin-left: 6px;\n            color: black;\n        }\n\n        :host #add-settings-button {\n            background: none;\n            border: none;\n            cursor: pointer;\n            padding: 4px;\n            color: darkgray;\n        }\n\n        :host #delete-settings-button {\n            position: absolute;\n            top: 20px;\n            right: 20px;\n            display: flex;\n            align-items: center;\n            background: none;\n            border: none;\n            cursor: pointer;\n            font-size: 14px;\n            color: #EF5350;\n        }\n\n        :host #save-settings-button {\n            color: white;\n            padding: 4px 24px;\n            border: none;\n            border-radius: 4px;\n            transition: background-color 150ms cubic-bezier(0.35, 0, 0.25, 1);\n            background-color: #512da8;\n        }\n\n        :host #cancel-settings-button {\n            padding: 4px 18px;\n            border: none;\n            border-radius: 4px;\n            transition: background-color 150ms cubic-bezier(0.35, 0, 0.25, 1);\n            background-color: white;\n        }\n\n        :host #save-settings-button:hover {\n            background-color: #4527a0;\n        }\n\n        :host(.dirty) .form-actions {\n            display: flex !important;\n        }\n\n        :host(.dirty) #delete-settings-button {\n            display: none;\n        }\n\n        @media only screen and (max-width: 600px) {\n            :host .settings-select {\n                margin: 12px 8px;\n            }\n        }\n    </style>\n\n    <div class="settings-select row">\n        <select id="settings-select"></select>\n        <div id="add-settings-button" title="Create new settings">\n            <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px" fill="currentColor"><path d="M0 0h24v24H0z" fill="none"/><path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/></svg>\n        </div>\n    </div>\n\n    <div class="form-actions row hidden">\n        <button id="save-settings-button" type="button">SAVE</button>\n        <button id="cancel-settings-button" type="button">CANCEL</button>\n    </div>\n\n    <form class="column card">\n        <div id="delete-settings-button">\n            DELETE\n        </div>\n        <div class="input column">\n            <label for="settingsName">Settings name *</label>\n            <input id="settingsName" name="settingsName" required="">\n        </div>\n        <div class="form-content flex"></div>\n    </form>\n`;class Sr extends HTMLElement{constructor(){var e;super(),this.listeners=[],this.formEl=void 0,this.formContentEl=void 0,this.selectEl=void 0,this.settingsNameEl=void 0,this.formIsDirty=!1,this.formIsNew=!1,this.attachShadow({mode:"open"}),null==(e=this.shadowRoot)||e.appendChild(document.importNode(br.content,!0))}connectedCallback(){var e,t,n,r,i,s,o,a,c;this.formEl=null==(e=this.shadowRoot)?void 0:e.querySelector("form"),this.formContentEl=null==(t=this.shadowRoot)?void 0:t.querySelector(".form-content"),this.selectEl=null==(n=this.shadowRoot)?void 0:n.querySelector("#settings-select"),this.settingsNameEl=null==(r=this.shadowRoot)?void 0:r.querySelector("#settingsName");const l=e=>{this.formIsDirty||"settings-select"===e.target.id||(this.formIsDirty=!0,this.classList.add("dirty"))};this.formEl.addEventListener("input",l),this.listeners.push((()=>this.formEl.removeEventListener("input",l))),this.refreshSelect();const u=()=>this.loadSettings(this.selectEl.value);null==(i=this.selectEl)||i.addEventListener("change",u),this.listeners.push((()=>this.selectEl.removeEventListener("change",u)));const d=null==(s=this.shadowRoot)?void 0:s.querySelector("#add-settings-button"),h=()=>this.add();null==d||d.addEventListener("click",h),this.listeners.push((()=>null==d?void 0:d.removeEventListener("click",h)));const p=null==(o=this.shadowRoot)?void 0:o.querySelector("#delete-settings-button"),g=()=>this.delete();null==p||p.addEventListener("click",g),this.listeners.push((()=>null==p?void 0:p.removeEventListener("click",g)));const f=null==(a=this.shadowRoot)?void 0:a.querySelector("#save-settings-button"),v=()=>this.saveAndReload();null==f||f.addEventListener("click",v),this.listeners.push((()=>null==f?void 0:f.removeEventListener("click",v)));const m=null==(c=this.shadowRoot)?void 0:c.querySelector("#cancel-settings-button"),_=()=>this.cancel();null==m||m.addEventListener("click",_),this.listeners.push((()=>null==m?void 0:m.removeEventListener("click",_))),this.refreshFormContent(window.appSettings.getCurrentUserSettings())}disconnectedCallback(){this.listeners.forEach((e=>e()))}loadSettings(e){window.appSettings.setCurrentUserSettings(e),location.reload()}add(){const e="New settings",t=document.createElement("option");t.selected=!0,t.value=e,t.textContent=e,this.selectEl.appendChild(t),this.formIsNew=!0,this.formIsDirty=!0,this.classList.add("dirty"),this.refreshFormContent({name:e,librarySettings:{}})}delete(){window.appSettings.deleteCurrentUserSettings(),location.reload()}cancel(){this.formIsNew=!1,this.formIsDirty=!1,this.classList.remove("dirty"),this.refreshSelect(),this.refreshFormContent(window.appSettings.getCurrentUserSettings())}setPathValue(e,t,n){const r=t.split(".");r.reduce(((e,t,i)=>(i===r.length-1?e[t]=n:Object.prototype.hasOwnProperty.call(e,t)||(e[t]={}),e[t])),e)}getPathValue(e,t){return t.split(".").reduce(((e,t)=>e?e[t]:e),e)}refreshSelect(){this.selectEl.innerHTML="";const{userSettings:e,currentUserSettingsId:t}=window.appSettings.get();e.sort(((e,t)=>e.name.localeCompare(t.name))).forEach((e=>{const n=document.createElement("option");n.selected=e.name===t,n.value=String(e.name),n.textContent=e.name,this.selectEl.appendChild(n)}))}refreshFormContent(e){this.formContentEl.innerHTML="";const{librarySettingsDefinition:t}=window.appSettings.get(),{name:n,librarySettings:r}=e;this.settingsNameEl.value=n,t.sort(((e,t)=>(t._sortIndex||0)-(e._sortIndex||0))).forEach((e=>{var t;const n=document.createElement("div");this.formContentEl.prepend(n);const i=document.createElement("label");i.htmlFor=e.name.replace(".",""),i.textContent=`${e.label}${e.required?" *":""}`;const s=document.createElement("list"===e.type?"select":"input");switch(s.id=e.name.replace(".",""),s.name=e.name.replace(".",""),s.required=!0===e.required,e.type){case"boolean":s.checked=this.getPathValue(r,e.name),s.type="checkbox",n.appendChild(s),n.appendChild(i);break;case"list":null==(t=e.values)||t.forEach((e=>{const t=document.createElement("option");t.value=String(e.value),t.textContent=e.label,s.appendChild(t)})),s.value=this.getPathValue(r,e.name),s.classList.add("flex"),n.classList.add("input","column"),n.appendChild(i),n.appendChild(s);break;default:{const t=this.getPathValue(r,e.name);"json"===e.type?s.value=t?JSON.stringify(t):"":s.value=null!=t?t:"",n.classList.add("input","column"),n.appendChild(i),n.appendChild(s);break}}}))}saveAndReload(){if(this.formEl.reportValidity()){const{librarySettingsDefinition:e}=window.appSettings.get(),t=this.formIsNew?{name:"",librarySettings:{}}:window.appSettings.getCurrentUserSettings();t.name=this.settingsNameEl.value,e.forEach((e=>{var n;const r=null==(n=this.shadowRoot)?void 0:n.querySelector(`#${e.name.replace(".","")}`);let i;switch(e.type){case"boolean":i=r.checked;break;case"list":default:i=r.value;break;case"json":try{const e=r.value;e&&""!==e.trim()&&(i=JSON.parse(e))}catch(s){console.error(s)}}this.setPathValue(t.librarySettings,e.name,i)})),window.appSettings.addOrUpdateUserSettings(t),this.formIsNew&&window.appSettings.setCurrentUserSettings(t.name),location.reload()}}}window.customElements.define("demo-app-settings",Sr);const xr=JSON.parse('{"u2":"@badisi/auth-js","i8":"0.0.0-semantically-released","Xh":"https://github.com/Badisi/auth-js/tree/main/projects/auth-js"}'),kr=JSON.parse('{"u2":"@badisi/ngx-auth","Xh":"https://github.com/Badisi/auth-js/tree/main/projects/ngx-auth"}');const Er=[{name:"authorityUrl",label:"Authority url",type:"string",required:!0},{name:"clientId",label:"Client id",type:"string",required:!0},{name:"mobileScheme",label:"Custom mobile scheme name",type:"string"},{name:"scope",label:"Scope",type:"string"},{name:"internal.extraQueryParams",label:"Extra query params",type:"json"},{name:"navigationType",label:"Navigation type",type:"list",values:[{label:"REDIRECT",value:Dn.REDIRECT},{label:"POPUP",value:Dn.POPUP}]},{name:"logLevel",label:"Log level",type:"list",values:[{label:"NONE",value:en.NONE},{label:"ERROR",value:en.ERROR},{label:"WARN",value:en.WARN},{label:"INFO",value:en.INFO},{label:"DEBUG",value:en.DEBUG}]},{name:"loginRequired",label:"Login required",type:"boolean"},{name:"retrieveUserSession",label:"Retrieve user's session",type:"boolean"},{name:"loadUserInfo",label:"Load user's info",type:"boolean"},{name:"automaticSilentRenew",label:"Automatic silent renew",type:"boolean"}],Rr=[...Er,{name:"automaticLoginOn401",label:"Automatic login on 401",type:"boolean"},{name:"automaticInjectToken",label:"Automatic inject token",type:"boolean"}];Rr.splice(3,0,{name:"authGuardRedirectUrl",label:"AuthGuard redirect url",type:"string"});const Tr=(e=!1)=>{const t=[{name:"Auth0",otherSettings:{privateApiUrl:"https://dev-fijd1e9x.us.auth0.com/api/v2/users/auth0|631b171682c639d40cb84d5c",privateApiHeaders:""},librarySettings:{authorityUrl:"https://dev-fijd1e9x.us.auth0.com",clientId:"kRVVEnAWKMpxxpcodl0TqLXfIHgQvmmt",mobileScheme:"demo-app",scope:"openid profile email phone offline_access read:current_user",internal:{extraQueryParams:{audience:"https://dev-fijd1e9x.us.auth0.com/api/v2/"}},navigationType:Dn.REDIRECT,logLevel:en.NONE,loginRequired:!1,retrieveUserSession:!0,loadUserInfo:!0,automaticSilentRenew:!0}},{name:"Zitadel",otherSettings:{privateApiUrl:"",privateApiHeaders:""},librarySettings:{authorityUrl:"https://auth-js-0pdipf.zitadel.cloud",clientId:"178200751804317953@demo-app",mobileScheme:"demo-app",scope:"openid profile email phone offline_access",navigationType:Dn.REDIRECT,logLevel:en.NONE,loginRequired:!1,retrieveUserSession:!0,loadUserInfo:!0,automaticSilentRenew:!0}}];return e||t.push({name:"Keycloak (local)",otherSettings:{privateApiUrl:"/api/my-api",privateApiHeaders:""},librarySettings:{authorityUrl:"http://localhost:8080/auth/realms/demo",clientId:"demo-app",mobileScheme:"demo-app",scope:"openid profile email phone",navigationType:Dn.REDIRECT,logLevel:en.NONE,loginRequired:!1,retrieveUserSession:!0,loadUserInfo:!0,automaticSilentRenew:!0}}),t},Ir=new class{constructor(e,t){this.storageKey=e,this.defaultAppSettings=t,this.implementations=[{label:"VanillaJS",demoUrl:"https://badisi.github.io/auth-js/demo-app/auth-js",version:`<a href="${xr.Xh}" target="_blank">${xr.u2}@main</a>`},{label:"Angular",demoUrl:"https://badisi.github.io/auth-js/demo-app/ngx-auth",version:`<a href="${kr.Xh}" target="_blank">${kr.u2}@main</a>`}],this.defaultAppSettings.librarySettingsDefinition.forEach(((e,t)=>e._sortIndex=t))}getImplementations(){return this.implementations}setShowTip(e){const t=this.get();t.showTip=e,this.saveAppSettings(t)}setCurrentTabIndex(e){const t=this.get();t.currentTabIndex=e,this.saveAppSettings(t)}addOrUpdateUserSettings(e){const t=this.get(),n=t.userSettings.findIndex((t=>t.name===e.name));-1!==n?t.userSettings[n]=e:t.userSettings.push(e),this.saveAppSettings(t)}deleteCurrentUserSettings(){const e=this.get(),{name:t}=this.getCurrentUserSettings(),n=e.userSettings.findIndex((e=>e.name===t));-1!==n&&(e.userSettings.splice(n,1),delete e.currentUserSettingsId,this.saveAppSettings(e))}setCurrentUserSettings(e){const t=this.get();-1!==t.userSettings.findIndex((t=>t.name===e))&&(t.currentUserSettingsId=e,this.saveAppSettings(t))}getCurrentUserSettings(){const e=this.get(),t=e.userSettings.findIndex((t=>t.name===e.currentUserSettingsId));return-1!==t?e.userSettings[t]:e.userSettings.sort(((e,t)=>e.name.localeCompare(t.name)))[0]}get(){const e=sessionStorage.getItem(this.storageKey);if(e){const t=Object.assign({},this.defaultAppSettings,JSON.parse(e));return this.defaultAppSettings.userSettings.forEach((e=>{t.userSettings.find((t=>t.name===e.name))||t.userSettings.push(e)})),t}return Object.assign({},this.defaultAppSettings)}saveAppSettings(e){delete e.librarySettingsDefinition,sessionStorage.setItem(this.storageKey,JSON.stringify(e))}}(`auth-js:${xr.i8}:demo-app:settings`,{showTip:!0,currentTabIndex:0,userSettings:Tr(!0),librarySettingsDefinition:Er});(()=>{window.appSettings=Ir;const e=document.createElement("div");e.innerHTML="Loading...",document.body.appendChild(e),(async e=>await(async(e,t)=>{const n=new t;return await n.init(e),n})(e,sr))(Ir.getCurrentUserSettings().librarySettings).then((t=>{window.authManager=t,e.replaceWith(document.createElement("app-root"))})).catch((t=>{var n;console.error(t),e.innerHTML=`${t.message}<br/><button id="loginButton">Login</button>`,null==(n=document.body.querySelector("#loginButton"))||n.addEventListener("click",(()=>location.reload()),{once:!0})}))})()},1485:e=>{e.exports=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e}},8563:(e,t,n)=>{var r=n(6913);e.exports=function(e){if(!r(e)&&null!==e)throw TypeError("Can't set "+String(e)+" as a prototype");return e}},186:(e,t,n)=>{var r=n(7952),i=n(6997),s=n(7108),o=r("unscopables"),a=Array.prototype;null==a[o]&&s.f(a,o,{configurable:!0,value:i(null)}),e.exports=function(e){a[o][e]=!0}},3264:(e,t,n)=>{"use strict";var r=n(2370).charAt;e.exports=function(e,t,n){return t+(n?r(e,t).length:1)}},5209:e=>{e.exports=function(e,t,n){if(!(e instanceof t))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return e}},3536:(e,t,n)=>{var r=n(6913);e.exports=function(e){if(!r(e))throw TypeError(String(e)+" is not an object");return e}},8897:(e,t,n)=>{"use strict";var r=n(1248),i=n(987),s=n(6996),o=n(1855),a=n(6092),c=n(3859),l=n(6418);e.exports=function(e){var t,n,u,d,h,p,g=i(e),f="function"==typeof this?this:Array,v=arguments.length,m=v>1?arguments[1]:void 0,_=void 0!==m,w=l(g),y=0;if(_&&(m=r(m,v>2?arguments[2]:void 0,2)),null==w||f==Array&&o(w))for(n=new f(t=a(g.length));t>y;y++)p=_?m(g[y],y):g[y],c(n,y,p);else for(h=(d=w.call(g)).next,n=new f;!(u=h.call(d)).done;y++)p=_?s(d,m,[u.value,y],!0):u.value,c(n,y,p);return n.length=y,n}},7945:(e,t,n)=>{var r=n(9164),i=n(6092),s=n(2966),o=function(e){return function(t,n,o){var a,c=r(t),l=i(c.length),u=s(o,l);if(e&&n!=n){for(;l>u;)if((a=c[u++])!=a)return!0}else for(;l>u;u++)if((e||u in c)&&c[u]===n)return e||u||0;return!e&&-1}};e.exports={includes:o(!0),indexOf:o(!1)}},2245:(e,t,n)=>{"use strict";var r=n(3694);e.exports=function(e,t){var n=[][e];return!!n&&r((function(){n.call(null,t||function(){throw 1},1)}))}},8605:(e,t,n)=>{var r=n(1485),i=n(987),s=n(6801),o=n(6092),a=function(e){return function(t,n,a,c){r(n);var l=i(t),u=s(l),d=o(l.length),h=e?d-1:0,p=e?-1:1;if(a<2)for(;;){if(h in u){c=u[h],h+=p;break}if(h+=p,e?h<0:d<=h)throw TypeError("Reduce of empty array with no initial value")}for(;e?h>=0:d>h;h+=p)h in u&&(c=n(c,u[h],h,l));return c}};e.exports={left:a(!1),right:a(!0)}},8813:e=>{var t=Math.floor,n=function(e,s){var o=e.length,a=t(o/2);return o<8?r(e,s):i(n(e.slice(0,a),s),n(e.slice(a),s),s)},r=function(e,t){for(var n,r,i=e.length,s=1;s<i;){for(r=s,n=e[s];r&&t(e[r-1],n)>0;)e[r]=e[--r];r!==s++&&(e[r]=n)}return e},i=function(e,t,n){for(var r=e.length,i=t.length,s=0,o=0,a=[];s<r||o<i;)s<r&&o<i?a.push(n(e[s],t[o])<=0?e[s++]:t[o++]):a.push(s<r?e[s++]:t[o++]);return a};e.exports=n},6996:(e,t,n)=>{var r=n(3536),i=n(5635);e.exports=function(e,t,n,s){try{return s?t(r(n)[0],n[1]):t(n)}catch(o){throw i(e),o}}},1964:(e,t,n)=>{var r=n(7952)("iterator"),i=!1;try{var s=0,o={next:function(){return{done:!!s++}},return:function(){i=!0}};o[r]=function(){return this},Array.from(o,(function(){throw 2}))}catch(a){}e.exports=function(e,t){if(!t&&!i)return!1;var n=!1;try{var s={};s[r]=function(){return{next:function(){return{done:n=!0}}}},e(s)}catch(a){}return n}},2248:e=>{var t={}.toString;e.exports=function(e){return t.call(e).slice(8,-1)}},996:(e,t,n)=>{var r=n(6695),i=n(2248),s=n(7952)("toStringTag"),o="Arguments"==i(function(){return arguments}());e.exports=r?i:function(e){var t,n,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(n){}}(t=Object(e),s))?n:o?i(t):"Object"==(r=i(t))&&"function"==typeof t.callee?"Arguments":r}},1831:(e,t,n)=>{var r=n(322),i=n(3697),s=n(5027),o=n(7108);e.exports=function(e,t){for(var n=i(t),a=o.f,c=s.f,l=0;l<n.length;l++){var u=n[l];r(e,u)||a(e,u,c(t,u))}}},937:(e,t,n)=>{var r=n(7952)("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[r]=!1,"/./"[e](t)}catch(i){}}return!1}},560:(e,t,n)=>{var r=n(3694);e.exports=!r((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},1623:(e,t,n)=>{"use strict";var r=n(7824).IteratorPrototype,i=n(6997),s=n(8828),o=n(5411),a=n(3019),c=function(){return this};e.exports=function(e,t,n){var l=t+" Iterator";return e.prototype=i(r,{next:s(1,n)}),o(e,l,!1,!0),a[l]=c,e}},5399:(e,t,n)=>{var r=n(6079),i=n(7108),s=n(8828);e.exports=r?function(e,t,n){return i.f(e,t,s(1,n))}:function(e,t,n){return e[t]=n,e}},8828:e=>{e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},3859:(e,t,n)=>{"use strict";var r=n(5831),i=n(7108),s=n(8828);e.exports=function(e,t,n){var o=r(t);o in e?i.f(e,o,s(0,n)):e[o]=n}},3392:(e,t,n)=>{"use strict";var r=n(5302),i=n(1623),s=n(5024),o=n(1403),a=n(5411),c=n(5399),l=n(3926),u=n(7952),d=n(7442),h=n(3019),p=n(7824),g=p.IteratorPrototype,f=p.BUGGY_SAFARI_ITERATORS,v=u("iterator"),m="keys",_="values",w="entries",y=function(){return this};e.exports=function(e,t,n,u,p,b,S){i(n,t,u);var x,k,E,R=function(e){if(e===p&&P)return P;if(!f&&e in U)return U[e];switch(e){case m:case _:case w:return function(){return new n(this,e)}}return function(){return new n(this)}},T=t+" Iterator",I=!1,U=e.prototype,A=U[v]||U["@@iterator"]||p&&U[p],P=!f&&A||R(p),C="Array"==t&&U.entries||A;if(C&&(x=s(C.call(new e)),g!==Object.prototype&&x.next&&(d||s(x)===g||(o?o(x,g):"function"!=typeof x[v]&&c(x,v,y)),a(x,T,!0,!0),d&&(h[T]=y))),p==_&&A&&A.name!==_&&(I=!0,P=function(){return A.call(this)}),d&&!S||U[v]===P||c(U,v,P),h[t]=P,p)if(k={values:R(_),keys:b?P:R(m),entries:R(w)},S)for(E in k)(f||I||!(E in U))&&l(U,E,k[E]);else r({target:t,proto:!0,forced:f||I},k);return k}},6079:(e,t,n)=>{var r=n(3694);e.exports=!r((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},2200:(e,t,n)=>{var r=n(7230),i=n(6913),s=r.document,o=i(s)&&i(s.createElement);e.exports=function(e){return o?s.createElement(e):{}}},5941:e=>{e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},1346:(e,t,n)=>{var r=n(7749).match(/firefox\/(\d+)/i);e.exports=!!r&&+r[1]},417:e=>{e.exports="object"==typeof window},7636:(e,t,n)=>{var r=n(7749);e.exports=/MSIE|Trident/.test(r)},4619:(e,t,n)=>{var r=n(7749);e.exports=/(?:iphone|ipod|ipad).*applewebkit/i.test(r)},5009:(e,t,n)=>{var r=n(2248),i=n(7230);e.exports="process"==r(i.process)},2811:(e,t,n)=>{var r=n(7749);e.exports=/web0s(?!.*chrome)/i.test(r)},7749:(e,t,n)=>{var r=n(1223);e.exports=r("navigator","userAgent")||""},7806:(e,t,n)=>{var r,i,s=n(7230),o=n(7749),a=s.process,c=s.Deno,l=a&&a.versions||c&&c.version,u=l&&l.v8;u?i=(r=u.split("."))[0]<4?1:r[0]+r[1]:o&&(!(r=o.match(/Edge\/(\d+)/))||r[1]>=74)&&(r=o.match(/Chrome\/(\d+)/))&&(i=r[1]),e.exports=i&&+i},7041:(e,t,n)=>{var r=n(7749).match(/AppleWebKit\/(\d+)\./);e.exports=!!r&&+r[1]},9799:e=>{e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},5302:(e,t,n)=>{var r=n(7230),i=n(5027).f,s=n(5399),o=n(3926),a=n(746),c=n(1831),l=n(4545);e.exports=function(e,t){var n,u,d,h,p,g=e.target,f=e.global,v=e.stat;if(n=f?r:v?r[g]||a(g,{}):(r[g]||{}).prototype)for(u in t){if(h=t[u],d=e.noTargetGet?(p=i(n,u))&&p.value:n[u],!l(f?u:g+(v?".":"#")+u,e.forced)&&void 0!==d){if(typeof h==typeof d)continue;c(h,d)}(e.sham||d&&d.sham)&&s(h,"sham",!0),o(n,u,h,e)}}},3694:e=>{e.exports=function(e){try{return!!e()}catch(t){return!0}}},4430:(e,t,n)=>{"use strict";n(5098);var r=n(3926),i=n(9735),s=n(3694),o=n(7952),a=n(5399),c=o("species"),l=RegExp.prototype;e.exports=function(e,t,n,u){var d=o(e),h=!s((function(){var t={};return t[d]=function(){return 7},7!=""[e](t)})),p=h&&!s((function(){var t=!1,n=/a/;return"split"===e&&((n={}).constructor={},n.constructor[c]=function(){return n},n.flags="",n[d]=/./[d]),n.exec=function(){return t=!0,null},n[d](""),!t}));if(!h||!p||n){var g=/./[d],f=t(d,""[e],(function(e,t,n,r,s){var o=t.exec;return o===i||o===l.exec?h&&!s?{done:!0,value:g.call(t,n,r)}:{done:!0,value:e.call(n,t,r)}:{done:!1}}));r(String.prototype,e,f[0]),r(l,d,f[1])}u&&a(l[d],"sham",!0)}},1248:(e,t,n)=>{var r=n(1485);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 0:return function(){return e.call(t)};case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)}}return function(){return e.apply(t,arguments)}}},1223:(e,t,n)=>{var r=n(7230),i=function(e){return"function"==typeof e?e:void 0};e.exports=function(e,t){return arguments.length<2?i(r[e]):r[e]&&r[e][t]}},6418:(e,t,n)=>{var r=n(996),i=n(3019),s=n(7952)("iterator");e.exports=function(e){if(null!=e)return e[s]||e["@@iterator"]||i[r(e)]}},9853:(e,t,n)=>{var r=n(3536),i=n(6418);e.exports=function(e){var t=i(e);if("function"!=typeof t)throw TypeError(String(e)+" is not iterable");return r(t.call(e))}},6968:(e,t,n)=>{var r=n(987),i=Math.floor,s="".replace,o=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,a=/\$([$&'`]|\d{1,2})/g;e.exports=function(e,t,n,c,l,u){var d=n+e.length,h=c.length,p=a;return void 0!==l&&(l=r(l),p=o),s.call(u,p,(function(r,s){var o;switch(s.charAt(0)){case"$":return"$";case"&":return e;case"`":return t.slice(0,n);case"'":return t.slice(d);case"<":o=l[s.slice(1,-1)];break;default:var a=+s;if(0===a)return r;if(a>h){var u=i(a/10);return 0===u?r:u<=h?void 0===c[u-1]?s.charAt(1):c[u-1]+s.charAt(1):r}o=c[a-1]}return void 0===o?"":o}))}},7230:e=>{var t=function(e){return e&&e.Math==Math&&e};e.exports=t("object"==typeof globalThis&&globalThis)||t("object"==typeof window&&window)||t("object"==typeof self&&self)||t("object"==typeof global&&global)||function(){return this}()||Function("return this")()},322:(e,t,n)=>{var r=n(987),i={}.hasOwnProperty;e.exports=Object.hasOwn||function(e,t){return i.call(r(e),t)}},7076:e=>{e.exports={}},5812:(e,t,n)=>{var r=n(7230);e.exports=function(e,t){var n=r.console;n&&n.error&&(1===arguments.length?n.error(e):n.error(e,t))}},6507:(e,t,n)=>{var r=n(1223);e.exports=r("document","documentElement")},4253:(e,t,n)=>{var r=n(6079),i=n(3694),s=n(2200);e.exports=!r&&!i((function(){return 7!=Object.defineProperty(s("div"),"a",{get:function(){return 7}}).a}))},6801:(e,t,n)=>{var r=n(3694),i=n(2248),s="".split;e.exports=r((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==i(e)?s.call(e,""):Object(e)}:Object},8089:(e,t,n)=>{var r=n(6913),i=n(1403);e.exports=function(e,t,n){var s,o;return i&&"function"==typeof(s=t.constructor)&&s!==n&&r(o=s.prototype)&&o!==n.prototype&&i(e,o),e}},4335:(e,t,n)=>{var r=n(1393),i=Function.toString;"function"!=typeof r.inspectSource&&(r.inspectSource=function(e){return i.call(e)}),e.exports=r.inspectSource},21:(e,t,n)=>{var r,i,s,o=n(5506),a=n(7230),c=n(6913),l=n(5399),u=n(322),d=n(1393),h=n(375),p=n(7076),g="Object already initialized",f=a.WeakMap;if(o||d.state){var v=d.state||(d.state=new f),m=v.get,_=v.has,w=v.set;r=function(e,t){if(_.call(v,e))throw new TypeError(g);return t.facade=e,w.call(v,e,t),t},i=function(e){return m.call(v,e)||{}},s=function(e){return _.call(v,e)}}else{var y=h("state");p[y]=!0,r=function(e,t){if(u(e,y))throw new TypeError(g);return t.facade=e,l(e,y,t),t},i=function(e){return u(e,y)?e[y]:{}},s=function(e){return u(e,y)}}e.exports={set:r,get:i,has:s,enforce:function(e){return s(e)?i(e):r(e,{})},getterFor:function(e){return function(t){var n;if(!c(t)||(n=i(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return n}}}},1855:(e,t,n)=>{var r=n(7952),i=n(3019),s=r("iterator"),o=Array.prototype;e.exports=function(e){return void 0!==e&&(i.Array===e||o[s]===e)}},4545:(e,t,n)=>{var r=n(3694),i=/#|\.prototype\./,s=function(e,t){var n=a[o(e)];return n==l||n!=c&&("function"==typeof t?r(t):!!t)},o=s.normalize=function(e){return String(e).replace(i,".").toLowerCase()},a=s.data={},c=s.NATIVE="N",l=s.POLYFILL="P";e.exports=s},6913:e=>{e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},7442:e=>{e.exports=!1},385:(e,t,n)=>{var r=n(6913),i=n(2248),s=n(7952)("match");e.exports=function(e){var t;return r(e)&&(void 0!==(t=e[s])?!!t:"RegExp"==i(e))}},7581:(e,t,n)=>{var r=n(1223),i=n(9264);e.exports=i?function(e){return"symbol"==typeof e}:function(e){var t=r("Symbol");return"function"==typeof t&&Object(e)instanceof t}},5103:(e,t,n)=>{var r=n(3536),i=n(1855),s=n(6092),o=n(1248),a=n(6418),c=n(5635),l=function(e,t){this.stopped=e,this.result=t};e.exports=function(e,t,n){var u,d,h,p,g,f,v,m=n&&n.that,_=!(!n||!n.AS_ENTRIES),w=!(!n||!n.IS_ITERATOR),y=!(!n||!n.INTERRUPTED),b=o(t,m,1+_+y),S=function(e){return u&&c(u),new l(!0,e)},x=function(e){return _?(r(e),y?b(e[0],e[1],S):b(e[0],e[1])):y?b(e,S):b(e)};if(w)u=e;else{if("function"!=typeof(d=a(e)))throw TypeError("Target is not iterable");if(i(d)){for(h=0,p=s(e.length);p>h;h++)if((g=x(e[h]))&&g instanceof l)return g;return new l(!1)}u=d.call(e)}for(f=u.next;!(v=f.call(u)).done;){try{g=x(v.value)}catch(k){throw c(u),k}if("object"==typeof g&&g&&g instanceof l)return g}return new l(!1)}},5635:(e,t,n)=>{var r=n(3536);e.exports=function(e){var t=e.return;if(void 0!==t)return r(t.call(e)).value}},7824:(e,t,n)=>{"use strict";var r,i,s,o=n(3694),a=n(5024),c=n(5399),l=n(322),u=n(7952),d=n(7442),h=u("iterator"),p=!1;[].keys&&("next"in(s=[].keys())?(i=a(a(s)))!==Object.prototype&&(r=i):p=!0);var g=null==r||o((function(){var e={};return r[h].call(e)!==e}));g&&(r={}),d&&!g||l(r,h)||c(r,h,(function(){return this})),e.exports={IteratorPrototype:r,BUGGY_SAFARI_ITERATORS:p}},3019:e=>{e.exports={}},3012:(e,t,n)=>{var r,i,s,o,a,c,l,u,d=n(7230),h=n(5027).f,p=n(7823).set,g=n(4619),f=n(2811),v=n(5009),m=d.MutationObserver||d.WebKitMutationObserver,_=d.document,w=d.process,y=d.Promise,b=h(d,"queueMicrotask"),S=b&&b.value;S||(r=function(){var e,t;for(v&&(e=w.domain)&&e.exit();i;){t=i.fn,i=i.next;try{t()}catch(n){throw i?o():s=void 0,n}}s=void 0,e&&e.enter()},g||v||f||!m||!_?y&&y.resolve?((l=y.resolve(void 0)).constructor=y,u=l.then,o=function(){u.call(l,r)}):o=v?function(){w.nextTick(r)}:function(){p.call(d,r)}:(a=!0,c=_.createTextNode(""),new m(r).observe(c,{characterData:!0}),o=function(){c.data=a=!a})),e.exports=S||function(e){var t={fn:e,next:void 0};s&&(s.next=t),i||(i=t,o()),s=t}},3479:(e,t,n)=>{var r=n(7230);e.exports=r.Promise},8724:(e,t,n)=>{var r=n(7806),i=n(3694);e.exports=!!Object.getOwnPropertySymbols&&!i((function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&r&&r<41}))},4169:(e,t,n)=>{var r=n(3694),i=n(7952),s=n(7442),o=i("iterator");e.exports=!r((function(){var e=new URL("b?a=1&b=2&c=3","http://a"),t=e.searchParams,n="";return e.pathname="c%20d",t.forEach((function(e,r){t.delete("b"),n+=r+e})),s&&!e.toJSON||!t.sort||"http://a/c%20d?a=1&c=3"!==e.href||"3"!==t.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!t[o]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://\u0442\u0435\u0441\u0442").host||"#%D0%B1"!==new URL("http://a#\u0431").hash||"a1c3"!==n||"x"!==new URL("http://x",void 0).host}))},5506:(e,t,n)=>{var r=n(7230),i=n(4335),s=r.WeakMap;e.exports="function"==typeof s&&/native code/.test(i(s))},6935:(e,t,n)=>{"use strict";var r=n(1485),i=function(e){var t,n;this.promise=new e((function(e,r){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=r})),this.resolve=r(t),this.reject=r(n)};e.exports.f=function(e){return new i(e)}},6487:(e,t,n)=>{var r=n(385);e.exports=function(e){if(r(e))throw TypeError("The method doesn't accept regular expressions");return e}},5016:(e,t,n)=>{"use strict";var r=n(6079),i=n(3694),s=n(6127),o=n(7375),a=n(5486),c=n(987),l=n(6801),u=Object.assign,d=Object.defineProperty;e.exports=!u||i((function(){if(r&&1!==u({b:1},u(d({},"a",{enumerable:!0,get:function(){d(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},n=Symbol(),i="abcdefghijklmnopqrst";return e[n]=7,i.split("").forEach((function(e){t[e]=e})),7!=u({},e)[n]||s(u({},t)).join("")!=i}))?function(e,t){for(var n=c(e),i=arguments.length,u=1,d=o.f,h=a.f;i>u;)for(var p,g=l(arguments[u++]),f=d?s(g).concat(d(g)):s(g),v=f.length,m=0;v>m;)p=f[m++],r&&!h.call(g,p)||(n[p]=g[p]);return n}:u},6997:(e,t,n)=>{var r,i=n(3536),s=n(7673),o=n(9799),a=n(7076),c=n(6507),l=n(2200),u=n(375),d=u("IE_PROTO"),h=function(){},p=function(e){return"<script>"+e+"</"+"script>"},g=function(e){e.write(p("")),e.close();var t=e.parentWindow.Object;return e=null,t},f=function(){try{r=new ActiveXObject("htmlfile")}catch(t){}f=document.domain&&r?g(r):function(){var e,t=l("iframe");if(t.style)return t.style.display="none",c.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(p("document.F=Object")),e.close(),e.F}()||g(r);for(var e=o.length;e--;)delete f.prototype[o[e]];return f()};a[d]=!0,e.exports=Object.create||function(e,t){var n;return null!==e?(h.prototype=i(e),n=new h,h.prototype=null,n[d]=e):n=f(),void 0===t?n:s(n,t)}},7673:(e,t,n)=>{var r=n(6079),i=n(7108),s=n(3536),o=n(6127);e.exports=r?Object.defineProperties:function(e,t){s(e);for(var n,r=o(t),a=r.length,c=0;a>c;)i.f(e,n=r[c++],t[n]);return e}},7108:(e,t,n)=>{var r=n(6079),i=n(4253),s=n(3536),o=n(5831),a=Object.defineProperty;t.f=r?a:function(e,t,n){if(s(e),t=o(t),s(n),i)try{return a(e,t,n)}catch(r){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},5027:(e,t,n)=>{var r=n(6079),i=n(5486),s=n(8828),o=n(9164),a=n(5831),c=n(322),l=n(4253),u=Object.getOwnPropertyDescriptor;t.f=r?u:function(e,t){if(e=o(e),t=a(t),l)try{return u(e,t)}catch(n){}if(c(e,t))return s(!i.f.call(e,t),e[t])}},7852:(e,t,n)=>{var r=n(3821),i=n(9799).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,i)}},7375:(e,t)=>{t.f=Object.getOwnPropertySymbols},5024:(e,t,n)=>{var r=n(322),i=n(987),s=n(375),o=n(560),a=s("IE_PROTO"),c=Object.prototype;e.exports=o?Object.getPrototypeOf:function(e){return e=i(e),r(e,a)?e[a]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?c:null}},3821:(e,t,n)=>{var r=n(322),i=n(9164),s=n(7945).indexOf,o=n(7076);e.exports=function(e,t){var n,a=i(e),c=0,l=[];for(n in a)!r(o,n)&&r(a,n)&&l.push(n);for(;t.length>c;)r(a,n=t[c++])&&(~s(l,n)||l.push(n));return l}},6127:(e,t,n)=>{var r=n(3821),i=n(9799);e.exports=Object.keys||function(e){return r(e,i)}},5486:(e,t)=>{"use strict";var n={}.propertyIsEnumerable,r=Object.getOwnPropertyDescriptor,i=r&&!n.call({1:2},1);t.f=i?function(e){var t=r(this,e);return!!t&&t.enumerable}:n},1403:(e,t,n)=>{var r=n(3536),i=n(8563);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{(e=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),t=n instanceof Array}catch(s){}return function(n,s){return r(n),i(s),t?e.call(n,s):n.__proto__=s,n}}():void 0)},7013:(e,t,n)=>{var r=n(6913);e.exports=function(e,t){var n,i;if("string"===t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!r(i=n.call(e)))return i;if("string"!==t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},3697:(e,t,n)=>{var r=n(1223),i=n(7852),s=n(7375),o=n(3536);e.exports=r("Reflect","ownKeys")||function(e){var t=i.f(o(e)),n=s.f;return n?t.concat(n(e)):t}},7731:e=>{e.exports=function(e){try{return{error:!1,value:e()}}catch(t){return{error:!0,value:t}}}},8888:(e,t,n)=>{var r=n(3536),i=n(6913),s=n(6935);e.exports=function(e,t){if(r(e),i(t)&&t.constructor===e)return t;var n=s.f(e);return(0,n.resolve)(t),n.promise}},7777:(e,t,n)=>{var r=n(3926);e.exports=function(e,t,n){for(var i in t)r(e,i,t[i],n);return e}},3926:(e,t,n)=>{var r=n(7230),i=n(5399),s=n(322),o=n(746),a=n(4335),c=n(21),l=c.get,u=c.enforce,d=String(String).split("String");(e.exports=function(e,t,n,a){var c,l=!!a&&!!a.unsafe,h=!!a&&!!a.enumerable,p=!!a&&!!a.noTargetGet;"function"==typeof n&&("string"!=typeof t||s(n,"name")||i(n,"name",t),(c=u(n)).source||(c.source=d.join("string"==typeof t?t:""))),e!==r?(l?!p&&e[t]&&(h=!0):delete e[t],h?e[t]=n:i(e,t,n)):h?e[t]=n:o(t,n)})(Function.prototype,"toString",(function(){return"function"==typeof this&&l(this).source||a(this)}))},5731:(e,t,n)=>{var r=n(2248),i=n(9735);e.exports=function(e,t){var n=e.exec;if("function"==typeof n){var s=n.call(e,t);if("object"!=typeof s)throw TypeError("RegExp exec method returned something other than an Object or null");return s}if("RegExp"!==r(e))throw TypeError("RegExp#exec called on incompatible receiver");return i.call(e,t)}},9735:(e,t,n)=>{"use strict";var r,i,s=n(9851),o=n(8608),a=n(9154),c=n(3268),l=n(6997),u=n(21).get,d=n(5021),h=n(2916),p=RegExp.prototype.exec,g=c("native-string-replace",String.prototype.replace),f=p,v=(r=/a/,i=/b*/g,p.call(r,"a"),p.call(i,"a"),0!==r.lastIndex||0!==i.lastIndex),m=a.UNSUPPORTED_Y||a.BROKEN_CARET,_=void 0!==/()??/.exec("")[1];(v||_||m||d||h)&&(f=function(e){var t,n,r,i,a,c,d,h=this,w=u(h),y=s(e),b=w.raw;if(b)return b.lastIndex=h.lastIndex,t=f.call(b,y),h.lastIndex=b.lastIndex,t;var S=w.groups,x=m&&h.sticky,k=o.call(h),E=h.source,R=0,T=y;if(x&&(-1===(k=k.replace("y","")).indexOf("g")&&(k+="g"),T=y.slice(h.lastIndex),h.lastIndex>0&&(!h.multiline||h.multiline&&"\n"!==y.charAt(h.lastIndex-1))&&(E="(?: "+E+")",T=" "+T,R++),n=new RegExp("^(?:"+E+")",k)),_&&(n=new RegExp("^"+E+"$(?!\\s)",k)),v&&(r=h.lastIndex),i=p.call(x?n:h,T),x?i?(i.input=i.input.slice(R),i[0]=i[0].slice(R),i.index=h.lastIndex,h.lastIndex+=i[0].length):h.lastIndex=0:v&&i&&(h.lastIndex=h.global?i.index+i[0].length:r),_&&i&&i.length>1&&g.call(i[0],n,(function(){for(a=1;a<arguments.length-2;a++)void 0===arguments[a]&&(i[a]=void 0)})),i&&S)for(i.groups=c=l(null),a=0;a<S.length;a++)c[(d=S[a])[0]]=i[d[1]];return i}),e.exports=f},8608:(e,t,n)=>{"use strict";var r=n(3536);e.exports=function(){var e=r(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},9154:(e,t,n)=>{var r=n(3694),i=function(e,t){return RegExp(e,t)};t.UNSUPPORTED_Y=r((function(){var e=i("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),t.BROKEN_CARET=r((function(){var e=i("^r","gy");return e.lastIndex=2,null!=e.exec("str")}))},5021:(e,t,n)=>{var r=n(3694);e.exports=r((function(){var e=RegExp(".","string".charAt(0));return!(e.dotAll&&e.exec("\n")&&"s"===e.flags)}))},2916:(e,t,n)=>{var r=n(3694);e.exports=r((function(){var e=RegExp("(?<a>b)","string".charAt(5));return"b"!==e.exec("b").groups.a||"bc"!=="b".replace(e,"$<a>c")}))},7105:e=>{e.exports=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e}},746:(e,t,n)=>{var r=n(7230);e.exports=function(e,t){try{Object.defineProperty(r,e,{value:t,configurable:!0,writable:!0})}catch(n){r[e]=t}return t}},6898:(e,t,n)=>{"use strict";var r=n(1223),i=n(7108),s=n(7952),o=n(6079),a=s("species");e.exports=function(e){var t=r(e),n=i.f;o&&t&&!t[a]&&n(t,a,{configurable:!0,get:function(){return this}})}},5411:(e,t,n)=>{var r=n(7108).f,i=n(322),s=n(7952)("toStringTag");e.exports=function(e,t,n){e&&!i(e=n?e:e.prototype,s)&&r(e,s,{configurable:!0,value:t})}},375:(e,t,n)=>{var r=n(3268),i=n(4525),s=r("keys");e.exports=function(e){return s[e]||(s[e]=i(e))}},1393:(e,t,n)=>{var r=n(7230),i=n(746),s="__core-js_shared__",o=r[s]||i(s,{});e.exports=o},3268:(e,t,n)=>{var r=n(7442),i=n(1393);(e.exports=function(e,t){return i[e]||(i[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.16.0",mode:r?"pure":"global",copyright:"\xa9 2021 Denis Pushkarev (zloirock.ru)"})},640:(e,t,n)=>{var r=n(3536),i=n(1485),s=n(7952)("species");e.exports=function(e,t){var n,o=r(e).constructor;return void 0===o||null==(n=r(o)[s])?t:i(n)}},2370:(e,t,n)=>{var r=n(68),i=n(9851),s=n(7105),o=function(e){return function(t,n){var o,a,c=i(s(t)),l=r(n),u=c.length;return l<0||l>=u?e?"":void 0:(o=c.charCodeAt(l))<55296||o>56319||l+1===u||(a=c.charCodeAt(l+1))<56320||a>57343?e?c.charAt(l):o:e?c.slice(l,l+2):a-56320+(o-55296<<10)+65536}};e.exports={codeAt:o(!1),charAt:o(!0)}},7137:e=>{"use strict";var t=2147483647,n=/[^\0-\u007E]/,r=/[.\u3002\uFF0E\uFF61]/g,i="Overflow: input needs wider integers to process",s=Math.floor,o=String.fromCharCode,a=function(e){return e+22+75*(e<26)},c=function(e,t,n){var r=0;for(e=n?s(e/700):e>>1,e+=s(e/t);e>455;r+=36)e=s(e/35);return s(r+36*e/(e+38))},l=function(e){var n=[];e=function(e){for(var t=[],n=0,r=e.length;n<r;){var i=e.charCodeAt(n++);if(i>=55296&&i<=56319&&n<r){var s=e.charCodeAt(n++);56320==(64512&s)?t.push(((1023&i)<<10)+(1023&s)+65536):(t.push(i),n--)}else t.push(i)}return t}(e);var r,l,u=e.length,d=128,h=0,p=72;for(r=0;r<e.length;r++)(l=e[r])<128&&n.push(o(l));var g=n.length,f=g;for(g&&n.push("-");f<u;){var v=t;for(r=0;r<e.length;r++)(l=e[r])>=d&&l<v&&(v=l);var m=f+1;if(v-d>s((t-h)/m))throw RangeError(i);for(h+=(v-d)*m,d=v,r=0;r<e.length;r++){if((l=e[r])<d&&++h>t)throw RangeError(i);if(l==d){for(var _=h,w=36;;w+=36){var y=w<=p?1:w>=p+26?26:w-p;if(_<y)break;var b=_-y,S=36-y;n.push(o(a(y+b%S))),_=s(b/S)}n.push(o(a(_))),p=c(h,m,f==g),h=0,++f}}++h,++d}return n.join("")};e.exports=function(e){var t,i,s=[],o=e.toLowerCase().replace(r,".").split(".");for(t=0;t<o.length;t++)i=o[t],s.push(n.test(i)?"xn--"+l(i):i);return s.join(".")}},511:(e,t,n)=>{var r=n(3694),i=n(1152);e.exports=function(e){return r((function(){return!!i[e]()||"\u200b\x85\u180e"!="\u200b\x85\u180e"[e]()||i[e].name!==e}))}},7011:(e,t,n)=>{var r=n(7105),i=n(9851),s="["+n(1152)+"]",o=RegExp("^"+s+s+"*"),a=RegExp(s+s+"*$"),c=function(e){return function(t){var n=i(r(t));return 1&e&&(n=n.replace(o,"")),2&e&&(n=n.replace(a,"")),n}};e.exports={start:c(1),end:c(2),trim:c(3)}},7823:(e,t,n)=>{var r,i,s,o,a=n(7230),c=n(3694),l=n(1248),u=n(6507),d=n(2200),h=n(4619),p=n(5009),g=a.setImmediate,f=a.clearImmediate,v=a.process,m=a.MessageChannel,_=a.Dispatch,w=0,y={},b="onreadystatechange";try{r=a.location}catch(R){}var S=function(e){if(y.hasOwnProperty(e)){var t=y[e];delete y[e],t()}},x=function(e){return function(){S(e)}},k=function(e){S(e.data)},E=function(e){a.postMessage(String(e),r.protocol+"//"+r.host)};g&&f||(g=function(e){for(var t=[],n=arguments.length,r=1;n>r;)t.push(arguments[r++]);return y[++w]=function(){("function"==typeof e?e:Function(e)).apply(void 0,t)},i(w),w},f=function(e){delete y[e]},p?i=function(e){v.nextTick(x(e))}:_&&_.now?i=function(e){_.now(x(e))}:m&&!h?(o=(s=new m).port2,s.port1.onmessage=k,i=l(o.postMessage,o,1)):a.addEventListener&&"function"==typeof postMessage&&!a.importScripts&&r&&"file:"!==r.protocol&&!c(E)?(i=E,a.addEventListener("message",k,!1)):i=b in d("script")?function(e){u.appendChild(d("script")).onreadystatechange=function(){u.removeChild(this),S(e)}}:function(e){setTimeout(x(e),0)}),e.exports={set:g,clear:f}},2966:(e,t,n)=>{var r=n(68),i=Math.max,s=Math.min;e.exports=function(e,t){var n=r(e);return n<0?i(n+t,0):s(n,t)}},9164:(e,t,n)=>{var r=n(6801),i=n(7105);e.exports=function(e){return r(i(e))}},68:e=>{var t=Math.ceil,n=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?n:t)(e)}},6092:(e,t,n)=>{var r=n(68),i=Math.min;e.exports=function(e){return e>0?i(r(e),9007199254740991):0}},987:(e,t,n)=>{var r=n(7105);e.exports=function(e){return Object(r(e))}},5962:(e,t,n)=>{var r=n(6913),i=n(7581),s=n(7013),o=n(7952)("toPrimitive");e.exports=function(e,t){if(!r(e)||i(e))return e;var n,a=e[o];if(void 0!==a){if(void 0===t&&(t="default"),n=a.call(e,t),!r(n)||i(n))return n;throw TypeError("Can't convert object to primitive value")}return void 0===t&&(t="number"),s(e,t)}},5831:(e,t,n)=>{var r=n(5962),i=n(7581);e.exports=function(e){var t=r(e,"string");return i(t)?t:String(t)}},6695:(e,t,n)=>{var r={};r[n(7952)("toStringTag")]="z",e.exports="[object z]"===String(r)},9851:(e,t,n)=>{var r=n(7581);e.exports=function(e){if(r(e))throw TypeError("Cannot convert a Symbol value to a string");return String(e)}},4525:e=>{var t=0,n=Math.random();e.exports=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++t+n).toString(36)}},9264:(e,t,n)=>{var r=n(8724);e.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},7952:(e,t,n)=>{var r=n(7230),i=n(3268),s=n(322),o=n(4525),a=n(8724),c=n(9264),l=i("wks"),u=r.Symbol,d=c?u:u&&u.withoutSetter||o;e.exports=function(e){return s(l,e)&&(a||"string"==typeof l[e])||(a&&s(u,e)?l[e]=u[e]:l[e]=d("Symbol."+e)),l[e]}},1152:e=>{e.exports="\t\n\v\f\r \xa0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff"},6025:(e,t,n)=>{"use strict";var r=n(5302),i=n(7945).includes,s=n(186);r({target:"Array",proto:!0},{includes:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),s("includes")},4836:(e,t,n)=>{"use strict";var r=n(9164),i=n(186),s=n(3019),o=n(21),a=n(3392),c="Array Iterator",l=o.set,u=o.getterFor(c);e.exports=a(Array,"Array",(function(e,t){l(this,{type:c,target:r(e),index:0,kind:t})}),(function(){var e=u(this),t=e.target,n=e.kind,r=e.index++;return!t||r>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:t[r],done:!1}:{value:[r,t[r]],done:!1}}),"values"),s.Arguments=s.Array,i("keys"),i("values"),i("entries")},5035:(e,t,n)=>{"use strict";var r=n(5302),i=n(8605).left,s=n(2245),o=n(7806),a=n(5009);r({target:"Array",proto:!0,forced:!s("reduce")||!a&&o>79&&o<83},{reduce:function(e){return i(this,e,arguments.length,arguments.length>1?arguments[1]:void 0)}})},8512:(e,t,n)=>{"use strict";var r=n(5302),i=n(1485),s=n(987),o=n(6092),a=n(9851),c=n(3694),l=n(8813),u=n(2245),d=n(1346),h=n(7636),p=n(7806),g=n(7041),f=[],v=f.sort,m=c((function(){f.sort(void 0)})),_=c((function(){f.sort(null)})),w=u("sort"),y=!c((function(){if(p)return p<70;if(!(d&&d>3)){if(h)return!0;if(g)return g<603;var e,t,n,r,i="";for(e=65;e<76;e++){switch(t=String.fromCharCode(e),e){case 66:case 69:case 70:case 72:n=3;break;case 68:case 71:n=4;break;default:n=2}for(r=0;r<47;r++)f.push({k:t+r,v:n})}for(f.sort((function(e,t){return t.v-e.v})),r=0;r<f.length;r++)t=f[r].k.charAt(0),i.charAt(i.length-1)!==t&&(i+=t);return"DGBEFHACIJK"!==i}}));r({target:"Array",proto:!0,forced:m||!_||!w||!y},{sort:function(e){void 0!==e&&i(e);var t=s(this);if(y)return void 0===e?v.call(t):v.call(t,e);var n,r,c=[],u=o(t.length);for(r=0;r<u;r++)r in t&&c.push(t[r]);for(c=l(c,function(e){return function(t,n){return void 0===n?-1:void 0===t?1:void 0!==e?+e(t,n)||0:a(t)>a(n)?1:-1}}(e)),n=c.length,r=0;r<n;)t[r]=c[r++];for(;r<u;)delete t[r++];return t}})},110:(e,t,n)=>{var r=n(5302),i=n(5016);r({target:"Object",stat:!0,forced:Object.assign!==i},{assign:i})},3481:(e,t,n)=>{"use strict";var r=n(5302),i=n(7442),s=n(3479),o=n(3694),a=n(1223),c=n(640),l=n(8888),u=n(3926);if(r({target:"Promise",proto:!0,real:!0,forced:!!s&&o((function(){s.prototype.finally.call({then:function(){}},(function(){}))}))},{finally:function(e){var t=c(this,a("Promise")),n="function"==typeof e;return this.then(n?function(n){return l(t,e()).then((function(){return n}))}:e,n?function(n){return l(t,e()).then((function(){throw n}))}:e)}}),!i&&"function"==typeof s){var d=a("Promise").prototype.finally;s.prototype.finally!==d&&u(s.prototype,"finally",d,{unsafe:!0})}},5754:(e,t,n)=>{"use strict";var r,i,s,o,a=n(5302),c=n(7442),l=n(7230),u=n(1223),d=n(3479),h=n(3926),p=n(7777),g=n(1403),f=n(5411),v=n(6898),m=n(6913),_=n(1485),w=n(5209),y=n(4335),b=n(5103),S=n(1964),x=n(640),k=n(7823).set,E=n(3012),R=n(8888),T=n(5812),I=n(6935),U=n(7731),A=n(21),P=n(4545),C=n(7952),O=n(417),j=n(5009),L=n(7806),M=C("species"),N="Promise",q=A.get,$=A.set,H=A.getterFor(N),B=d&&d.prototype,F=d,D=B,z=l.TypeError,W=l.document,J=l.process,V=I.f,K=V,G=!!(W&&W.createEvent&&l.dispatchEvent),Q="function"==typeof PromiseRejectionEvent,X="unhandledrejection",Y=!1,Z=P(N,(function(){var e=y(F),t=e!==String(F);if(!t&&66===L)return!0;if(c&&!D.finally)return!0;if(L>=51&&/native code/.test(e))return!1;var n=new F((function(e){e(1)})),r=function(e){e((function(){}),(function(){}))};return(n.constructor={})[M]=r,!(Y=n.then((function(){}))instanceof r)||!t&&O&&!Q})),ee=Z||!S((function(e){F.all(e).catch((function(){}))})),te=function(e){var t;return!(!m(e)||"function"!=typeof(t=e.then))&&t},ne=function(e,t){if(!e.notified){e.notified=!0;var n=e.reactions;E((function(){for(var r=e.value,i=1==e.state,s=0;n.length>s;){var o,a,c,l=n[s++],u=i?l.ok:l.fail,d=l.resolve,h=l.reject,p=l.domain;try{u?(i||(2===e.rejection&&oe(e),e.rejection=1),!0===u?o=r:(p&&p.enter(),o=u(r),p&&(p.exit(),c=!0)),o===l.promise?h(z("Promise-chain cycle")):(a=te(o))?a.call(o,d,h):d(o)):h(r)}catch(g){p&&!c&&p.exit(),h(g)}}e.reactions=[],e.notified=!1,t&&!e.rejection&&ie(e)}))}},re=function(e,t,n){var r,i;G?((r=W.createEvent("Event")).promise=t,r.reason=n,r.initEvent(e,!1,!0),l.dispatchEvent(r)):r={promise:t,reason:n},!Q&&(i=l["on"+e])?i(r):e===X&&T("Unhandled promise rejection",n)},ie=function(e){k.call(l,(function(){var t,n=e.facade,r=e.value;if(se(e)&&(t=U((function(){j?J.emit("unhandledRejection",r,n):re(X,n,r)})),e.rejection=j||se(e)?2:1,t.error))throw t.value}))},se=function(e){return 1!==e.rejection&&!e.parent},oe=function(e){k.call(l,(function(){var t=e.facade;j?J.emit("rejectionHandled",t):re("rejectionhandled",t,e.value)}))},ae=function(e,t,n){return function(r){e(t,r,n)}},ce=function(e,t,n){e.done||(e.done=!0,n&&(e=n),e.value=t,e.state=2,ne(e,!0))},le=function(e,t,n){if(!e.done){e.done=!0,n&&(e=n);try{if(e.facade===t)throw z("Promise can't be resolved itself");var r=te(t);r?E((function(){var n={done:!1};try{r.call(t,ae(le,n,e),ae(ce,n,e))}catch(i){ce(n,i,e)}})):(e.value=t,e.state=1,ne(e,!1))}catch(i){ce({done:!1},i,e)}}};if(Z&&(D=(F=function(e){w(this,F,N),_(e),r.call(this);var t=q(this);try{e(ae(le,t),ae(ce,t))}catch(n){ce(t,n)}}).prototype,(r=function(e){$(this,{type:N,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=p(D,{then:function(e,t){var n=H(this),r=V(x(this,F));return r.ok="function"!=typeof e||e,r.fail="function"==typeof t&&t,r.domain=j?J.domain:void 0,n.parent=!0,n.reactions.push(r),0!=n.state&&ne(n,!1),r.promise},catch:function(e){return this.then(void 0,e)}}),i=function(){var e=new r,t=q(e);this.promise=e,this.resolve=ae(le,t),this.reject=ae(ce,t)},I.f=V=function(e){return e===F||e===s?new i(e):K(e)},!c&&"function"==typeof d&&B!==Object.prototype)){o=B.then,Y||(h(B,"then",(function(e,t){var n=this;return new F((function(e,t){o.call(n,e,t)})).then(e,t)}),{unsafe:!0}),h(B,"catch",D.catch,{unsafe:!0}));try{delete B.constructor}catch(ue){}g&&g(B,D)}a({global:!0,wrap:!0,forced:Z},{Promise:F}),f(F,N,!1,!0),v(N),s=u(N),a({target:N,stat:!0,forced:Z},{reject:function(e){var t=V(this);return t.reject.call(void 0,e),t.promise}}),a({target:N,stat:!0,forced:c||Z},{resolve:function(e){return R(c&&this===s?F:this,e)}}),a({target:N,stat:!0,forced:ee},{all:function(e){var t=this,n=V(t),r=n.resolve,i=n.reject,s=U((function(){var n=_(t.resolve),s=[],o=0,a=1;b(e,(function(e){var c=o++,l=!1;s.push(void 0),a++,n.call(t,e).then((function(e){l||(l=!0,s[c]=e,--a||r(s))}),i)})),--a||r(s)}));return s.error&&i(s.value),n.promise},race:function(e){var t=this,n=V(t),r=n.reject,i=U((function(){var i=_(t.resolve);b(e,(function(e){i.call(t,e).then(n.resolve,r)}))}));return i.error&&r(i.value),n.promise}})},222:(e,t,n)=>{var r=n(6079),i=n(7230),s=n(4545),o=n(8089),a=n(5399),c=n(7108).f,l=n(7852).f,u=n(385),d=n(9851),h=n(8608),p=n(9154),g=n(3926),f=n(3694),v=n(322),m=n(21).enforce,_=n(6898),w=n(7952),y=n(5021),b=n(2916),S=w("match"),x=i.RegExp,k=x.prototype,E=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,R=/a/g,T=/a/g,I=new x(R)!==R,U=p.UNSUPPORTED_Y,A=r&&(!I||U||y||b||f((function(){return T[S]=!1,x(R)!=R||x(T)==T||"/a/i"!=x(R,"i")})));if(s("RegExp",A)){for(var P=function(e,t){var n,r,i,s,c,l,p=this instanceof P,g=u(e),f=void 0===t,_=[],w=e;if(!p&&g&&f&&e.constructor===P)return e;if((g||e instanceof P)&&(e=e.source,f&&(t="flags"in w?w.flags:h.call(w))),e=void 0===e?"":d(e),t=void 0===t?"":d(t),w=e,y&&"dotAll"in R&&(r=!!t&&t.indexOf("s")>-1)&&(t=t.replace(/s/g,"")),n=t,U&&"sticky"in R&&(i=!!t&&t.indexOf("y")>-1)&&(t=t.replace(/y/g,"")),b&&(s=function(e){for(var t,n=e.length,r=0,i="",s=[],o={},a=!1,c=!1,l=0,u="";r<=n;r++){if("\\"===(t=e.charAt(r)))t+=e.charAt(++r);else if("]"===t)a=!1;else if(!a)switch(!0){case"["===t:a=!0;break;case"("===t:E.test(e.slice(r+1))&&(r+=2,c=!0),i+=t,l++;continue;case">"===t&&c:if(""===u||v(o,u))throw new SyntaxError("Invalid capture group name");o[u]=!0,s.push([u,l]),c=!1,u="";continue}c?u+=t:i+=t}return[i,s]}(e),e=s[0],_=s[1]),c=o(x(e,t),p?this:k,P),(r||i||_.length)&&(l=m(c),r&&(l.dotAll=!0,l.raw=P(function(e){for(var t,n=e.length,r=0,i="",s=!1;r<=n;r++)"\\"!==(t=e.charAt(r))?s||"."!==t?("["===t?s=!0:"]"===t&&(s=!1),i+=t):i+="[\\s\\S]":i+=t+e.charAt(++r);return i}(e),n)),i&&(l.sticky=!0),_.length&&(l.groups=_)),e!==w)try{a(c,"source",""===w?"(?:)":w)}catch(S){}return c},C=function(e){e in P||c(P,e,{configurable:!0,get:function(){return x[e]},set:function(t){x[e]=t}})},O=l(x),j=0;O.length>j;)C(O[j++]);k.constructor=P,P.prototype=k,g(i,"RegExp",P)}_("RegExp")},5098:(e,t,n)=>{"use strict";var r=n(5302),i=n(9735);r({target:"RegExp",proto:!0,forced:/./.exec!==i},{exec:i})},6858:(e,t,n)=>{"use strict";var r=n(3926),i=n(3536),s=n(9851),o=n(3694),a=n(8608),c="toString",l=RegExp.prototype,u=l.toString,d=o((function(){return"/a/b"!=u.call({source:"a",flags:"b"})})),h=u.name!=c;(d||h)&&r(RegExp.prototype,c,(function(){var e=i(this),t=s(e.source),n=e.flags;return"/"+t+"/"+s(void 0===n&&e instanceof RegExp&&!("flags"in l)?a.call(e):n)}),{unsafe:!0})},3661:(e,t,n)=>{"use strict";var r,i=n(5302),s=n(5027).f,o=n(6092),a=n(9851),c=n(6487),l=n(7105),u=n(937),d=n(7442),h="".endsWith,p=Math.min,g=u("endsWith");i({target:"String",proto:!0,forced:!!(d||g||(r=s(String.prototype,"endsWith"),!r||r.writable))&&!g},{endsWith:function(e){var t=a(l(this));c(e);var n=arguments.length>1?arguments[1]:void 0,r=o(t.length),i=void 0===n?r:p(o(n),r),s=a(e);return h?h.call(t,s,i):t.slice(i-s.length,i)===s}})},9470:(e,t,n)=>{"use strict";var r=n(5302),i=n(6487),s=n(7105),o=n(9851);r({target:"String",proto:!0,forced:!n(937)("includes")},{includes:function(e){return!!~o(s(this)).indexOf(o(i(e)),arguments.length>1?arguments[1]:void 0)}})},270:(e,t,n)=>{"use strict";var r=n(2370).charAt,i=n(9851),s=n(21),o=n(3392),a="String Iterator",c=s.set,l=s.getterFor(a);o(String,"String",(function(e){c(this,{type:a,string:i(e),index:0})}),(function(){var e,t=l(this),n=t.string,i=t.index;return i>=n.length?{value:void 0,done:!0}:(e=r(n,i),t.index+=e.length,{value:e,done:!1})}))},9544:(e,t,n)=>{"use strict";var r=n(4430),i=n(3694),s=n(3536),o=n(68),a=n(6092),c=n(9851),l=n(7105),u=n(3264),d=n(6968),h=n(5731),p=n(7952)("replace"),g=Math.max,f=Math.min,v="$0"==="a".replace(/./,"$0"),m=!!/./[p]&&""===/./[p]("a","$0");r("replace",(function(e,t,n){var r=m?"$":"$0";return[function(e,n){var r=l(this),i=null==e?void 0:e[p];return void 0!==i?i.call(e,r,n):t.call(c(r),e,n)},function(e,i){var l=s(this),p=c(e);if("string"==typeof i&&-1===i.indexOf(r)&&-1===i.indexOf("$<")){var v=n(t,l,p,i);if(v.done)return v.value}var m="function"==typeof i;m||(i=c(i));var _=l.global;if(_){var w=l.unicode;l.lastIndex=0}for(var y=[];;){var b=h(l,p);if(null===b)break;if(y.push(b),!_)break;""===c(b[0])&&(l.lastIndex=u(p,a(l.lastIndex),w))}for(var S,x="",k=0,E=0;E<y.length;E++){b=y[E];for(var R=c(b[0]),T=g(f(o(b.index),p.length),0),I=[],U=1;U<b.length;U++)I.push(void 0===(S=b[U])?S:String(S));var A=b.groups;if(m){var P=[R].concat(I,T,p);void 0!==A&&P.push(A);var C=c(i.apply(void 0,P))}else C=d(R,p,T,I,A,i);T>=k&&(x+=p.slice(k,T)+C,k=T+R.length)}return x+p.slice(k)}]}),!!i((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}))||!v||m)},7807:(e,t,n)=>{"use strict";var r=n(4430),i=n(385),s=n(3536),o=n(7105),a=n(640),c=n(3264),l=n(6092),u=n(9851),d=n(5731),h=n(9735),p=n(9154),g=n(3694),f=p.UNSUPPORTED_Y,v=[].push,m=Math.min,_=4294967295;r("split",(function(e,t,n){var r;return r="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,n){var r=u(o(this)),s=void 0===n?_:n>>>0;if(0===s)return[];if(void 0===e)return[r];if(!i(e))return t.call(r,e,s);for(var a,c,l,d=[],p=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),g=0,f=new RegExp(e.source,p+"g");(a=h.call(f,r))&&!((c=f.lastIndex)>g&&(d.push(r.slice(g,a.index)),a.length>1&&a.index<r.length&&v.apply(d,a.slice(1)),l=a[0].length,g=c,d.length>=s));)f.lastIndex===a.index&&f.lastIndex++;return g===r.length?!l&&f.test("")||d.push(""):d.push(r.slice(g)),d.length>s?d.slice(0,s):d}:"0".split(void 0,0).length?function(e,n){return void 0===e&&0===n?[]:t.call(this,e,n)}:t,[function(t,n){var i=o(this),s=null==t?void 0:t[e];return void 0!==s?s.call(t,i,n):r.call(u(i),t,n)},function(e,i){var o=s(this),h=u(e),p=n(r,o,h,i,r!==t);if(p.done)return p.value;var g=a(o,RegExp),v=o.unicode,w=(o.ignoreCase?"i":"")+(o.multiline?"m":"")+(o.unicode?"u":"")+(f?"g":"y"),y=new g(f?"^(?:"+o.source+")":o,w),b=void 0===i?_:i>>>0;if(0===b)return[];if(0===h.length)return null===d(y,h)?[h]:[];for(var S=0,x=0,k=[];x<h.length;){y.lastIndex=f?0:x;var E,R=d(y,f?h.slice(x):h);if(null===R||(E=m(l(y.lastIndex+(f?x:0)),h.length))===S)x=c(h,x,v);else{if(k.push(h.slice(S,x)),k.length===b)return k;for(var T=1;T<=R.length-1;T++)if(k.push(R[T]),k.length===b)return k;x=S=E}}return k.push(h.slice(S)),k}]}),!!g((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2!==n.length||"a"!==n[0]||"b"!==n[1]})),f)},217:(e,t,n)=>{"use strict";var r,i=n(5302),s=n(5027).f,o=n(6092),a=n(9851),c=n(6487),l=n(7105),u=n(937),d=n(7442),h="".startsWith,p=Math.min,g=u("startsWith");i({target:"String",proto:!0,forced:!!(d||g||(r=s(String.prototype,"startsWith"),!r||r.writable))&&!g},{startsWith:function(e){var t=a(l(this));c(e);var n=o(p(arguments.length>1?arguments[1]:void 0,t.length)),r=a(e);return h?h.call(t,r,n):t.slice(n,n+r.length)===r}})},200:(e,t,n)=>{"use strict";var r=n(5302),i=n(7011).trim;r({target:"String",proto:!0,forced:n(511)("trim")},{trim:function(){return i(this)}})},8127:(e,t,n)=>{var r=n(7230),i=n(5941),s=n(4836),o=n(5399),a=n(7952),c=a("iterator"),l=a("toStringTag"),u=s.values;for(var d in i){var h=r[d],p=h&&h.prototype;if(p){if(p[c]!==u)try{o(p,c,u)}catch(f){p[c]=u}if(p[l]||o(p,l,d),i[d])for(var g in s)if(p[g]!==s[g])try{o(p,g,s[g])}catch(f){p[g]=s[g]}}}},5979:(e,t,n)=>{"use strict";n(4836);var r=n(5302),i=n(1223),s=n(4169),o=n(3926),a=n(7777),c=n(5411),l=n(1623),u=n(21),d=n(5209),h=n(322),p=n(1248),g=n(996),f=n(3536),v=n(6913),m=n(9851),_=n(6997),w=n(8828),y=n(9853),b=n(6418),S=n(7952),x=i("fetch"),k=i("Request"),E=k&&k.prototype,R=i("Headers"),T=S("iterator"),I="URLSearchParams",U="URLSearchParamsIterator",A=u.set,P=u.getterFor(I),C=u.getterFor(U),O=/\+/g,j=Array(4),L=function(e){return j[e-1]||(j[e-1]=RegExp("((?:%[\\da-f]{2}){"+e+"})","gi"))},M=function(e){try{return decodeURIComponent(e)}catch(t){return e}},N=function(e){var t=e.replace(O," "),n=4;try{return decodeURIComponent(t)}catch(r){for(;n;)t=t.replace(L(n--),M);return t}},q=/[!'()~]|%20/g,$={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},H=function(e){return $[e]},B=function(e){return encodeURIComponent(e).replace(q,H)},F=function(e,t){if(t)for(var n,r,i=t.split("&"),s=0;s<i.length;)(n=i[s++]).length&&(r=n.split("="),e.push({key:N(r.shift()),value:N(r.join("="))}))},D=function(e){this.entries.length=0,F(this.entries,e)},z=function(e,t){if(e<t)throw TypeError("Not enough arguments")},W=l((function(e,t){A(this,{type:U,iterator:y(P(e).entries),kind:t})}),"Iterator",(function(){var e=C(this),t=e.kind,n=e.iterator.next(),r=n.value;return n.done||(n.value="keys"===t?r.key:"values"===t?r.value:[r.key,r.value]),n})),J=function(){d(this,J,I);var e,t,n,r,i,s,o,a,c,l=arguments.length>0?arguments[0]:void 0,u=this,p=[];if(A(u,{type:I,entries:p,updateURL:function(){},updateSearchParams:D}),void 0!==l)if(v(l))if("function"==typeof(e=b(l)))for(n=(t=e.call(l)).next;!(r=n.call(t)).done;){if((o=(s=(i=y(f(r.value))).next).call(i)).done||(a=s.call(i)).done||!s.call(i).done)throw TypeError("Expected sequence with length 2");p.push({key:m(o.value),value:m(a.value)})}else for(c in l)h(l,c)&&p.push({key:c,value:m(l[c])});else F(p,"string"==typeof l?"?"===l.charAt(0)?l.slice(1):l:m(l))},V=J.prototype;if(a(V,{append:function(e,t){z(arguments.length,2);var n=P(this);n.entries.push({key:m(e),value:m(t)}),n.updateURL()},delete:function(e){z(arguments.length,1);for(var t=P(this),n=t.entries,r=m(e),i=0;i<n.length;)n[i].key===r?n.splice(i,1):i++;t.updateURL()},get:function(e){z(arguments.length,1);for(var t=P(this).entries,n=m(e),r=0;r<t.length;r++)if(t[r].key===n)return t[r].value;return null},getAll:function(e){z(arguments.length,1);for(var t=P(this).entries,n=m(e),r=[],i=0;i<t.length;i++)t[i].key===n&&r.push(t[i].value);return r},has:function(e){z(arguments.length,1);for(var t=P(this).entries,n=m(e),r=0;r<t.length;)if(t[r++].key===n)return!0;return!1},set:function(e,t){z(arguments.length,1);for(var n,r=P(this),i=r.entries,s=!1,o=m(e),a=m(t),c=0;c<i.length;c++)(n=i[c]).key===o&&(s?i.splice(c--,1):(s=!0,n.value=a));s||i.push({key:o,value:a}),r.updateURL()},sort:function(){var e,t,n,r=P(this),i=r.entries,s=i.slice();for(i.length=0,n=0;n<s.length;n++){for(e=s[n],t=0;t<n;t++)if(i[t].key>e.key){i.splice(t,0,e);break}t===n&&i.push(e)}r.updateURL()},forEach:function(e){for(var t,n=P(this).entries,r=p(e,arguments.length>1?arguments[1]:void 0,3),i=0;i<n.length;)r((t=n[i++]).value,t.key,this)},keys:function(){return new W(this,"keys")},values:function(){return new W(this,"values")},entries:function(){return new W(this,"entries")}},{enumerable:!0}),o(V,T,V.entries),o(V,"toString",(function(){for(var e,t=P(this).entries,n=[],r=0;r<t.length;)e=t[r++],n.push(B(e.key)+"="+B(e.value));return n.join("&")}),{enumerable:!0}),c(J,I),r({global:!0,forced:!s},{URLSearchParams:J}),!s&&"function"==typeof R){var K=function(e){if(v(e)){var t,n=e.body;if(g(n)===I)return(t=e.headers?new R(e.headers):new R).has("content-type")||t.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),_(e,{body:w(0,String(n)),headers:w(0,t)})}return e};if("function"==typeof x&&r({global:!0,enumerable:!0,forced:!0},{fetch:function(e){return x(e,arguments.length>1?K(arguments[1]):{})}}),"function"==typeof k){var G=function(e){return d(this,G,"Request"),new k(e,arguments.length>1?K(arguments[1]):{})};E.constructor=G,G.prototype=E,r({global:!0,forced:!0},{Request:G})}}e.exports={URLSearchParams:J,getState:P}},4049:(e,t,n)=>{"use strict";n(270);var r,i=n(5302),s=n(6079),o=n(4169),a=n(7230),c=n(7673),l=n(3926),u=n(5209),d=n(322),h=n(5016),p=n(8897),g=n(2370).codeAt,f=n(7137),v=n(9851),m=n(5411),_=n(5979),w=n(21),y=a.URL,b=_.URLSearchParams,S=_.getState,x=w.set,k=w.getterFor("URL"),E=Math.floor,R=Math.pow,T="Invalid scheme",I="Invalid host",U="Invalid port",A=/[A-Za-z]/,P=/[\d+-.A-Za-z]/,C=/\d/,O=/^0x/i,j=/^[0-7]+$/,L=/^\d+$/,M=/^[\dA-Fa-f]+$/,N=/[\0\t\n\r #%/:<>?@[\\\]^|]/,q=/[\0\t\n\r #/:<>?@[\\\]^|]/,$=/^[\u0000-\u0020]+|[\u0000-\u0020]+$/g,H=/[\t\n\r]/g,B=function(e,t){var n,r,i;if("["==t.charAt(0)){if("]"!=t.charAt(t.length-1))return I;if(!(n=D(t.slice(1,-1))))return I;e.host=n}else if(X(e)){if(t=f(t),N.test(t))return I;if(null===(n=F(t)))return I;e.host=n}else{if(q.test(t))return I;for(n="",r=p(t),i=0;i<r.length;i++)n+=G(r[i],W);e.host=n}},F=function(e){var t,n,r,i,s,o,a,c=e.split(".");if(c.length&&""==c[c.length-1]&&c.pop(),(t=c.length)>4)return e;for(n=[],r=0;r<t;r++){if(""==(i=c[r]))return e;if(s=10,i.length>1&&"0"==i.charAt(0)&&(s=O.test(i)?16:8,i=i.slice(8==s?1:2)),""===i)o=0;else{if(!(10==s?L:8==s?j:M).test(i))return e;o=parseInt(i,s)}n.push(o)}for(r=0;r<t;r++)if(o=n[r],r==t-1){if(o>=R(256,5-t))return null}else if(o>255)return null;for(a=n.pop(),r=0;r<n.length;r++)a+=n[r]*R(256,3-r);return a},D=function(e){var t,n,r,i,s,o,a,c=[0,0,0,0,0,0,0,0],l=0,u=null,d=0,h=function(){return e.charAt(d)};if(":"==h()){if(":"!=e.charAt(1))return;d+=2,u=++l}for(;h();){if(8==l)return;if(":"!=h()){for(t=n=0;n<4&&M.test(h());)t=16*t+parseInt(h(),16),d++,n++;if("."==h()){if(0==n)return;if(d-=n,l>6)return;for(r=0;h();){if(i=null,r>0){if(!("."==h()&&r<4))return;d++}if(!C.test(h()))return;for(;C.test(h());){if(s=parseInt(h(),10),null===i)i=s;else{if(0==i)return;i=10*i+s}if(i>255)return;d++}c[l]=256*c[l]+i,2!=++r&&4!=r||l++}if(4!=r)return;break}if(":"==h()){if(d++,!h())return}else if(h())return;c[l++]=t}else{if(null!==u)return;d++,u=++l}}if(null!==u)for(o=l-u,l=7;0!=l&&o>0;)a=c[l],c[l--]=c[u+o-1],c[u+--o]=a;else if(8!=l)return;return c},z=function(e){var t,n,r,i;if("number"==typeof e){for(t=[],n=0;n<4;n++)t.unshift(e%256),e=E(e/256);return t.join(".")}if("object"==typeof e){for(t="",r=function(e){for(var t=null,n=1,r=null,i=0,s=0;s<8;s++)0!==e[s]?(i>n&&(t=r,n=i),r=null,i=0):(null===r&&(r=s),++i);return i>n&&(t=r,n=i),t}(e),n=0;n<8;n++)i&&0===e[n]||(i&&(i=!1),r===n?(t+=n?":":"::",i=!0):(t+=e[n].toString(16),n<7&&(t+=":")));return"["+t+"]"}return e},W={},J=h({},W,{" ":1,'"':1,"<":1,">":1,"`":1}),V=h({},J,{"#":1,"?":1,"{":1,"}":1}),K=h({},V,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),G=function(e,t){var n=g(e,0);return n>32&&n<127&&!d(t,e)?e:encodeURIComponent(e)},Q={ftp:21,file:null,http:80,https:443,ws:80,wss:443},X=function(e){return d(Q,e.scheme)},Y=function(e){return""!=e.username||""!=e.password},Z=function(e){return!e.host||e.cannotBeABaseURL||"file"==e.scheme},ee=function(e,t){var n;return 2==e.length&&A.test(e.charAt(0))&&(":"==(n=e.charAt(1))||!t&&"|"==n)},te=function(e){var t;return e.length>1&&ee(e.slice(0,2))&&(2==e.length||"/"===(t=e.charAt(2))||"\\"===t||"?"===t||"#"===t)},ne=function(e){var t=e.path,n=t.length;!n||"file"==e.scheme&&1==n&&ee(t[0],!0)||t.pop()},re=function(e){return"."===e||"%2e"===e.toLowerCase()},ie={},se={},oe={},ae={},ce={},le={},ue={},de={},he={},pe={},ge={},fe={},ve={},me={},_e={},we={},ye={},be={},Se={},xe={},ke={},Ee=function(e,t,n,i){var s,o,a,c,l,u=n||ie,h=0,g="",f=!1,v=!1,m=!1;for(n||(e.scheme="",e.username="",e.password="",e.host=null,e.port=null,e.path=[],e.query=null,e.fragment=null,e.cannotBeABaseURL=!1,t=t.replace($,"")),t=t.replace(H,""),s=p(t);h<=s.length;){switch(o=s[h],u){case ie:if(!o||!A.test(o)){if(n)return T;u=oe;continue}g+=o.toLowerCase(),u=se;break;case se:if(o&&(P.test(o)||"+"==o||"-"==o||"."==o))g+=o.toLowerCase();else{if(":"!=o){if(n)return T;g="",u=oe,h=0;continue}if(n&&(X(e)!=d(Q,g)||"file"==g&&(Y(e)||null!==e.port)||"file"==e.scheme&&!e.host))return;if(e.scheme=g,n)return void(X(e)&&Q[e.scheme]==e.port&&(e.port=null));g="","file"==e.scheme?u=me:X(e)&&i&&i.scheme==e.scheme?u=ae:X(e)?u=de:"/"==s[h+1]?(u=ce,h++):(e.cannotBeABaseURL=!0,e.path.push(""),u=Se)}break;case oe:if(!i||i.cannotBeABaseURL&&"#"!=o)return T;if(i.cannotBeABaseURL&&"#"==o){e.scheme=i.scheme,e.path=i.path.slice(),e.query=i.query,e.fragment="",e.cannotBeABaseURL=!0,u=ke;break}u="file"==i.scheme?me:le;continue;case ae:if("/"!=o||"/"!=s[h+1]){u=le;continue}u=he,h++;break;case ce:if("/"==o){u=pe;break}u=be;continue;case le:if(e.scheme=i.scheme,o==r)e.username=i.username,e.password=i.password,e.host=i.host,e.port=i.port,e.path=i.path.slice(),e.query=i.query;else if("/"==o||"\\"==o&&X(e))u=ue;else if("?"==o)e.username=i.username,e.password=i.password,e.host=i.host,e.port=i.port,e.path=i.path.slice(),e.query="",u=xe;else{if("#"!=o){e.username=i.username,e.password=i.password,e.host=i.host,e.port=i.port,e.path=i.path.slice(),e.path.pop(),u=be;continue}e.username=i.username,e.password=i.password,e.host=i.host,e.port=i.port,e.path=i.path.slice(),e.query=i.query,e.fragment="",u=ke}break;case ue:if(!X(e)||"/"!=o&&"\\"!=o){if("/"!=o){e.username=i.username,e.password=i.password,e.host=i.host,e.port=i.port,u=be;continue}u=pe}else u=he;break;case de:if(u=he,"/"!=o||"/"!=g.charAt(h+1))continue;h++;break;case he:if("/"!=o&&"\\"!=o){u=pe;continue}break;case pe:if("@"==o){f&&(g="%40"+g),f=!0,a=p(g);for(var _=0;_<a.length;_++){var w=a[_];if(":"!=w||m){var y=G(w,K);m?e.password+=y:e.username+=y}else m=!0}g=""}else if(o==r||"/"==o||"?"==o||"#"==o||"\\"==o&&X(e)){if(f&&""==g)return"Invalid authority";h-=p(g).length+1,g="",u=ge}else g+=o;break;case ge:case fe:if(n&&"file"==e.scheme){u=we;continue}if(":"!=o||v){if(o==r||"/"==o||"?"==o||"#"==o||"\\"==o&&X(e)){if(X(e)&&""==g)return I;if(n&&""==g&&(Y(e)||null!==e.port))return;if(c=B(e,g))return c;if(g="",u=ye,n)return;continue}"["==o?v=!0:"]"==o&&(v=!1),g+=o}else{if(""==g)return I;if(c=B(e,g))return c;if(g="",u=ve,n==fe)return}break;case ve:if(!C.test(o)){if(o==r||"/"==o||"?"==o||"#"==o||"\\"==o&&X(e)||n){if(""!=g){var b=parseInt(g,10);if(b>65535)return U;e.port=X(e)&&b===Q[e.scheme]?null:b,g=""}if(n)return;u=ye;continue}return U}g+=o;break;case me:if(e.scheme="file","/"==o||"\\"==o)u=_e;else{if(!i||"file"!=i.scheme){u=be;continue}if(o==r)e.host=i.host,e.path=i.path.slice(),e.query=i.query;else if("?"==o)e.host=i.host,e.path=i.path.slice(),e.query="",u=xe;else{if("#"!=o){te(s.slice(h).join(""))||(e.host=i.host,e.path=i.path.slice(),ne(e)),u=be;continue}e.host=i.host,e.path=i.path.slice(),e.query=i.query,e.fragment="",u=ke}}break;case _e:if("/"==o||"\\"==o){u=we;break}i&&"file"==i.scheme&&!te(s.slice(h).join(""))&&(ee(i.path[0],!0)?e.path.push(i.path[0]):e.host=i.host),u=be;continue;case we:if(o==r||"/"==o||"\\"==o||"?"==o||"#"==o){if(!n&&ee(g))u=be;else if(""==g){if(e.host="",n)return;u=ye}else{if(c=B(e,g))return c;if("localhost"==e.host&&(e.host=""),n)return;g="",u=ye}continue}g+=o;break;case ye:if(X(e)){if(u=be,"/"!=o&&"\\"!=o)continue}else if(n||"?"!=o)if(n||"#"!=o){if(o!=r&&(u=be,"/"!=o))continue}else e.fragment="",u=ke;else e.query="",u=xe;break;case be:if(o==r||"/"==o||"\\"==o&&X(e)||!n&&("?"==o||"#"==o)){if(".."===(l=(l=g).toLowerCase())||"%2e."===l||".%2e"===l||"%2e%2e"===l?(ne(e),"/"==o||"\\"==o&&X(e)||e.path.push("")):re(g)?"/"==o||"\\"==o&&X(e)||e.path.push(""):("file"==e.scheme&&!e.path.length&&ee(g)&&(e.host&&(e.host=""),g=g.charAt(0)+":"),e.path.push(g)),g="","file"==e.scheme&&(o==r||"?"==o||"#"==o))for(;e.path.length>1&&""===e.path[0];)e.path.shift();"?"==o?(e.query="",u=xe):"#"==o&&(e.fragment="",u=ke)}else g+=G(o,V);break;case Se:"?"==o?(e.query="",u=xe):"#"==o?(e.fragment="",u=ke):o!=r&&(e.path[0]+=G(o,W));break;case xe:n||"#"!=o?o!=r&&("'"==o&&X(e)?e.query+="%27":e.query+="#"==o?"%23":G(o,W)):(e.fragment="",u=ke);break;case ke:o!=r&&(e.fragment+=G(o,J))}h++}},Re=function(e){var t,n,r=u(this,Re,"URL"),i=arguments.length>1?arguments[1]:void 0,o=v(e),a=x(r,{type:"URL"});if(void 0!==i)if(i instanceof Re)t=k(i);else if(n=Ee(t={},v(i)))throw TypeError(n);if(n=Ee(a,o,null,t))throw TypeError(n);var c=a.searchParams=new b,l=S(c);l.updateSearchParams(a.query),l.updateURL=function(){a.query=String(c)||null},s||(r.href=Ie.call(r),r.origin=Ue.call(r),r.protocol=Ae.call(r),r.username=Pe.call(r),r.password=Ce.call(r),r.host=Oe.call(r),r.hostname=je.call(r),r.port=Le.call(r),r.pathname=Me.call(r),r.search=Ne.call(r),r.searchParams=qe.call(r),r.hash=$e.call(r))},Te=Re.prototype,Ie=function(){var e=k(this),t=e.scheme,n=e.username,r=e.password,i=e.host,s=e.port,o=e.path,a=e.query,c=e.fragment,l=t+":";return null!==i?(l+="//",Y(e)&&(l+=n+(r?":"+r:"")+"@"),l+=z(i),null!==s&&(l+=":"+s)):"file"==t&&(l+="//"),l+=e.cannotBeABaseURL?o[0]:o.length?"/"+o.join("/"):"",null!==a&&(l+="?"+a),null!==c&&(l+="#"+c),l},Ue=function(){var e=k(this),t=e.scheme,n=e.port;if("blob"==t)try{return new Re(t.path[0]).origin}catch(r){return"null"}return"file"!=t&&X(e)?t+"://"+z(e.host)+(null!==n?":"+n:""):"null"},Ae=function(){return k(this).scheme+":"},Pe=function(){return k(this).username},Ce=function(){return k(this).password},Oe=function(){var e=k(this),t=e.host,n=e.port;return null===t?"":null===n?z(t):z(t)+":"+n},je=function(){var e=k(this).host;return null===e?"":z(e)},Le=function(){var e=k(this).port;return null===e?"":String(e)},Me=function(){var e=k(this),t=e.path;return e.cannotBeABaseURL?t[0]:t.length?"/"+t.join("/"):""},Ne=function(){var e=k(this).query;return e?"?"+e:""},qe=function(){return k(this).searchParams},$e=function(){var e=k(this).fragment;return e?"#"+e:""},He=function(e,t){return{get:e,set:t,configurable:!0,enumerable:!0}};if(s&&c(Te,{href:He(Ie,(function(e){var t=k(this),n=v(e),r=Ee(t,n);if(r)throw TypeError(r);S(t.searchParams).updateSearchParams(t.query)})),origin:He(Ue),protocol:He(Ae,(function(e){var t=k(this);Ee(t,v(e)+":",ie)})),username:He(Pe,(function(e){var t=k(this),n=p(v(e));if(!Z(t)){t.username="";for(var r=0;r<n.length;r++)t.username+=G(n[r],K)}})),password:He(Ce,(function(e){var t=k(this),n=p(v(e));if(!Z(t)){t.password="";for(var r=0;r<n.length;r++)t.password+=G(n[r],K)}})),host:He(Oe,(function(e){var t=k(this);t.cannotBeABaseURL||Ee(t,v(e),ge)})),hostname:He(je,(function(e){var t=k(this);t.cannotBeABaseURL||Ee(t,v(e),fe)})),port:He(Le,(function(e){var t=k(this);Z(t)||(""==(e=v(e))?t.port=null:Ee(t,e,ve))})),pathname:He(Me,(function(e){var t=k(this);t.cannotBeABaseURL||(t.path=[],Ee(t,v(e),ye))})),search:He(Ne,(function(e){var t=k(this);""==(e=v(e))?t.query=null:("?"==e.charAt(0)&&(e=e.slice(1)),t.query="",Ee(t,e,xe)),S(t.searchParams).updateSearchParams(t.query)})),searchParams:He(qe),hash:He($e,(function(e){var t=k(this);""!=(e=v(e))?("#"==e.charAt(0)&&(e=e.slice(1)),t.fragment="",Ee(t,e,ke)):t.fragment=null}))}),l(Te,"toJSON",(function(){return Ie.call(this)}),{enumerable:!0}),l(Te,"toString",(function(){return Ie.call(this)}),{enumerable:!0}),y){var Be=y.createObjectURL,Fe=y.revokeObjectURL;Be&&l(Re,"createObjectURL",(function(e){return Be.apply(y,arguments)})),Fe&&l(Re,"revokeObjectURL",(function(e){return Fe.apply(y,arguments)}))}m(Re,"URL"),i({global:!0,forced:!o,sham:!s},{URL:Re})},1175:function(e,t,n){var r;e.exports=(r=r||function(e,t){var r;if("undefined"!=typeof window&&window.crypto&&(r=window.crypto),"undefined"!=typeof self&&self.crypto&&(r=self.crypto),"undefined"!=typeof globalThis&&globalThis.crypto&&(r=globalThis.crypto),!r&&"undefined"!=typeof window&&window.msCrypto&&(r=window.msCrypto),!r&&"undefined"!=typeof global&&global.crypto&&(r=global.crypto),!r)try{r=n(6519)}catch(v){}var i=function(){if(r){if("function"==typeof r.getRandomValues)try{return r.getRandomValues(new Uint32Array(1))[0]}catch(v){}if("function"==typeof r.randomBytes)try{return r.randomBytes(4).readInt32LE()}catch(v){}}throw new Error("Native crypto module could not be used to get secure random number.")},s=Object.create||function(){function e(){}return function(t){var n;return e.prototype=t,n=new e,e.prototype=null,n}}(),o={},a=o.lib={},c=a.Base={extend:function(e){var t=s(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},l=a.WordArray=c.extend({init:function(e,n){e=this.words=e||[],this.sigBytes=n!=t?n:4*e.length},toString:function(e){return(e||d).stringify(this)},concat:function(e){var t=this.words,n=e.words,r=this.sigBytes,i=e.sigBytes;if(this.clamp(),r%4)for(var s=0;s<i;s++){var o=n[s>>>2]>>>24-s%4*8&255;t[r+s>>>2]|=o<<24-(r+s)%4*8}else for(var a=0;a<i;a+=4)t[r+a>>>2]=n[a>>>2];return this.sigBytes+=i,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-n%4*8,t.length=e.ceil(n/4)},clone:function(){var e=c.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var t=[],n=0;n<e;n+=4)t.push(i());return new l.init(t,e)}}),u=o.enc={},d=u.Hex={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],i=0;i<n;i++){var s=t[i>>>2]>>>24-i%4*8&255;r.push((s>>>4).toString(16)),r.push((15&s).toString(16))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n[r>>>3]|=parseInt(e.substr(r,2),16)<<24-r%8*4;return new l.init(n,t/2)}},h=u.Latin1={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],i=0;i<n;i++){var s=t[i>>>2]>>>24-i%4*8&255;r.push(String.fromCharCode(s))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r++)n[r>>>2]|=(255&e.charCodeAt(r))<<24-r%4*8;return new l.init(n,t)}},p=u.Utf8={stringify:function(e){try{return decodeURIComponent(escape(h.stringify(e)))}catch(t){throw new Error("Malformed UTF-8 data")}},parse:function(e){return h.parse(unescape(encodeURIComponent(e)))}},g=a.BufferedBlockAlgorithm=c.extend({reset:function(){this._data=new l.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=p.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n,r=this._data,i=r.words,s=r.sigBytes,o=this.blockSize,a=s/(4*o),c=(a=t?e.ceil(a):e.max((0|a)-this._minBufferSize,0))*o,u=e.min(4*c,s);if(c){for(var d=0;d<c;d+=o)this._doProcessBlock(i,d);n=i.splice(0,c),r.sigBytes-=u}return new l.init(n,u)},clone:function(){var e=c.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),f=(a.Hasher=g.extend({cfg:c.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){g.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new f.HMAC.init(e,n).finalize(t)}}}),o.algo={});return o}(Math),r)},4924:function(e,t,n){var r;e.exports=(r=n(1175),function(){var e=r,t=e.lib.WordArray;function n(e,n,r){for(var i=[],s=0,o=0;o<n;o++)if(o%4){var a=r[e.charCodeAt(o-1)]<<o%4*2|r[e.charCodeAt(o)]>>>6-o%4*2;i[s>>>2]|=a<<24-s%4*8,s++}return t.create(i,s)}e.enc.Base64={stringify:function(e){var t=e.words,n=e.sigBytes,r=this._map;e.clamp();for(var i=[],s=0;s<n;s+=3)for(var o=(t[s>>>2]>>>24-s%4*8&255)<<16|(t[s+1>>>2]>>>24-(s+1)%4*8&255)<<8|t[s+2>>>2]>>>24-(s+2)%4*8&255,a=0;a<4&&s+.75*a<n;a++)i.push(r.charAt(o>>>6*(3-a)&63));var c=r.charAt(64);if(c)for(;i.length%4;)i.push(c);return i.join("")},parse:function(e){var t=e.length,r=this._map,i=this._reverseMap;if(!i){i=this._reverseMap=[];for(var s=0;s<r.length;s++)i[r.charCodeAt(s)]=s}var o=r.charAt(64);if(o){var a=e.indexOf(o);-1!==a&&(t=a)}return n(e,t,i)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),r.enc.Base64)},9602:function(e,t,n){var r;e.exports=(r=n(1175),r.enc.Utf8)},9393:function(e,t,n){var r;e.exports=(r=n(1175),function(e){var t=r,n=t.lib,i=n.WordArray,s=n.Hasher,o=t.algo,a=[],c=[];!function(){function t(t){for(var n=e.sqrt(t),r=2;r<=n;r++)if(!(t%r))return!1;return!0}function n(e){return 4294967296*(e-(0|e))|0}for(var r=2,i=0;i<64;)t(r)&&(i<8&&(a[i]=n(e.pow(r,.5))),c[i]=n(e.pow(r,1/3)),i++),r++}();var l=[],u=o.SHA256=s.extend({_doReset:function(){this._hash=new i.init(a.slice(0))},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],i=n[1],s=n[2],o=n[3],a=n[4],u=n[5],d=n[6],h=n[7],p=0;p<64;p++){if(p<16)l[p]=0|e[t+p];else{var g=l[p-15],f=(g<<25|g>>>7)^(g<<14|g>>>18)^g>>>3,v=l[p-2],m=(v<<15|v>>>17)^(v<<13|v>>>19)^v>>>10;l[p]=f+l[p-7]+m+l[p-16]}var _=r&i^r&s^i&s,w=(r<<30|r>>>2)^(r<<19|r>>>13)^(r<<10|r>>>22),y=h+((a<<26|a>>>6)^(a<<21|a>>>11)^(a<<7|a>>>25))+(a&u^~a&d)+c[p]+l[p];h=d,d=u,u=a,a=o+y|0,o=s,s=i,i=r,r=y+(w+_)|0}n[0]=n[0]+r|0,n[1]=n[1]+i|0,n[2]=n[2]+s|0,n[3]=n[3]+o|0,n[4]=n[4]+a|0,n[5]=n[5]+u|0,n[6]=n[6]+d|0,n[7]=n[7]+h|0},_doFinalize:function(){var t=this._data,n=t.words,r=8*this._nDataBytes,i=8*t.sigBytes;return n[i>>>5]|=128<<24-i%32,n[14+(i+64>>>9<<4)]=e.floor(r/4294967296),n[15+(i+64>>>9<<4)]=r,t.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var e=s.clone.call(this);return e._hash=this._hash.clone(),e}});t.SHA256=s._createHelper(u),t.HmacSHA256=s._createHmacHelper(u)}(Math),r.SHA256)},6519:()=>{}},e=>{var t;t=6085,e(e.s=t)}]);