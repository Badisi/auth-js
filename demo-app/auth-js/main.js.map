{"version":3,"file":"main.js","mappings":"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","sources":["webpack:///../../auth-js/core/auth-manager.ts","webpack:///../../auth-js/core/auth-subscriptions.ts","webpack:///../../auth-js/core/main.ts","webpack:///../../auth-js/oidc/main.ts","webpack:///../../auth-js/oidc/mobile/mobile-storage.ts","webpack:///../../auth-js/oidc/models/oidc-auth-settings.model.ts","webpack:///../../auth-js/oidc/models/user-session.model.ts","webpack:///../../auth-js/oidc/oidc-auth-manager.ts","webpack:///./src/app/app.element.ts","webpack:///./src/app/app.settings.ts","webpack:///./src/environments/environment.ts","webpack:///./src/main.ts","webpack:///../common/components/demo-app-debug.element.ts","webpack:///../common/components/demo-app-header.element.ts","webpack:///../common/components/demo-app-main.element.ts","webpack:///../common/components/demo-app-settings.element.ts","webpack:///../common/core/index.ts","webpack:///../common/index.ts","webpack:///../common/services/demo-app-settings.service.ts","webpack:///ignored|/home/runner/work/auth-js/auth-js/node_modules/crypto-js|crypto"],"sourcesContent":["import { AuthSettings } from './models/auth-settings.model';\n\nexport abstract class AuthManager<T extends AuthSettings> {\n    public isCapacitor(): boolean {\n        const capacitor = window.Capacitor;\n        return !!(capacitor?.isNativePlatform());\n    }\n\n    public isCordova(): boolean {\n        return !!(window.cordova || window.phonegap || window.PhoneGap);\n    }\n\n    public isNative(): boolean {\n        return this.isCapacitor() || this.isCordova();\n    }\n\n    public abstract init(settings: T): Promise<unknown> | unknown;\n    public abstract login(...args: unknown[]): Promise<unknown>;\n    public abstract logout(...args: unknown[]): Promise<unknown>;\n    public abstract getSettings(): T | undefined;\n    public abstract isAuthenticated(): Promise<boolean | undefined>;\n}\n","import { AuthSubscriber } from './models/auth-subscriber.model';\nimport { AuthSubscription } from './models/auth-subscription.model';\n\n/**\n * @internal\n */\nexport class AuthSubscriptions<T extends unknown[]> {\n    private subscribers: AuthSubscriber<T>[] = [];\n    private lastNotified?: T;\n\n    public add(subscriber: AuthSubscriber<T>): AuthSubscription {\n        this.subscribers.push(subscriber);\n        if (this.lastNotified) {\n            void subscriber(...this.lastNotified);\n        }\n        return {\n            unsubscribe: () => this.unsubscribe(subscriber)\n        };\n    }\n\n    public notify(...args: T): void {\n        this.lastNotified = args;\n        this.subscribers.forEach(subscriber => void subscriber(...args));\n    }\n\n    public unsubscribe(subscriber?: AuthSubscriber<T>): void {\n        if (subscriber) {\n            const index = this.subscribers.indexOf(subscriber);\n            if (index !== -1) {\n                this.subscribers.splice(index, 1);\n            }\n        } else {\n            this.subscribers = [];\n        }\n    }\n}\n","import { AuthManager } from './auth-manager';\nimport { AuthSettings } from './models/auth-settings.model';\n\nexport const createAuthManager = async <\n    S extends AuthSettings = AuthSettings,\n    M extends AuthManager<S> = AuthManager<S>\n>(settings: S, impl: (new () => M)): Promise<M> => {\n    const manager = new impl();\n    await manager.init(settings);\n    return manager;\n};\n","import { createAuthManager } from '../core/main';\nimport { OIDCAuthSettings } from './models/oidc-auth-settings.model';\nimport { OIDCAuthManager } from './oidc-auth-manager';\n\nexport const initOidc = async (settings: OIDCAuthSettings): Promise<OIDCAuthManager> =>\n    await createAuthManager(settings, OIDCAuthManager);\n","// import { Log } from 'oidc-client-ts';\n\n// TODO: fallback to localStorage if plugin does not exists\nexport class MobileStorage implements Storage {\n    public get length(): number {\n        return 0;\n    }\n\n    public clear(): void {\n        throw new Error('Method not implemented.');\n    }\n\n    public getItem(_key: string): string | null {\n        throw new Error('Method not implemented.');\n    }\n\n    public key(_index: number): string | null {\n        throw new Error('Method not implemented.');\n    }\n\n    public removeItem(_key: string): void {\n        throw new Error('Method not implemented.');\n    }\n\n    public setItem(_key: string, _value: string): void {\n        throw new Error('Method not implemented.');\n    }\n\n    /* private _secureStorage: any;\n\n    set(key: string, value: string): Promise<void> {\n        Log.logger.debug('CordovaPluginSecureStorageEcho.setItem', key);\n        return new Promise(async (resolve) => {\n            const store = await this.getStore();\n            store.set(\n                () => resolve(),\n                (error: any) => {\n                    Log.logger.error(error);\n                    resolve();\n                },\n                key,\n                value\n            );\n        });\n    }\n\n    get(key: string): Promise<string | null> {\n        Log.logger.debug('CordovaPluginSecureStorageEcho.getItem', key);\n        return new Promise(async (resolve) => {\n            const store = await this.getStore();\n            store.get(\n                (value: any) => resolve(value),\n                (error: any) => {\n                    Log.logger.error(error);\n                    resolve(null);\n                },\n                key\n            );\n        });\n    }\n\n    remove(key: string): Promise<string | null> {\n        Log.logger.debug('CordovaPluginSecureStorageEcho.removeItem', key);\n        return new Promise(async (resolve) => {\n            const store = await this.getStore();\n            store.remove(\n                () => resolve(null),\n                (error: any) => {\n                    Log.logger.error(error);\n                    resolve(null);\n                },\n                key\n            );\n        });\n    }\n\n    getAllKeys(): Promise<string[]> {\n        Log.logger.debug('CordovaPluginSecureStorageEcho.getAllKeys');\n        return new Promise(async (resolve) => {\n            const store = await this.getStore();\n            store.keys(\n                (keys: string[]) => resolve(keys),\n                (error: any) => {\n                    Log.logger.error(error);\n                    resolve([]);\n                },\n            );\n        });\n    }\n\n    // --- HELPER(s) ---\n\n    private getStore(): Promise<any> {\n        return new Promise((resolve, reject) => {\n            if (!this._secureStorage) {\n                const cordova = (window as any).cordova;\n                if (cordova && cordova.plugins.SecureStorage) {\n                    const storage = new cordova.plugins.SecureStorage(\n                        () => {\n                            this._secureStorage = storage;\n                            resolve(this._secureStorage);\n                        },\n                        (error: any) => reject(error),\n                        'NGX_AUTH'\n                    );\n                } else {\n                    reject('CordovaPluginSecureStorageEcho: cordova.plugins.SecureStorage is undefined');\n                }\n            } else {\n                resolve(this._secureStorage);\n            }\n        });\n    }*/\n}\n","import { Log, UserManagerSettings } from 'oidc-client-ts';\n\nimport { AuthSettings as CoreAuthSettings } from '../../core';\n\nexport enum Navigation {\n    REDIRECT = 'REDIRECT',\n    POPUP = 'POPUP'\n}\n\n// TODO: check if `monitorSession` and `revokeAccessTokenOnSignout` might be useful too ?\ntype UsefulSettings = 'scope' | 'loadUserInfo' | 'automaticSilentRenew';\n\nexport interface OIDCAuthSettings extends CoreAuthSettings, Pick<UserManagerSettings, UsefulSettings> {\n    authorityUrl: string;\n    clientId: string;\n    schemeUri?: string;\n    loadSession?: boolean;\n    navigationType?: Navigation;\n    logLevel?: Log;\n    internal?: Partial<Omit<UserManagerSettings, UsefulSettings | 'authority' | 'client_id'>>;\n}\n","/* eslint-disable @typescript-eslint/naming-convention, camelcase */\n\nexport class UserSession {\n    public expired?: boolean = void 0;\n    public expires_in?: number = void 0;\n    public expires_at?: number = void 0;\n\n    public static deserialize(data: unknown): UserSession {\n        const ref: UserSession = new UserSession();\n        const keys = Object.keys(ref);\n        // eslint-disable-next-line no-loops/no-loops\n        for (const key of keys) {\n            ref[key as keyof UserSession] = (data as Record<string, unknown>)[key] as (keyof UserSession & undefined);\n        }\n        return ref;\n    }\n}\n","/* eslint-disable @typescript-eslint/restrict-template-expressions, @typescript-eslint/naming-convention, camelcase */\n\nimport jwtDecode from 'jwt-decode';\nimport { merge } from 'lodash-es';\nimport {\n    InMemoryWebStorage, Log, User, UserManager, UserManagerSettings, UserProfile, WebStorageStateStore\n} from 'oidc-client-ts';\n\nimport { AuthManager, AuthSubscriber, AuthSubscription, Optional } from '../core';\nimport { AuthSubscriptions } from '../core/auth-subscriptions';\nimport { MobileStorage } from './mobile/mobile-storage';\nimport { AccessToken } from './models/access-token.model';\nimport { IdToken } from './models/id-token.model';\nimport { Navigation, OIDCAuthSettings } from './models/oidc-auth-settings.model';\nimport { UserSession } from './models/user-session.model';\n\nconst REDIRECT_URL_KEY = 'auth-js:oidc_manager:redirect_url';\n\nconst DEFAULT_SETTINGS: Optional<OIDCAuthSettings, 'authorityUrl' | 'clientId'> = {\n    loginRequired: true,\n    loadSession: true,\n    loadUserInfo: false,\n    automaticSilentRenew: true,\n    navigationType: Navigation.REDIRECT,\n    scope: 'openid profile email phone',\n    logLevel: Log.NONE,\n    internal: {\n        response_type: 'code',\n        redirectMethod: 'replace',\n        redirect_uri: '?oidc-callback=login',\n        post_logout_redirect_uri: '?oidc-callback=logout',\n        popup_redirect_uri: 'oidc/callback/popup_redirect.html',\n        popup_post_logout_redirect_uri: 'oidc/callback/popup_redirect.html',\n        silent_redirect_uri: 'oidc/callback/silent_redirect.html'\n    }\n};\n\nexport class OIDCAuthManager extends AuthManager<OIDCAuthSettings> {\n    private idTokenSubs: AuthSubscriptions<[string | undefined]> = new AuthSubscriptions();\n    private accessTokenSubs: AuthSubscriptions<[string | undefined]> = new AuthSubscriptions();\n    private userProfileSubs: AuthSubscriptions<[UserProfile | undefined]> = new AuthSubscriptions();\n    private userSessionSubs: AuthSubscriptions<[UserSession | undefined]> = new AuthSubscriptions();\n    private authenticatedSubs: AuthSubscriptions<[boolean]> = new AuthSubscriptions();\n    private renewingSubs: AuthSubscriptions<[boolean]> = new AuthSubscriptions();\n    private redirectSubs: AuthSubscriptions<[URL]> = new AuthSubscriptions();\n    private userManagerSubs: (() => void)[] = [];\n\n    private _idToken?: string;\n    private _accessToken?: string;\n    private _userProfile?: UserProfile;\n    private _userSession?: UserSession;\n    private _isAuthenticated?: boolean;\n    private _isRenewing = false;\n\n    private userManager?: UserManager;\n    private settings = DEFAULT_SETTINGS as OIDCAuthSettings;\n\n    private _user?: User | null;\n    private set user(value: User | null | undefined) {\n        if (this._user !== value) {\n            this._user = value;\n\n            this._idToken = (value) ? value.id_token : undefined;\n            this._accessToken = (value) ? value.access_token : undefined;\n            this._userProfile = (value?.profile) ? value.profile : undefined;\n            this._userSession = (value) ? UserSession.deserialize(value) : undefined;\n            this._isAuthenticated = !!(value && !value.expired);\n\n            this.idTokenSubs.notify(this._idToken);\n            this.accessTokenSubs.notify(this._accessToken);\n            this.userProfileSubs.notify(this._userProfile);\n            this.userSessionSubs.notify(this._userSession);\n            this.authenticatedSubs.notify(this._isAuthenticated);\n        }\n    }\n\n    // --- PUBLIC API(s) ---\n\n    public async init(userSettings: OIDCAuthSettings): Promise<void> {\n        Log.setLevel(userSettings.logLevel || DEFAULT_SETTINGS.logLevel || Log.NONE);\n        Log.setLogger(console);\n\n        const isNative = this.isNative();\n        const baseUrl = (isNative) ? `${userSettings.schemeUri}://` : this.getBaseUrl();\n\n        // Initialize settings\n        this.settings = merge({}, DEFAULT_SETTINGS, {\n            internal: {\n                userStore: new WebStorageStateStore({\n                    store: (isNative) ? new MobileStorage() : new InMemoryWebStorage()\n                }),\n                redirect_uri: `${baseUrl}${DEFAULT_SETTINGS.internal?.redirect_uri}`,\n                popup_redirect_uri: `${baseUrl}${DEFAULT_SETTINGS.internal?.popup_redirect_uri}`,\n                post_logout_redirect_uri: `${baseUrl}${DEFAULT_SETTINGS.internal?.post_logout_redirect_uri}`,\n                popup_post_logout_redirect_uri: `${baseUrl}${DEFAULT_SETTINGS.internal?.popup_post_logout_redirect_uri}`,\n                silent_redirect_uri: `${baseUrl}${DEFAULT_SETTINGS.internal?.silent_redirect_uri}`\n            }\n        }, userSettings);\n\n        // Apply some patches\n        this.patchAuth0Logout();\n\n        // Configure the user manager\n        this.userManager = new UserManager({\n            authority: this.settings.authorityUrl,\n            client_id: this.settings.clientId,\n            scope: this.settings.scope,\n            loadUserInfo: this.settings.loadUserInfo,\n            automaticSilentRenew: this.settings.automaticSilentRenew,\n            ...this.settings.internal\n        } as UserManagerSettings);\n\n        // Listen for events\n        this.userManagerSubs.push(\n            this.userManager.events.addUserLoaded(user => {\n                this.user = user;\n            }),\n            this.userManager.events.addUserUnloaded(() => {\n                this.user = null;\n            }),\n            this.userManager.events.addAccessTokenExpired(() => {\n                // Token can expire while the app is in background\n                //   -> try a silent renew in that case and otherwise redirect to home\n                if (this.settings.automaticSilentRenew) {\n                    this.signinSilent().catch(error => this.redirect('/', error));\n                }\n            })\n        );\n\n        // Make sure we are not trapped in the inception loop\n        this.assertNotInInceptionLoop();\n\n        // Decide what to do..\n        if (isNative) {\n            this.installCustomUrlSchemeCallback();\n            /* if (this.settings.autoLoginOnInit) {\n                // Try to load user from storage\n                await this.loadUser();\n\n                // If user credentials have expired -> try a silent renew\n                if (this.user) {\n                    return (!this.user.expired) ? this.userProfile : this.signinSilent();\n                }\n                return null;\n            }*/\n        } else if (this.urlMatching(location.href, this.settings.internal?.redirect_uri)) {\n            await this.backFromLogin();\n        } else if (this.urlMatching(location.href, this.settings.internal?.post_logout_redirect_uri)) {\n            await this.backFromLogout();\n        } else if (this.settings.loadSession) {\n            await this.signinSilent().catch(async (signinSilentError: Error) => {\n                if (this.settings.loginRequired) {\n                    if (signinSilentError.message === 'login_required') {\n                        await this.login();\n                    } else {\n                        throw signinSilentError;\n                    }\n                }\n            });\n        } else if (this.settings.loginRequired) {\n            await this.login();\n        }\n    }\n\n    public async login(redirectUrl = location.href, navigationType?: Navigation): Promise<boolean> {\n        switch (navigationType || this.settings.navigationType) {\n            case Navigation.POPUP:\n                await this.userManager?.signinPopup().catch((error: Error) => {\n                    if (error?.message === 'Attempted to navigate on a disposed window') {\n                        error = new Error('[OIDCAuthManager] Attempted to navigate on a disposed window.');\n                        error.stack = undefined;\n                        error.message += '\\n\\n This may be due to an ad blocker.';\n                    }\n                    throw error;\n                });\n                await this.redirect(redirectUrl);\n                break;\n            default:\n                sessionStorage.setItem(REDIRECT_URL_KEY, redirectUrl);\n                await this.userManager?.signinRedirect();\n                break;\n        }\n        return (this._isAuthenticated === true);\n    }\n\n    public async logout(redirectUrl = location.href, navigationType?: Navigation): Promise<void> {\n        switch (navigationType || this.settings.navigationType) {\n            case Navigation.POPUP:\n                await this.userManager?.signoutPopup();\n                await this.redirect(redirectUrl);\n                break;\n            default:\n                sessionStorage.setItem(REDIRECT_URL_KEY, redirectUrl);\n                await this.userManager?.signoutRedirect();\n                break;\n        }\n    }\n\n    public async renew(): Promise<void> {\n        return this.signinSilent().catch(error => console.error(error));\n    }\n\n    public decodeJwt<T>(value?: string): T | string | undefined {\n        try {\n            if (value) {\n                return jwtDecode<T>(value);\n            }\n            return value;\n        } catch {\n            console.warn('[OIDCAuthManager] Access token was not decoded as it is not a valid JWT.');\n            return value;\n        }\n    }\n\n    public getSettings(): OIDCAuthSettings {\n        return this.settings;\n    }\n\n    public isRenewing(): boolean {\n        return this._isRenewing;\n    }\n\n    public async isAuthenticated(): Promise<boolean | undefined> {\n        await this.waitForRenew('isAuthenticated()');\n        return this._isAuthenticated;\n    }\n\n    public async getUserProfile(): Promise<UserProfile | undefined> {\n        await this.waitForRenew('getUserProfile()');\n        return this._userProfile;\n    }\n\n    public async getUserSession(): Promise<UserSession | undefined> {\n        await this.waitForRenew('getUserSession()');\n        return this._userSession;\n    }\n\n    public async getIdToken(): Promise<string | undefined> {\n        await this.waitForRenew('getIdToken()');\n        return this._idToken;\n    }\n\n    public async getIdTokenDecoded(): Promise<IdToken | string | undefined> {\n        await this.waitForRenew('getIdTokenDecoded()');\n        return this.decodeJwt<IdToken>(this._idToken);\n    }\n\n    public async getAccessToken(): Promise<string | undefined> {\n        await this.waitForRenew('getAccessToken()');\n        return this._accessToken;\n    }\n\n    public async getAccessTokenDecoded(): Promise<AccessToken | string | undefined> {\n        await this.waitForRenew('getAccessTokenDecoded()');\n        return this.decodeJwt<AccessToken>(this._accessToken);\n    }\n\n    // --- DESTROY ---\n\n    public destroy(): void {\n        this.idTokenSubs.unsubscribe();\n        this.accessTokenSubs.unsubscribe();\n        this.userProfileSubs.unsubscribe();\n        this.userSessionSubs.unsubscribe();\n        this.authenticatedSubs.unsubscribe();\n        this.renewingSubs.unsubscribe();\n        this.redirectSubs.unsubscribe();\n        this.userManagerSubs.forEach(unsub => unsub());\n    }\n\n    // --- HANDLER(s) ---\n\n    public onIdTokenChanged(handler: AuthSubscriber<[string | undefined]>): AuthSubscription {\n        return this.idTokenSubs.add(handler);\n    }\n\n    public onAccessTokenChanged(handler: AuthSubscriber<[string | undefined]>): AuthSubscription {\n        return this.accessTokenSubs.add(handler);\n    }\n\n    public onUserProfileChanged(handler: AuthSubscriber<[UserProfile | undefined]>): AuthSubscription {\n        return this.userProfileSubs.add(handler);\n    }\n\n    public onUserSessionChanged(handler: AuthSubscriber<[UserSession | undefined]>): AuthSubscription {\n        return this.userSessionSubs.add(handler);\n    }\n\n    public onAuthenticatedChanged(handler: AuthSubscriber<[boolean]>): AuthSubscription {\n        return this.authenticatedSubs.add(handler);\n    }\n\n    public onRenewingChanged(handler: AuthSubscriber<[boolean]>): AuthSubscription {\n        return this.renewingSubs.add(handler);\n    }\n\n    public onRedirect(handler: AuthSubscriber<[URL]>): AuthSubscription {\n        return this.redirectSubs.add(handler);\n    }\n\n    // --- HELPER(s) ---\n\n    /**\n     *  Scenario :\n     *  1) signinSilent or signinPopup was asked\n     *  2) iframe or popup was created and navigation was made to OP\n     *  3) redirection occurs in iframe or popup\n     *  4) `silent_redirect_uri` or `popup_redirect_uri` is not found\n     *  5) the angular app is loaded in the iframe or popup instead\n     *  6) an inception loop occurs -> app in iframe in iframe in iframe or popup in popup in popup..\n     */\n    private assertNotInInceptionLoop(): void {\n        [this.settings.internal?.silent_redirect_uri, this.settings.internal?.popup_redirect_uri]\n            .forEach(uri => {\n                const htmlFileName = (new RegExp(/^.*\\/(.*).html$/gm).exec(uri || ''))?.[1];\n                const error = new Error(`[OIDCAuthManager] ${uri || 'redirect uri'} was not found.`);\n                error.stack = undefined;\n\n                if (this.urlMatching(location.href, uri)) {\n                    error.message += '\\n\\n This usually means you forgot to include the redirect html files in your application assets.';\n                    throw error;\n                } else if (this.urlMatching(location.href, `/${htmlFileName}.html`)) {\n                    error.message += '\\n\\n This usually means your redirect urls are misconfigured.';\n                    throw error;\n                }\n            });\n    }\n\n    /**\n     *  Scenario example :\n     *  1) isNative = true + app is in background\n     *  2) access token expires\n     *  3) app is brought back to foreground\n     *  4) addAccessTokenExpired event is called\n     *  5) signinSilent is called\n     *  6) in parallel user navigates somewhere and triggers isAuthenticated\n     *  7) isAuthenticated should wait signinSilent to finish before returning\n     */\n    private async waitForRenew(caller: string): Promise<void> {\n        const startTime = new Date().getTime();\n        // eslint-disable-next-line no-loops/no-loops\n        while (this._isRenewing) {\n            if (new Date().getTime() > (startTime + 5000)) {\n                console.warn('[OIDCAuthManager]', caller, 'timed out waiting for renew to finish.');\n                break;\n            }\n            await new Promise(resolve => setTimeout(resolve, 100));\n        }\n    }\n\n    private urlMatching(url1: string, url2?: string): boolean {\n        return ((url2 !== undefined) && url1.includes(url2));\n    }\n\n    private getBaseUrl(): string {\n        const baseUrl = document.baseURI || document.querySelector('base')?.href || location.origin;\n        return (baseUrl.endsWith('/')) ? baseUrl : `${baseUrl}/`;\n    }\n\n    private getURL(url: string): URL {\n        try {\n            return new URL(url);\n        } catch {\n            const pathUrl = (!url.startsWith('/')) ? url : url.substring(1, url.length);\n            return new URL(`${this.getBaseUrl()}${pathUrl}`);\n        }\n    }\n\n    private async redirect(url: string | null, error?: unknown): Promise<void> {\n        if (error) {\n            console.error(error);\n            await this.removeUser();\n        }\n\n        const redirectUrl = this.getURL(url || '/');\n        // History cannot be rewritten when origin is different\n        if (location.origin === redirectUrl.origin) {\n            history.replaceState(history.state, '', redirectUrl.href);\n            this.redirectSubs.notify(redirectUrl);\n        } else {\n            location.href = redirectUrl.href;\n        }\n    }\n\n    private async removeUser(): Promise<void> {\n        this.user = null;\n        await Promise.all([\n            this.userManager?.clearStaleState(),\n            this.userManager?.removeUser()\n        ]);\n    }\n\n    /* private async loadUser(): Promise<void> {\n        this.user = await this.userManager?.getUser();\n    }*/\n\n    private async signinSilent(): Promise<void> {\n        this._isRenewing = true;\n        this.renewingSubs.notify(true);\n\n        try {\n            await this.userManager?.signinSilent();\n        } catch (error) {\n            await this.removeUser();\n            throw error;\n        } finally {\n            this._isRenewing = false;\n            this.renewingSubs.notify(false);\n        }\n    }\n\n    private async backFromLogin(url?: string): Promise<void> {\n        try {\n            await this.userManager?.signinCallback(url);\n            await this.redirect(sessionStorage.getItem(REDIRECT_URL_KEY));\n        } catch (error) {\n            await this.redirect('/', error);\n        } finally {\n            sessionStorage.removeItem(REDIRECT_URL_KEY);\n        }\n    }\n\n    private async backFromLogout(url?: string): Promise<void> {\n        try {\n            await this.userManager?.signoutCallback(url);\n            await this.redirect(sessionStorage.getItem(REDIRECT_URL_KEY));\n            await this.removeUser();\n        } catch (error) {\n            await this.redirect('/', error);\n        } finally {\n            sessionStorage.removeItem(REDIRECT_URL_KEY);\n        }\n    }\n\n    private installCustomUrlSchemeCallback(): void {\n        const onCallback = (url: string): void => {\n            if (this.urlMatching(url, this.settings.internal?.redirect_uri)) {\n                void this.backFromLogin(url);\n            } else if (this.urlMatching(url, this.settings.internal?.post_logout_redirect_uri)) {\n                void this.backFromLogout(url);\n            }\n        };\n\n        if (this.isCapacitor()) {\n            window.Capacitor.addListener('App', 'appUrlOpen', (data: unknown) => {\n                onCallback((data as { url: string }).url);\n            });\n        } else if (this.isCordova()) {\n            window.handleOpenURL = (url: string): void => {\n                onCallback(url);\n            };\n        }\n    }\n\n    // --- PATCHE(s) ---\n\n    /**\n     * Auth0 does not conform to OIDC's logout session and as such does not provide an `end_session_endpoint`.\n     * This patch make sure the `end_session_endpoint` is set in that case.\n     * @see https://github.com/damienbod/angular-auth-oidc-client/issues/1197\n     * @see https://auth0.com/docs/api/authentication#logout\n     */\n    private patchAuth0Logout(): void {\n        if (this.settings.authorityUrl.endsWith('auth0.com')) {\n            const { authorityUrl, clientId, navigationType } = this.settings;\n            const returnTo = (navigationType === Navigation.POPUP) ?\n                this.settings.internal?.popup_post_logout_redirect_uri :\n                this.settings.internal?.post_logout_redirect_uri;\n            this.settings.internal = merge({}, {\n                metadataSeed: {\n                    end_session_endpoint: `${authorityUrl}/v2/logout?client_id=${clientId}&returnTo=${returnTo}`\n                }\n            }, this.settings.internal);\n        }\n    }\n}\n","import { AuthSubscription } from '@badisi/auth-js/core';\nimport { DemoAppDebugElement, DemoAppMainElement, DemoAppSettingsElement } from 'demo-app-common';\n\nimport { environment } from '../environments/environment';\n\nconst template = document.createElement('template');\ntemplate.innerHTML = `\n    <demo-app-main>\n        <demo-app-debug tabLabel=\"Debug\"></demo-app-debug>\n        <demo-app-settings tabLabel=\"Settings\"></demo-app-settings>\n    </demo-app-main>\n`;\n\nexport class AppElement extends HTMLElement {\n    private demoAppMainEl?: DemoAppMainElement;\n    private demoAppDebugEl?: DemoAppDebugElement;\n    private authManagerSubs: AuthSubscription[] = [];\n    private listeners: (() => void)[] = [];\n\n    constructor() {\n        super();\n\n        this.attachShadow({ mode: 'open' });\n        this.shadowRoot?.appendChild(document.importNode(template.content, true));\n    }\n\n    public connectedCallback(): void {\n        this.demoAppMainEl = this.shadowRoot?.querySelector('demo-app-main') as DemoAppMainElement;\n        this.demoAppDebugEl = this.shadowRoot?.querySelector('demo-app-debug') as DemoAppDebugElement;\n\n        const demoAppSettingsEl = this.shadowRoot?.querySelector('demo-app-settings') as DemoAppSettingsElement;\n        demoAppSettingsEl.isDev = !environment.production;\n\n        this.listenForHeaderEvents();\n        this.listenForAuthChanges();\n    }\n\n    public disconnectedCallback(): void {\n        this.authManagerSubs.forEach(sub => sub.unsubscribe());\n        this.listeners.forEach(rm => rm());\n    }\n\n    // --- HELPER(s) ---\n\n    private refreshInfo(key: string, value?: unknown): void {\n        if (window.authManager) {\n            const manager = window.authManager;\n            if (this.demoAppMainEl && this.demoAppDebugEl) {\n                switch (key) {\n                    case 'authenticated':\n                        this.demoAppMainEl.isAuthenticated = value as boolean;\n                        this.demoAppDebugEl.isAuthenticated = value as boolean;\n                        break;\n                    case 'userSession':\n                        this.demoAppDebugEl.userSession = value;\n                        break;\n                    case 'accessToken':\n                        this.demoAppDebugEl.accessToken = value as string;\n                        this.demoAppDebugEl.accessTokenDecoded = manager.decodeJwt(value as string);\n                        break;\n                    case 'idToken':\n                        this.demoAppDebugEl.idToken = value as string;\n                        this.demoAppDebugEl.idTokenDecoded = manager.decodeJwt(value as string);\n                        break;\n                    case 'userProfile':\n                        this.demoAppDebugEl.userProfile = value;\n                        break;\n                    default: break;\n                }\n            }\n        }\n    }\n\n    private listenForAuthChanges(): void {\n        const manager = window.authManager;\n        if (manager) {\n            this.authManagerSubs.push(\n                manager.onAuthenticatedChanged(value => this.refreshInfo('authenticated', value)),\n                manager.onUserSessionChanged(value => this.refreshInfo('userSession', value)),\n                manager.onAccessTokenChanged(value => this.refreshInfo('accessToken', value)),\n                manager.onIdTokenChanged(value => this.refreshInfo('idToken', value)),\n                manager.onUserProfileChanged(value => this.refreshInfo('userProfile', value))\n            );\n        }\n    }\n\n    private listenForHeaderEvents(): void {\n        const manager = window.authManager;\n        if (manager && this.demoAppMainEl) {\n            const login = () => void manager.login();\n            this.demoAppMainEl.addEventListener('login', login);\n\n            const logout = () => void manager.logout('/');\n            this.demoAppMainEl.addEventListener('logout', logout);\n\n            const silentRenew = () => void manager.renew();\n            this.demoAppMainEl.addEventListener('silentRenew', silentRenew);\n\n            this.listeners.push(\n                () => this.demoAppMainEl?.removeEventListener('login', login),\n                () => this.demoAppMainEl?.removeEventListener('logout', logout),\n                () => this.demoAppMainEl?.removeEventListener('silentRenew', silentRenew)\n            );\n        }\n    }\n}\ncustomElements.define('app-root', AppElement);\n","import { Log, Navigation, OIDCAuthSettings } from '@badisi/auth-js/oidc';\nimport { DemoAppSettings, LibrarySettingsDefinitionItem, Settings } from 'demo-app-common';\n\nimport pkgJson from '../../../../auth-js/package.json';\n\nconst settings: Settings<OIDCAuthSettings>[] = [{\n    name: 'Auth0',\n    librarySettings: {\n        authorityUrl: 'https://dev-fijd1e9x.us.auth0.com',\n        clientId: 'kRVVEnAWKMpxxpcodl0TqLXfIHgQvmmt',\n        schemeUri: 'demo-app',\n        scope: 'openid profile email phone read:current_user',\n        internal: {\n            extraQueryParams: {\n                audience: 'https://dev-fijd1e9x.us.auth0.com/api/v2/'\n            }\n        },\n        navigationType: Navigation.REDIRECT,\n        logLevel: Log.NONE,\n        loginRequired: false,\n        loadSession: true,\n        loadUserInfo: true,\n        automaticSilentRenew: true\n    }\n}, {\n    name: 'Keycloak (local)',\n    librarySettings: {\n        authorityUrl: 'http://localhost:8080/auth/realms/demo',\n        clientId: 'demo-app',\n        schemeUri: 'demo-app',\n        scope: 'openid profile email phone',\n        navigationType: Navigation.REDIRECT,\n        logLevel: Log.NONE,\n        loginRequired: false,\n        loadSession: true,\n        loadUserInfo: true,\n        automaticSilentRenew: true\n    }\n}];\n\nconst librarySettingsDefinition: LibrarySettingsDefinitionItem<OIDCAuthSettings>[] = [{\n    name: 'authorityUrl',\n    label: 'Authority url',\n    type: 'string',\n    required: true\n}, {\n    name: 'clientId',\n    label: 'Client id',\n    type: 'string',\n    required: true\n}, {\n    name: 'schemeUri',\n    label: 'Scheme uri',\n    type: 'string'\n}, {\n    name: 'scope',\n    label: 'Scope',\n    type: 'string'\n}, {\n    // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n    // @ts-ignore\n    name: 'internal.extraQueryParams',\n    label: 'Extra query params',\n    type: 'json'\n}, {\n    name: 'navigationType',\n    label: 'Navigation type',\n    type: 'list',\n    values: [{\n        label: 'REDIRECT',\n        value: Navigation.REDIRECT\n    }, {\n        label: 'POPUP',\n        value: Navigation.POPUP\n    }]\n}, {\n    name: 'logLevel',\n    label: 'Log level',\n    type: 'list',\n    values: [{\n        label: 'NONE',\n        value: Log.NONE\n    }, {\n        label: 'ERROR',\n        value: Log.ERROR\n    }, {\n        label: 'WARN',\n        value: Log.WARN\n    }, {\n        label: 'INFO',\n        value: Log.INFO\n    }, {\n        label: 'DEBUG',\n        value: Log.DEBUG\n    }]\n}, {\n    name: 'loginRequired',\n    label: 'Login required',\n    type: 'boolean'\n}, {\n    name: 'loadSession',\n    label: 'Load session',\n    type: 'boolean'\n}, {\n    name: 'loadUserInfo',\n    label: 'Load user info',\n    type: 'boolean'\n}, {\n    name: 'automaticSilentRenew',\n    label: 'Automatic silent renew',\n    type: 'boolean'\n}];\n\nexport const authSettings: DemoAppSettings<OIDCAuthSettings> = new DemoAppSettings(\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access, @typescript-eslint/no-explicit-any\n    `auth-js:${(pkgJson as any).version as string}:demo-app:settings`, {\n        currentImplementationIndex: 0,\n        currentTabIndex: 0,\n        currentSettingsIndex: 0,\n        librarySettingsDefinition,\n        settings\n    });\n","// This file can be replaced during build by using the `fileReplacements` array.\n// When building for production, this file is replaced with `environment.prod.ts`.\n\nexport const environment = {\n    name: 'DEV',\n    production: false\n};\n","import './app/app.element.ts';\n\nimport { initOidc } from '@badisi/auth-js/oidc';\n\nimport { authSettings } from './app/app.settings';\n\nvoid (async (): Promise<void> => {\n    // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n    // @ts-ignore\n    window.authSettings = authSettings;\n    window.authManager = await initOidc(authSettings.getCurrentSettings().librarySettings);\n\n    const template = document.createElement('template');\n    if (await window.authManager.isAuthenticated() || !window.authManager.getSettings().loginRequired) {\n        template.innerHTML = '<app-root></app-root>';\n        document.body.appendChild(document.importNode(template.content, true));\n    } else {\n        template.innerHTML = 'Not authorized<br/><button id=\"loginNotAuthorized\">Login</button>';\n        document.body.appendChild(document.importNode(template.content, true));\n        document.body.querySelector('#loginNotAuthorized')?.addEventListener('click', () => {\n            void window.authManager.login();\n        }, { once: true });\n    }\n})();\n","import { globalStyle, prettyPrint } from '../core';\n\nconst template = document.createElement('template');\ntemplate.innerHTML = `\n    <style>\n        ${globalStyle}\n\n        :host {\n            display: flex;\n            flex: 1;\n            flex-direction: column;\n            padding: 20px 28px;\n        }\n\n        :host .info {\n            margin: 16px;\n        }\n\n        :host .info .title {\n            min-width: 130px;\n        }\n\n        :host .info .value {\n            overflow-x: auto;\n            white-space: pre-wrap;\n            word-wrap: break-word;\n        }\n\n        :host .info code {\n            width: 100%;\n        }\n    </style>\n\n    <div class=\"card\">\n        <div class=\"info column\">\n            <div class=\"title\">Authenticated</div>\n            <code>\n                <pre id=\"isAuthenticated\" class=\"value json-value\"></pre>\n            </code>\n        </div>\n\n        <div class=\"info column\">\n            <div class=\"title\">User session</div>\n            <code>\n                <pre id=\"userSession\" class=\"value\"></pre>\n            </code>\n        </div>\n\n        <div class=\"info column\">\n            <div class=\"title\">Access token</div>\n            <code>\n                <pre id=\"accessToken\" class=\"value json-value\"></pre>\n                <pre id=\"accessTokenDecoded\" class=\"value\"></pre>\n            </code>\n        </div>\n\n        <div class=\"info column\">\n            <div class=\"title\">Id token</div>\n            <code>\n                <pre id=\"idToken\" class=\"value json-value\"></pre>\n                <pre id=\"idTokenDecoded\" class=\"value\"></pre>\n            </code>\n        </div>\n\n        <div class=\"info column\">\n            <div class=\"title\">User profile</div>\n            <code>\n                <pre id=\"userProfile\" class=\"value\"></pre>\n            </code>\n        </div>\n    </div>\n`;\n\nexport class DemoAppDebugElement extends HTMLElement {\n    constructor() {\n        super();\n\n        this.attachShadow({ mode: 'open' });\n        this.shadowRoot?.appendChild(document.importNode(template.content, true));\n\n        // Initialize\n        this.isAuthenticated = false;\n        this.userSession = undefined;\n        this.accessToken = undefined;\n        this.accessTokenDecoded = undefined;\n        this.idToken = undefined;\n        this.idTokenDecoded = undefined;\n        this.userProfile = undefined;\n    }\n\n    public set isAuthenticated(value: boolean | undefined) {\n        this.update('#isAuthenticated', value);\n    }\n\n    public set userSession(value: unknown | undefined) {\n        this.update('#userSession', prettyPrint(value, ['expires_at']));\n    }\n\n    public set accessToken(value: string | undefined) {\n        this.update('#accessToken', value);\n    }\n\n    public set accessTokenDecoded(value: unknown | undefined) {\n        const text = (typeof value !== 'string') ?\n            prettyPrint(value, ['exp', 'iat', 'auth_time']) : '(no decoded info as it is not a JWT token)';\n        this.update('#accessTokenDecoded', text);\n    }\n\n    public set idToken(value: string | undefined) {\n        this.update('#idToken', value);\n    }\n\n    public set idTokenDecoded(value: unknown | undefined) {\n        this.update('#idTokenDecoded', prettyPrint(value, ['exp', 'iat', 'auth_time']));\n    }\n\n    public set userProfile(value: unknown | undefined) {\n        this.update('#userProfile', prettyPrint(value));\n    }\n\n    // --- HELPER(s) ---\n\n    private update(elementName: string, value?: unknown): void {\n        const element = this.shadowRoot?.querySelector(elementName);\n        if (element) {\n            if (value === undefined || value === null || value === '') {\n                element.closest('.info')?.classList.add('hidden');\n            } else {\n                element.closest('.info')?.classList.remove('hidden');\n                element.innerHTML = String(value);\n            }\n        }\n    }\n}\n\nwindow.customElements.define('demo-app-debug', DemoAppDebugElement);\n","import { globalStyle } from '../core';\n\nconst template = document.createElement('template');\ntemplate.innerHTML = `\n    <style>\n        ${globalStyle}\n\n        :host header {\n            position: fixed;\n            top: 0;\n            left: 0;\n            right: 0;\n            align-items: center;\n            height: 110px;\n            color: white;\n            background: rgb(103, 58, 183);\n            background: linear-gradient(180deg, rgba(103, 58, 183, 1) 0%, rgba(94, 53, 177, 1) 100%);\n        }\n\n        :host header .github-icon {\n            position: absolute;\n            top: 20px;\n            right: 22px;\n            width: 26px;\n            height: 26px;\n            color: white;\n        }\n\n        :host header .status.authenticated {\n            background-color: #7CB342;\n        }\n\n        :host header .status {\n            position: absolute;\n            top: 25px;\n            right: 56px;\n            width: 15px;\n            height: 15px;\n            border-radius: 50%;\n            background-color: #EC407A;\n            margin-top: 1px;\n            margin-right: 8px;\n        }\n\n        :host header .title {\n            align-items: center;\n            margin: 10px 0;\n            font-size: 28px;\n            font-weight: 400;\n            color: #ede7f6;\n        }\n\n        :host header .title select {\n            cursor: pointer;\n            text-align: center;\n            font-size: 28px;\n            font-weight: bold;\n            color: #ede7f6;\n            background: none;\n            border: none;\n            outline: none;\n        }\n\n        :host header button {\n            margin-top: 2px;\n        }\n\n        :host header button:not(:last-child) {\n            margin-right: 10px;\n        }\n    </style>\n\n    <header class=\"column\">\n        <div class=\"status\"></div>\n\n        <a class=\"github-icon\"\n            href=\"https://github.com/Badisi/auth-js\"\n            target=\"_blank\"\n            title=\"View it on GitHub\"\n            aria-label=\"GitHub repository\">\n            <span>\n                <svg viewBox=\"0 0 24 24\"\n                    xmlns=\"http://www.w3.org/2000/svg\">\n                    <path fill=\"currentColor\"\n                        d=\"M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12\">\n                    </path>\n                </svg>\n            </span>\n        </a>\n\n        <div class=\"title row\">\n            &#123; <select id=\"implementation-select\"></select> &#125; Demo app\n        </div>\n\n        <div class=\"row\">\n            <button id=\"login-button\">LOGIN</button>\n            <button id=\"logout-button\">LOGOUT</button>\n            <button id=\"silent-renew-button\">SILENT RENEW</button>\n        </div>\n    </header>\n`;\n\nexport class DemoAppHeaderElement extends HTMLElement {\n    private listeners: (() => void)[] = [];\n\n    private statusEl?: HTMLElement | null;\n    private loginButtonEl?: HTMLElement | null;\n    private logoutButtonEl?: HTMLElement | null;\n    private silentRenewButtonEl?: HTMLElement | null;\n\n    constructor() {\n        super();\n\n        this.attachShadow({ mode: 'open' });\n        this.shadowRoot?.appendChild(document.importNode(template.content, true));\n\n        this.statusEl = this.shadowRoot?.querySelector('.status');\n        this.loginButtonEl = this.shadowRoot?.querySelector('#login-button');\n        this.logoutButtonEl = this.shadowRoot?.querySelector('#logout-button');\n        this.silentRenewButtonEl = this.shadowRoot?.querySelector('#silent-renew-button');\n\n        this.refreshStatus(false);\n    }\n\n    public set isAuthenticated(value: boolean) {\n        this.refreshStatus(value);\n    }\n\n    public connectedCallback(): void {\n        const selectEl = this.shadowRoot?.querySelector('#implementation-select') as HTMLSelectElement;\n        window.authSettings.getImplementations().forEach((item, index) => {\n            const optionEl = document.createElement('option');\n            optionEl.selected = (index === window.authSettings.getCurrentImplementationIndex());\n            optionEl.value = String(item.label);\n            optionEl.textContent = item.label;\n            selectEl?.appendChild(optionEl);\n        });\n\n        const changeCb = (): void => {\n            window.authSettings.saveCurrentImplementationIndex(selectEl.selectedIndex);\n            window.location.href = window.authSettings.getImplementations()[selectEl.selectedIndex].url;\n        };\n        selectEl?.addEventListener('change', changeCb);\n        this.listeners.push(() => selectEl.removeEventListener('change', changeCb));\n\n        this.addEventListeners();\n    }\n\n    public disconnectedCallback(): void {\n        this.listeners.forEach(rm => rm());\n    }\n\n    // --- HELPER(s) ---\n\n    private addEventListeners(): void {\n        const login = (): boolean => this.dispatchEvent(new Event('login', { bubbles: true, composed: true }));\n        this.loginButtonEl?.addEventListener('click', login);\n\n        const logout = (): boolean => this.dispatchEvent(new Event('logout', { bubbles: true, composed: true }));\n        this.logoutButtonEl?.addEventListener('click', logout);\n\n        const silentRenew = (): boolean => this.dispatchEvent(new Event('silentRenew', { bubbles: true, composed: true }));\n        this.silentRenewButtonEl?.addEventListener('click', silentRenew);\n\n        this.listeners.push(\n            () => this.loginButtonEl?.removeEventListener('click', login),\n            () => this.logoutButtonEl?.removeEventListener('click', logout),\n            () => this.silentRenewButtonEl?.removeEventListener('click', silentRenew)\n        );\n    }\n\n    private refreshStatus(value: boolean): void {\n        if (this.statusEl) {\n            this.statusEl.title = (value) ? 'Authenticated' : 'Not authenticated';\n            this.statusEl.classList[(value) ? 'add' : 'remove']('authenticated');\n        }\n    }\n}\n\nwindow.customElements.define('demo-app-header', DemoAppHeaderElement);\n","import { globalStyle } from '../core';\nimport { DemoAppHeaderElement } from './demo-app-header.element';\n\nconst template = document.createElement('template');\ntemplate.innerHTML = `\n    <style>\n        ${globalStyle}\n\n        :host .tabs {\n            position: fixed;\n            top: 110px;\n            left: 0;\n            right: 0;\n            z-index: 1;\n            align-self: normal;\n            padding: 10px 0;\n            padding-left: 36px;\n            background-color: #7043bf;\n            box-shadow: 0 3px 5px -1px #0003, 0 6px 10px #00000024, 0 1px 18px #0000001f;\n        }\n\n        :host .tabs a {\n            cursor: pointer;\n            color: white;\n            padding: 8px 16px;\n            border-radius: 4px;\n            transition: background-color 150ms cubic-bezier(0.35, 0, 0.25, 1);\n        }\n\n        :host .tabs a.selected {\n            background-color: #512da8;\n        }\n\n        :host .tabs a:hover {\n            background-color: #4527a0;\n        }\n\n        :host .tabs a:not(:last-child) {\n            margin-right: 10px;\n        }\n\n        :host .tabs-content {\n            position: fixed;\n            top: 165px;\n            left: 0;\n            right: 0;\n            bottom: 0;\n            overflow: auto;\n        }\n\n        @media only screen and (max-width: 600px) {\n            :host .tabs {\n                padding-left: 0;\n                justify-content: center;\n            }\n        }\n    </style>\n\n    <demo-app-header></demo-app-header>\n    <nav id=\"tabs\" class=\"tabs row\"></nav>\n    <div class=\"tabs-content\">\n        <slot id=\"views\"></slot>\n    </div>\n`;\n\nexport class DemoAppMainElement extends HTMLElement {\n    private listeners: (() => void)[] = [];\n\n    private tabsContentEl?: HTMLElement;\n\n    private tabs: HTMLElement[] = [];\n    private views: HTMLElement[] = [];\n    private currentTabIndex = -1;\n\n    constructor() {\n        super();\n\n        this.attachShadow({ mode: 'open' });\n        this.shadowRoot?.appendChild(document.importNode(template.content, true));\n    }\n\n    public set isAuthenticated(value: boolean) {\n        const demoAppHeader = this.shadowRoot?.querySelector('demo-app-header') as DemoAppHeaderElement;\n        demoAppHeader.isAuthenticated = value;\n    }\n\n    public connectedCallback(): void {\n        this.tabsContentEl = this.shadowRoot?.querySelector('.tabs-content') as HTMLElement;\n        this.drawTabs();\n\n        const settings = window.authSettings;\n        this.showView(settings ? settings.getCurrentTabIndex() : 0);\n    }\n\n    public disconnectedCallback(): void {\n        this.listeners.forEach(rm => rm());\n    }\n\n    // --- HELPER(s) ---\n\n    private drawTabs(): void {\n        const viewsEl = this.shadowRoot?.querySelector('#views') as HTMLSlotElement;\n        const tabsEl = this.shadowRoot?.querySelector('#tabs') as HTMLElement;\n        if (viewsEl && tabsEl) {\n            this.views = viewsEl.assignedElements() as HTMLElement[];\n            this.views.forEach((view, index) => {\n                // Hide view by default\n                view.style.display = 'none';\n\n                // Create associated tab\n                const tab = document.createElement('a');\n                tab.textContent = view.getAttribute('tabLabel') || '?';\n                const cb = (): void => this.showView(index);\n                tab.addEventListener('click', cb);\n                this.listeners.push(() => tab.removeEventListener('click', cb));\n                tabsEl.appendChild(tab);\n\n                // Add it to collection\n                this.tabs.push(tab);\n            });\n        }\n    }\n\n    private showView(index: number): void {\n        if (this.currentTabIndex !== index) {\n            this.currentTabIndex = index;\n\n            this.tabs.forEach((tab, i) => {\n                tab.classList[(i !== index) ? 'remove' : 'add']('selected');\n            });\n            this.views.forEach((view, i) => {\n                view.style.display = (i !== index) ? 'none' : 'flex';\n            });\n            this.tabsContentEl?.scrollTo(0, 0);\n\n            window.authSettings?.saveCurrentTabIndex(index);\n        }\n    }\n}\n\nwindow.customElements.define('demo-app-main', DemoAppMainElement);\n","/* eslint-disable @typescript-eslint/no-unsafe-assignment, @typescript-eslint/no-unsafe-member-access, @typescript-eslint/no-explicit-any */\n\nimport { AuthSettings } from '@badisi/auth-js/core';\nimport { OIDCAuthSettings } from '@badisi/auth-js/oidc';\n\nimport { globalStyle } from '../core';\n\nconst template = document.createElement('template');\ntemplate.innerHTML = `\n    <style>\n        ${globalStyle}\n\n        :host {\n            display: flex;\n            flex: 1;\n            flex-direction: column;\n            padding: 20px 28px;\n        }\n\n        :host .card {\n            padding: 16px;\n        }\n\n        :host .form-content > * {\n            margin-bottom: 24px;\n        }\n\n        :host .form-content label {\n            margin-bottom: 8px;\n        }\n\n        :host .form-actions {\n            padding: 0 8px;\n            align-items: center;\n        }\n\n        :host .form-actions button {\n            padding: 2px 12px;\n        }\n\n        :host .form-actions button:not(:last-of-type) {\n            margin-right: 12px;\n        }\n\n        :host(.dirty) .form-actions #apply-settings-button,\n        :host(.dirty) .form-actions #cancel-settings-button {\n            display: flex !important;\n        }\n    </style>\n\n    <form class=\"column\">\n        <div class=\"form-content card flex\"></div>\n\n        <div class=\"form-actions row\">\n            <div id=\"reset-settings-dev\" class=\"hidden\">\n                RESET DEFAULT TO:\n                <select id=\"reset-settings-select\">\n                    <option value disabled selected>Choose an option</option>\n                </select>\n            </div>\n            <button id=\"reset-settings-button\" type=\"button\">RESET TO DEFAULT</button>\n            <span class=\"flex\"></span>\n            <button id=\"apply-settings-button\" type=\"submit\" class=\"hidden\">APPLY</button>\n            <button id=\"cancel-settings-button\" type=\"button\" class=\"hidden\">CANCEL</button>\n        </div>\n    </form>\n`;\n\nexport class DemoAppSettingsElement extends HTMLElement {\n    private listeners: (() => void)[] = [];\n\n    private formEl!: HTMLFormElement;\n    private resetEl!: HTMLButtonElement;\n    private resetDevEl!: HTMLElement;\n    private formContentEl!: HTMLElement;\n    private formIsDirty = false;\n\n    constructor() {\n        super();\n\n        this.attachShadow({ mode: 'open' });\n        this.shadowRoot?.appendChild(document.importNode(template.content, true));\n\n        this.resetEl = this.shadowRoot?.querySelector('#reset-settings-button') as HTMLButtonElement;\n        this.resetDevEl = this.shadowRoot?.querySelector('#reset-settings-dev') as HTMLElement;\n        this.isDev = false;\n    }\n\n    public set isDev(value: boolean) {\n        if (value) {\n            this.resetDevEl?.classList.remove('hidden');\n            this.resetEl?.classList.add('hidden');\n        } else {\n            this.resetDevEl?.classList.add('hidden');\n            this.resetEl?.classList.remove('hidden');\n        }\n    }\n\n    public connectedCallback(): void {\n        this.formEl = this.shadowRoot?.querySelector('form') as HTMLFormElement;\n        this.formContentEl = this.shadowRoot?.querySelector('.form-content') as HTMLElement;\n\n        // Form events\n        this.formEl.onsubmit = (): boolean => false;\n        this.formEl.addEventListener('submit', () => this.saveAndReload(), { once: true });\n\n        const inputCb = (e: Event): void => {\n            if (!this.formIsDirty && ((e.target as HTMLElement).id !== 'reset-settings-select')) {\n                this.formIsDirty = true;\n                this.classList.add('dirty');\n            }\n        };\n        this.formEl.addEventListener('input', inputCb);\n        this.listeners.push(() => this.formEl.removeEventListener('input', inputCb));\n\n        // Reset\n        this.resetEl?.addEventListener('click', () => this.resetAndReload(), { once: true });\n\n        const resetSelectEl = this.shadowRoot?.querySelector('#reset-settings-select') as HTMLSelectElement;\n        window.authSettings?.getSettings().forEach(item => {\n            const optionEl = document.createElement('option');\n            optionEl.value = String(item.name);\n            optionEl.textContent = item.name;\n            resetSelectEl?.appendChild(optionEl);\n        });\n        const changeCb = (): void => this.resetAndReload(resetSelectEl.value);\n        resetSelectEl?.addEventListener('change', changeCb);\n        this.listeners.push(() => resetSelectEl.removeEventListener('change', changeCb));\n\n        // Cancel\n        const cancelEl = this.shadowRoot?.querySelector('#cancel-settings-button');\n        const cancelCb = (): void => this.cancel();\n        cancelEl?.addEventListener('click', cancelCb);\n        this.listeners.push(() => cancelEl?.removeEventListener('click', cancelCb));\n\n        // Initialize form\n        this.refreshFormContent();\n    }\n\n    public disconnectedCallback(): void {\n        this.listeners.forEach(rm => rm());\n    }\n\n    // --- HANDLER(s) ---\n\n    private resetAndReload(settingsName?: string): void {\n        window.authSettings?.resetCurrentSettings(settingsName);\n        location.reload();\n    }\n\n    private cancel(): void {\n        this.formIsDirty = false;\n        this.classList.remove('dirty');\n        this.refreshFormContent();\n    }\n\n    // --- HELPER(s) ---\n\n    private setPathValue(settings: AuthSettings, path: string, value: unknown): void {\n        const props = path.split('.');\n        props.reduce((obj, prop, index) => {\n            if (index === (props.length - 1)) {\n                (obj as any)[prop] = value;\n            } else if (!Object.prototype.hasOwnProperty.call(obj, prop)) {\n                (obj as any)[prop] = {};\n                // eslint-disable-next-line @typescript-eslint/no-unsafe-return\n                return (obj as any)[prop];\n            }\n            return obj;\n        }, settings);\n    }\n\n    private getPathValue<S>(settings: AuthSettings, path: string): S {\n        return path.split('.').reduce((obj, prop) =>\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-return\n            (obj) ? (obj as any)[prop] : obj\n        , settings) as S;\n    }\n\n    private refreshFormContent(): void {\n        // Clear the page\n        this.formContentEl.innerHTML = '';\n\n        // Draw the form\n        window.authSettings.getLibrarySettingsDefinition()\n            .sort((a, b) => (b._index || 0) - (a._index || 0))\n            .forEach(item => {\n                const formItemContainerEl = document.createElement('div');\n                this.formContentEl.prepend(formItemContainerEl);\n\n                const formItemLabelEl = document.createElement('label');\n                formItemLabelEl.htmlFor = item.name.replace('.', '');\n                formItemLabelEl.textContent = `${item.label}${item.required ? ' *' : ''}`;\n\n                const formItemEl = document.createElement((item.type === 'list') ? 'select' : 'input');\n                formItemEl.id = item.name.replace('.', '');\n                formItemEl.name = item.name.replace('.', '');\n                formItemEl.required = (item.required === true);\n\n                const librarySettings = window.authSettings.getCurrentSettings().librarySettings;\n                switch (item.type) {\n                    case 'boolean':\n                        (formItemEl as HTMLInputElement).checked = this.getPathValue(librarySettings, item.name);\n                        (formItemEl as HTMLInputElement).type = 'checkbox';\n                        formItemContainerEl.appendChild(formItemEl);\n                        formItemContainerEl.appendChild(formItemLabelEl);\n                        break;\n                    case 'list':\n                        item.values?.forEach(option => {\n                            const optionEl = document.createElement('option');\n                            optionEl.value = String(option.value);\n                            optionEl.textContent = option.label;\n                            formItemEl.appendChild(optionEl);\n                        });\n                        formItemEl.value = this.getPathValue(librarySettings, item.name);\n                        formItemEl.classList.add('flex');\n                        formItemContainerEl.classList.add('input', 'column');\n                        formItemContainerEl.appendChild(formItemLabelEl);\n                        formItemContainerEl.appendChild(formItemEl);\n                        break;\n                    default: {\n                        const value: string = this.getPathValue(librarySettings, item.name);\n                        if (item.type === 'json') {\n                            formItemEl.value = (value) ? JSON.stringify(value) : '';\n                        } else {\n                            formItemEl.value = value;\n                        }\n                        formItemContainerEl.classList.add('input', 'column');\n                        formItemContainerEl.appendChild(formItemLabelEl);\n                        formItemContainerEl.appendChild(formItemEl);\n                        break;\n                    }\n                }\n            });\n    }\n\n    private saveAndReload(): void {\n        if (this.formEl.reportValidity()) {\n            const settings = {};\n            window.authSettings.getLibrarySettingsDefinition()\n                .forEach(item => {\n                    const formItemEl = this.shadowRoot?.querySelector(`#${item.name.replace('.', '')}`);\n                    let value;\n                    switch (item.type) {\n                        case 'boolean':\n                            value = (formItemEl as HTMLInputElement).checked;\n                            break;\n                        case 'list':\n                            value = (formItemEl as HTMLSelectElement).value;\n                            break;\n                        case 'json':\n                            try {\n                                const val = (formItemEl as HTMLInputElement).value;\n                                if (val && (val.trim() !== '')) {\n                                    value = JSON.parse(val);\n                                }\n                            } catch (err) {\n                                console.error(err);\n                            }\n                            break;\n                        default:\n                            value = (formItemEl as HTMLInputElement).value;\n                            break;\n                    }\n                    this.setPathValue(settings, item.name, value);\n                });\n            window.authSettings?.saveCurrentLibrarySettings(settings as OIDCAuthSettings);\n            location.reload();\n        }\n    }\n}\n\nwindow.customElements.define('demo-app-settings', DemoAppSettingsElement);\n","import { OIDCAuthManager } from '@badisi/auth-js/oidc';\n\nimport { DemoAppSettings } from '../services/demo-app-settings.service';\n\ndeclare global {\n    interface Window {\n        authSettings: DemoAppSettings;\n        authManager: OIDCAuthManager;\n    }\n}\n\nexport const globalStyle = `\n    .flex {\n        flex: 1;\n    }\n\n    .hidden {\n        display: none !important;\n    }\n\n    .row {\n        display: flex;\n        flex-direction: row;\n    }\n\n    .column {\n        display: flex;\n        flex-direction: column;\n    }\n\n    .card {\n        border: 1px solid rgba(0, 0, 0, 0.12);\n        border-radius: 4px;\n        background-color: white;\n        margin: 12px 6px;\n    }\n\n    .card-title {\n        padding: 16px;\n        font-size: 20px;\n        font-weight: 500;\n        color: rgba(0, 0, 0, 0.87);\n        align-items: center;\n    }\n\n    .json-key {\n        color: rgb(124, 77, 255);\n    }\n\n    .json-value {\n        color: rgb(67, 122, 237);\n    }\n\n    .json-string {\n        color: rgb(83, 160, 83);\n    }\n\n    .json-date {\n        color: rgb(200, 56, 198);\n    }\n\n    input {\n        color: #5e35b1;\n        padding: 10px;\n        border: 1px solid #0000001f;\n        border-radius: 4px;\n        font-size: 14px;\n    }\n\n    input:invalid {\n        border-color: #f44336;\n    }\n\n    input[type=\"checkbox\"] {\n        margin-right: 10px;\n    }\n\n    select {\n        color: #5e35b1;\n        padding: 8px 6px;\n        border: 1px solid #0000001f;\n        border-radius: 4px;\n    }\n\n    @media only screen and (max-width: 600px) {\n        :host {\n            padding: 0 !important;\n        }\n\n        :host .card {\n            border: 0;\n            margin: 0;\n        }\n    }\n`;\n\nexport const prettyPrint = (value: unknown, dateAttrs: string[] = []): string => {\n    const jsonLine = /^( *)(\"[\\w-]+\": )?(\"[^\"]*\"|[\\w.+-]*)?([,[{])?$/mg;\n    const replacer = (_match: string, pIndent: string, pKey: string, pVal: string, pEnd: string): string => {\n        let r = pIndent || '';\n        const key = (pKey) ? pKey.replace(/[\": ]/g, '') : undefined;\n        if (key) {\n            r += `<span class=\"json-key\">${key}</span>: `;\n        }\n        if (pVal) {\n            r += `<span class=\"${pVal.startsWith('\"') ? 'json-string' : 'json-value'}\">${pVal}</span>`;\n            if (key && dateAttrs.includes(key)) {\n                const date = new Date(Number(pVal) * 1000);\n                const pValAsDate = `${date.toDateString()}, ${date.toLocaleTimeString()}`;\n                if (pValAsDate) {\n                    r += ` <span class=\"json-date\">(${pValAsDate})</span>`;\n                }\n            }\n        }\n        return r + (pEnd || '');\n    };\n    return (value) ? JSON.stringify(value, null, 2)\n        .replace(/&/g, '&amp;').replace(/\\\\\"/g, '&quot;')\n        .replace(/</g, '&lt;').replace(/>/g, '&gt;')\n        .replace(jsonLine, replacer) : '';\n};\n","export * from './components/demo-app-header.element';\nexport * from './components/demo-app-main.element';\nexport * from './components/demo-app-debug.element';\nexport * from './components/demo-app-settings.element';\nexport * from './services/demo-app-settings.service';\nexport * from './core';\n","import { AuthSettings } from '@badisi/auth-js/core';\n\nexport interface Implementation {\n    label: string;\n    url: string;\n}\n\nexport interface Settings<S extends AuthSettings = AuthSettings> {\n    name: string;\n    librarySettings: S;\n    otherSettings?: Record<string, unknown>;\n}\n\nexport interface LibrarySettingsDefinitionItem<S extends AuthSettings = AuthSettings>{\n    _index?: number;\n    name: keyof S;\n    label: string;\n    type: 'string' | 'boolean' | 'list' | 'json';\n    required?: boolean;\n    values?: { label: string; value: unknown }[];\n}\n\nexport interface AppSettings<S extends AuthSettings = AuthSettings> {\n    currentImplementationIndex: number;\n    currentTabIndex: number;\n    currentSettingsIndex: number;\n    librarySettingsDefinition: LibrarySettingsDefinitionItem<S>[];\n    settings: Settings<S>[];\n}\n\nexport class DemoAppSettings<S extends AuthSettings = AuthSettings> {\n    private implementations = [{\n        label: 'auth-js',\n        url: 'https://badisi.github.io/auth-js/demo-app/auth-js'\n    }, {\n        label: 'ngx-auth',\n        url: 'https://badisi.github.io/auth-js/demo-app/ngx-auth'\n    }];\n\n    constructor(\n        private storageKey: string,\n        private defaultAppSettings: AppSettings<S>\n    ) {\n        this.defaultAppSettings.librarySettingsDefinition.forEach((item, index) => item._index = index);\n    }\n\n    public getCurrentImplementationIndex(): number {\n        return this.getAppSettings().currentImplementationIndex;\n    }\n\n    public saveCurrentImplementationIndex(index: number): void {\n        const appSettings = this.getAppSettings();\n        appSettings.currentImplementationIndex = index;\n        this.saveAppSettings(appSettings);\n    }\n\n    public getCurrentTabIndex(): number {\n        return this.getAppSettings().currentTabIndex;\n    }\n\n    public saveCurrentTabIndex(index: number): void {\n        const appSettings = this.getAppSettings();\n        appSettings.currentTabIndex = index;\n        this.saveAppSettings(appSettings);\n    }\n\n    public getImplementations(): Implementation[] {\n        return this.implementations;\n    }\n\n    public getSettings(): Settings<S>[] {\n        return this.getAppSettings().settings;\n    }\n\n    public getCurrentSettings(): Settings<S> {\n        const appSettings = this.getAppSettings();\n        return appSettings.settings[appSettings.currentSettingsIndex];\n    }\n\n    public resetCurrentSettings(settingsName?: string): void {\n        const appSettings = this.getAppSettings();\n        let index = appSettings.currentSettingsIndex;\n        if (settingsName) {\n            const findIndex = appSettings.settings.findIndex(s => s.name === settingsName);\n            if (findIndex !== -1) {\n                index = findIndex;\n            }\n        }\n        appSettings.settings[index] = this.defaultAppSettings.settings[index];\n        appSettings.currentSettingsIndex = index;\n        this.saveAppSettings(appSettings);\n    }\n\n    public getLibrarySettingsDefinition(): LibrarySettingsDefinitionItem<S>[] {\n        return this.getAppSettings().librarySettingsDefinition;\n    }\n\n    public saveCurrentLibrarySettings(value: S): void {\n        const appSettings = this.getAppSettings();\n        appSettings.settings[appSettings.currentSettingsIndex].librarySettings = value;\n        this.saveAppSettings(appSettings);\n    }\n\n    public saveCurrentOtherSettings(value: Record<string, unknown>): void {\n        const appSettings = this.getAppSettings();\n        appSettings.settings[appSettings.currentSettingsIndex].otherSettings = value;\n        this.saveAppSettings(appSettings);\n    }\n\n    // --- HELPER(s) ---\n\n    private saveAppSettings(settings: AppSettings<S>): void {\n        sessionStorage.setItem(this.storageKey, JSON.stringify(settings));\n    }\n\n    private getAppSettings(): AppSettings<S> {\n        const data = sessionStorage.getItem(this.storageKey);\n        if (data) {\n            return JSON.parse(data) as AppSettings<S>;\n        }\n        return this.defaultAppSettings;\n    }\n}\n","/* (ignored) */"],"names":["AuthManager","isCapacitor","capacitor","window","Capacitor","isNativePlatform","isCordova","cordova","phonegap","PhoneGap","isNative","AuthSubscriptions","subscribers","lastNotified","add","subscriber","push","unsubscribe","notify","args","forEach","index","indexOf","splice","createAuthManager","settings","impl","manager","init","OIDCAuthManager","initOidc","MobileStorage","length","clear","Error","getItem","_key","key","_index","removeItem","setItem","_value","Navigation","UserSession","expired","expires_in","expires_at","deserialize","data","ref","keys","Object","jwtDecode","merge","InMemoryWebStorage","Log","UserManager","WebStorageStateStore","REDIRECT_URL_KEY","DEFAULT_SETTINGS","loginRequired","loadSession","loadUserInfo","automaticSilentRenew","navigationType","REDIRECT","scope","logLevel","NONE","internal","response_type","redirectMethod","redirect_uri","post_logout_redirect_uri","popup_redirect_uri","popup_post_logout_redirect_uri","silent_redirect_uri","idTokenSubs","accessTokenSubs","userProfileSubs","userSessionSubs","authenticatedSubs","renewingSubs","redirectSubs","userManagerSubs","_idToken","_accessToken","_userProfile","_userSession","_isAuthenticated","_isRenewing","userManager","_user","user","value","id_token","undefined","access_token","profile","userSettings","setLevel","setLogger","console","baseUrl","schemeUri","getBaseUrl","userStore","store","patchAuth0Logout","authority","authorityUrl","client_id","clientId","events","addUserLoaded","addUserUnloaded","addAccessTokenExpired","signinSilent","catch","error","redirect","assertNotInInceptionLoop","installCustomUrlSchemeCallback","urlMatching","location","href","backFromLogin","backFromLogout","signinSilentError","message","login","redirectUrl","POPUP","signinPopup","stack","sessionStorage","signinRedirect","logout","signoutPopup","signoutRedirect","renew","decodeJwt","warn","getSettings","isRenewing","isAuthenticated","waitForRenew","getUserProfile","getUserSession","getIdToken","getIdTokenDecoded","getAccessToken","getAccessTokenDecoded","destroy","unsub","onIdTokenChanged","handler","onAccessTokenChanged","onUserProfileChanged","onUserSessionChanged","onAuthenticatedChanged","onRenewingChanged","onRedirect","uri","htmlFileName","RegExp","exec","caller","startTime","Date","getTime","Promise","resolve","setTimeout","url1","url2","includes","document","baseURI","querySelector","origin","endsWith","getURL","url","URL","pathUrl","startsWith","substring","removeUser","history","replaceState","state","all","clearStaleState","signinCallback","signoutCallback","onCallback","addListener","handleOpenURL","returnTo","metadataSeed","end_session_endpoint","environment","template","createElement","innerHTML","AppElement","HTMLElement","constructor","demoAppMainEl","demoAppDebugEl","authManagerSubs","listeners","attachShadow","mode","shadowRoot","appendChild","importNode","content","connectedCallback","demoAppSettingsEl","isDev","production","listenForHeaderEvents","listenForAuthChanges","disconnectedCallback","sub","rm","refreshInfo","authManager","userSession","accessToken","accessTokenDecoded","idToken","idTokenDecoded","userProfile","addEventListener","silentRenew","removeEventListener","customElements","define","DemoAppSettings","pkgJson","name","librarySettings","extraQueryParams","audience","librarySettingsDefinition","label","type","required","values","ERROR","WARN","INFO","DEBUG","authSettings","version","currentImplementationIndex","currentTabIndex","currentSettingsIndex","getCurrentSettings","body","once","globalStyle","prettyPrint","DemoAppDebugElement","update","text","elementName","element","closest","classList","remove","String","DemoAppHeaderElement","statusEl","loginButtonEl","logoutButtonEl","silentRenewButtonEl","refreshStatus","selectEl","getImplementations","item","optionEl","selected","getCurrentImplementationIndex","textContent","changeCb","saveCurrentImplementationIndex","selectedIndex","addEventListeners","dispatchEvent","Event","bubbles","composed","title","DemoAppMainElement","tabsContentEl","tabs","views","demoAppHeader","drawTabs","showView","getCurrentTabIndex","viewsEl","tabsEl","assignedElements","view","style","display","tab","getAttribute","cb","i","scrollTo","saveCurrentTabIndex","DemoAppSettingsElement","formEl","resetEl","resetDevEl","formContentEl","formIsDirty","onsubmit","saveAndReload","inputCb","e","target","id","resetAndReload","resetSelectEl","cancelEl","cancelCb","cancel","refreshFormContent","settingsName","resetCurrentSettings","reload","setPathValue","path","props","split","reduce","obj","prop","prototype","hasOwnProperty","call","getPathValue","getLibrarySettingsDefinition","sort","a","b","formItemContainerEl","prepend","formItemLabelEl","htmlFor","replace","formItemEl","checked","option","JSON","stringify","reportValidity","val","trim","parse","err","saveCurrentLibrarySettings","dateAttrs","jsonLine","replacer","_match","pIndent","pKey","pVal","pEnd","r","date","Number","pValAsDate","toDateString","toLocaleTimeString","storageKey","defaultAppSettings","implementations","getAppSettings","appSettings","saveAppSettings","findIndex","s","saveCurrentOtherSettings","otherSettings"],"sourceRoot":""}